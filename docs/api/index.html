<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Clojure documentation browser</title><style>
.library
{
  padding: 0.5em 0 0 0 
}
.all-libs-toggle,.library-contents-toggle
{
 font-size: small;
}
.all-libs-toggle a,.library-contents-toggle a
{
 color: white
}
.library-member-doc-whitespace
{
 white-space: pre
}
.library-member-source-toggle
{
  font-size: small;
  margin-top: 0.5em
}
.library-member-source
{
  display: none;
  border-left: solid lightblue 
}
.library-member-docs
{
  font-family:monospace
}
.library-member-arglists
{
  font-family: monospace
}
.library-member-type
{
  font-weight: bold; 
  font-size: small;
  font-style: italic;
  color: darkred
}
.lib-links
{
  margin: 0 0 1em 0
}

.lib-link-header
{
  color: white;
  background: darkgreen;
  width: 100%
}

.library-name 
{ 
  color: white;
  background: darkblue;
  width: 100%
}

.missing-library
{
  color: darkred; 
  margin: 0 0 1em 0 
}

.library-members
{
  list-style: none
}

.library-member-name
{
  font-weight: bold;
  font-size: 105%
}</style><script language="JavaScript" type="text/javascript"> // <![CDATA[

function getElem(id)
{
  if( document.getElementById )
  {
    return document.getElementById( id )
  }
  else if ( document.all )
  {
    return eval( 'document.all.' + id )
  }
  else
    return false;
}

function setDisplayStyle(id,displayStyle)
{
  var elem = getElem (id)
  if (elem)
  {
    elem.style.display = displayStyle
  }

}

function setLinkToggleText (id, text)
{
 var elem = getElem (id)
 if (elem)
 {
   elem.innerHTML = text
 }
}

function collapse(id)
{
  setDisplayStyle (id, 'none')
}

function expand (id)
{
  setDisplayStyle (id, 'block')
}

function toggleSource( id )
{
  toggle(id, 'linkto-' + id, 'Hide Source', 'Show Source')
}

function toggle(targetid, linkid, textWhenOpen, textWhenClosed)
{
  var elem = getElem (targetid)
  var link = getElem (linkid)

  if (elem && link)
  {
    var isOpen = false
    if (elem.style.display == '')
    {
      isOpen = link.innerHTML == textWhenOpen
    }
    else if( elem.style.display == 'block' )
    {
      isOpen = true
    }
    
    if (isOpen)
    {
      elem.style.display = 'none'
      link.innerHTML = textWhenClosed
    }
    else
    {
      elem.style.display = 'block'
      link.innerHTML = textWhenOpen
    }
  }
}

      //]]>
</script><script language="JavaScript" type="text/javascript">// <![CDATA[!
function expandAllNamespaces()
{
expand(&apos;library-contents-incanter.core&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.core&apos;, &apos;-&apos;);
expand(&apos;library-contents-incanter.stats&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.stats&apos;, &apos;-&apos;);
expand(&apos;library-contents-incanter.io&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.io&apos;, &apos;-&apos;);
expand(&apos;library-contents-incanter.charts&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.charts&apos;, &apos;-&apos;);
expand(&apos;library-contents-incanter.bayes&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.bayes&apos;, &apos;-&apos;);
expand(&apos;library-contents-incanter.optimize&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.optimize&apos;, &apos;-&apos;);
expand(&apos;library-contents-incanter.datasets&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.datasets&apos;, &apos;-&apos;);
expand(&apos;library-contents-incanter.som&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.som&apos;, &apos;-&apos;);
expand(&apos;library-contents-incanter.censored&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.censored&apos;, &apos;-&apos;);

}function collapseAllNamespaces()
{
collapse(&apos;library-contents-incanter.core&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.core&apos;, &apos;+&apos;);
collapse(&apos;library-contents-incanter.stats&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.stats&apos;, &apos;+&apos;);
collapse(&apos;library-contents-incanter.io&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.io&apos;, &apos;+&apos;);
collapse(&apos;library-contents-incanter.charts&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.charts&apos;, &apos;+&apos;);
collapse(&apos;library-contents-incanter.bayes&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.bayes&apos;, &apos;+&apos;);
collapse(&apos;library-contents-incanter.optimize&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.optimize&apos;, &apos;+&apos;);
collapse(&apos;library-contents-incanter.datasets&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.datasets&apos;, &apos;+&apos;);
collapse(&apos;library-contents-incanter.som&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.som&apos;, &apos;+&apos;);
collapse(&apos;library-contents-incanter.censored&apos;);
setLinkToggleText(&apos;library-contents-toggle-incanter.censored&apos;, &apos;+&apos;);

}
// ]]></script></head><body><div class="lib-links"><div class="lib-link-header">Namespaces<span class="all-libs-toggle"> [ <a href="javascript:expandAllNamespaces()">Expand All</a> ] [ <a href="javascript:collapseAllNamespaces()">Collapse All</a> ]</span></div><a class="lib-link" href="#library-incanter.bayes">incanter.bayes</a> <a class="lib-link" href="#library-incanter.censored">incanter.censored</a> <a class="lib-link" href="#library-incanter.charts">incanter.charts</a> <a class="lib-link" href="#library-incanter.core">incanter.core</a> <a class="lib-link" href="#library-incanter.datasets">incanter.datasets</a> <a class="lib-link" href="#library-incanter.io">incanter.io</a> <a class="lib-link" href="#library-incanter.optimize">incanter.optimize</a> <a class="lib-link" href="#library-incanter.som">incanter.som</a> <a class="lib-link" href="#library-incanter.stats">incanter.stats</a></div><div class="library"><a name="library-incanter.bayes"/><div class="library-name"><span class="library-contents-toggle">[ <a id="library-contents-toggle-incanter.bayes" href="javascript:toggle(&apos;library-contents-incanter.bayes&apos;, &apos;library-contents-toggle-incanter.bayes&apos;, &apos;-&apos;, &apos;+&apos;)">-</a> ] </span>incanter.bayes</div><div class="library-contents" id="library-contents-incanter.bayes"><div class="library-member-links"><a class="lib-member-link" href="#member-incanter.bayes-sample-model-params">sample-model-params</a></div><ol class="library-members"><li class="library-member"><a name="member-incanter.bayes-sample-model-params"/><dl class="library-member-table"><dt class="library-member-name">sample-model-params</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([size linear-model])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a sample of the given size of the the parameters (coefficients and</div><div class="library-member-doc-line">  error variance) of the given linear-model. The sample is generated using </div><div class="library-member-doc-line">  Gibbs sampling.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also:</div><div class="library-member-doc-line">    incanter.stats/linear-model</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (use &apos;(incanter core datasets stats charts bayes))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def ols-data (to-matrix (get-dataset :survey)))</div><div class="library-member-doc-line">    (def x (sel ols-data (range 0 2313) (range 1 10)))</div><div class="library-member-doc-line">    (def y (sel ols-data (range 0 2313) 10))</div><div class="library-member-doc-line">    (def lm (linear-model y x :intercept false))</div><div class="library-member-doc-line">    (def param-samp (sample-model-params 5000 lm))</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    ;; view trace plots</div><div class="library-member-doc-line">    (view (trace-plot (:var param-samp ))) </div><div class="library-member-doc-line">    (view (trace-plot (sel (:coefs param-samp) :cols 0)))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; view histograms</div><div class="library-member-doc-line">    (view (histogram (:var param-samp))) </div><div class="library-member-doc-line">    (view (histogram (sel (:coefs param-samp) :cols 0)))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; calculate statistics</div><div class="library-member-doc-line">    (map mean (trans (:coefs param-samp)))</div><div class="library-member-doc-line">    (map median (trans (:coefs param-samp)))</div><div class="library-member-doc-line">    (map sd (trans (:coefs param-samp)))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; show the 95% bayesian confidence interval for the firt coefficient</div><div class="library-member-doc-line">    (quantile (sel (:coefs param-samp) :cols 0) :probs [0.025 0.975])</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.bayes-sample-model-params&apos;)" id="linkto-membersource-incanter.bayes-sample-model-params">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.bayes-sample-model-params"><pre>(defn sample-model-params 
&quot; Returns a sample of the given size of the the parameters (coefficients and...&quot;
  ([size linear-model]
    (let [x (:x linear-model)
          y (:y linear-model)
          pars (:coefs linear-model)
          xtxi (solve (mmult (trans x) x))
          resid (:residuals linear-model)
          shape (/ (- (nrow x) (ncol x)) 2)
          rate (mult 1/2 (mmult (trans resid) resid))
          s-sq (div 1 (sample-gamma size :shape shape :rate rate))]
      {:coefs 
        (matrix 
          ;(pmap ;; run a parallel map over the values of s-sq
          (map
            (fn [s2] 
              (to-list (plus (trans pars)
                  (mmult (trans (sample-normal (ncol x))) 
                    (decomp-cholesky (mult s2 xtxi))))))
            (to-list (trans s-sq)))) 
      :var s-sq})))</pre></div></div></dd></dl></li></ol></div></div><div class="library"><a name="library-incanter.censored"/><div class="library-name"><span class="library-contents-toggle">[ <a id="library-contents-toggle-incanter.censored" href="javascript:toggle(&apos;library-contents-incanter.censored&apos;, &apos;library-contents-toggle-incanter.censored&apos;, &apos;-&apos;, &apos;+&apos;)">-</a> ] </span>incanter.censored</div><div class="library-contents" id="library-contents-incanter.censored"><div class="library-member-links"><a class="lib-member-link" href="#member-incanter.censored-censored-mean-lower">censored-mean-lower</a> <a class="lib-member-link" href="#member-incanter.censored-censored-mean-two-sided">censored-mean-two-sided</a> <a class="lib-member-link" href="#member-incanter.censored-censored-mean-upper">censored-mean-upper</a> <a class="lib-member-link" href="#member-incanter.censored-censored-variance-lower">censored-variance-lower</a> <a class="lib-member-link" href="#member-incanter.censored-censored-variance-two-sided">censored-variance-two-sided</a> <a class="lib-member-link" href="#member-incanter.censored-censored-variance-upper">censored-variance-upper</a> <a class="lib-member-link" href="#member-incanter.censored-truncated-variance">truncated-variance</a></div><ol class="library-members"><li class="library-member"><a name="member-incanter.censored-censored-mean-lower"/><dl class="library-member-table"><dt class="library-member-name">censored-mean-lower</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([a mu sigma])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the mean of a normal distribution (with mean mu and standard </div><div class="library-member-doc-line">  deviation sigma) with the lower tail censored at &apos;a&apos; </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.censored-censored-mean-lower&apos;)" id="linkto-membersource-incanter.censored-censored-mean-lower">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.censored-censored-mean-lower"><pre>(defn censored-mean-lower
&quot; Returns the mean of a normal distribution (with mean mu and standard ...&quot;
  ([a mu sigma]
   (let [a-std (psi a mu sigma)]
    (+ (* (cdf-normal a-std) a)
       (* (- 1 (cdf-normal a-std)) 
          (+ mu (* sigma (lambda-lower a-std))))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.censored-censored-mean-two-sided"/><dl class="library-member-table"><dt class="library-member-name">censored-mean-two-sided</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([a b mu sigma])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the mean of a normal distribution (with mean mu and standard </div><div class="library-member-doc-line">  deviation sigma) with the lower tail censored at &apos;a&apos; and the upper</div><div class="library-member-doc-line">  tail censored at &apos;b&apos;</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.censored-censored-mean-two-sided&apos;)" id="linkto-membersource-incanter.censored-censored-mean-two-sided">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.censored-censored-mean-two-sided"><pre>(defn censored-mean-two-sided 
&quot; Returns the mean of a normal distribution (with mean mu and standard ...&quot;
  ([a b mu sigma]
   (let [a-std (psi a mu sigma)
         b-std (psi b mu sigma)
         cdf-a (cdf-normal a-std)
         cdf-b (cdf-normal b-std)]
      (+ (* cdf-a a)
         (* (- cdf-b cdf-a) (+ mu (* sigma (lambda-two-sided a-std b-std))))
         (* (- 1 cdf-b) b)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.censored-censored-mean-upper"/><dl class="library-member-table"><dt class="library-member-name">censored-mean-upper</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([b mu sigma])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the mean of a normal distribution (with mean mu and standard </div><div class="library-member-doc-line">  deviation sigma) with the upper tail censored at &apos;b&apos;</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.censored-censored-mean-upper&apos;)" id="linkto-membersource-incanter.censored-censored-mean-upper">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.censored-censored-mean-upper"><pre>(defn censored-mean-upper
&quot; Returns the mean of a normal distribution (with mean mu and standard ...&quot;
  ([b mu sigma]
   (let [b-std (psi b mu sigma)]
    (+ (* (cdf-normal b-std) (+ mu (* sigma (lambda-upper b-std))))
       (* (- 1 (cdf-normal b-std)) b)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.censored-censored-variance-lower"/><dl class="library-member-table"><dt class="library-member-name">censored-variance-lower</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([a mu sigma])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the variance of a normal distribution (with mean mu and standard </div><div class="library-member-doc-line">  deviation sigma) with the lower tail censored at &apos;a&apos; </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.censored-censored-variance-lower&apos;)" id="linkto-membersource-incanter.censored-censored-variance-lower">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.censored-censored-variance-lower"><pre>(defn censored-variance-lower
&quot; Returns the variance of a normal distribution (with mean mu and standard ...&quot;
  ([a mu sigma]
   (let [a-std (psi a mu sigma)
         cdf-a (cdf-normal a-std)
         sigma-sq (* sigma sigma)
         Ey (censored-mean-lower a mu sigma)]
     (+ (* cdf-a (* a a))
        (* (- 1 cdf-a)
           (+ sigma-sq (* mu mu) (* 2 mu sigma (lambda-lower a-std))))
        (* sigma-sq a-std (pdf-normal a-std))
        (- (* Ey Ey))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.censored-censored-variance-two-sided"/><dl class="library-member-table"><dt class="library-member-name">censored-variance-two-sided</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([a b mu sigma])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the variance of a normal distribution (with mean mu and standard </div><div class="library-member-doc-line">  deviation sigma) with the lower tail censored at &apos;a&apos; and the upper</div><div class="library-member-doc-line">  tail censored at &apos;b&apos;</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.censored-censored-variance-two-sided&apos;)" id="linkto-membersource-incanter.censored-censored-variance-two-sided">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.censored-censored-variance-two-sided"><pre>(defn censored-variance-two-sided
&quot; Returns the variance of a normal distribution (with mean mu and standard ...&quot;
  ([a b mu sigma]
   (let [a-std (psi a mu sigma)
         b-std (psi b mu sigma)
         sigma-sq (* sigma sigma)
         Ey (censored-mean-two-sided a b mu sigma)
         cdf-a (cdf-normal a-std)
         cdf-b (cdf-normal b-std)]
     (+ (* cdf-a (* a a))
        (* (- cdf-b cdf-a) 
           (+ sigma-sq (* mu mu) (* 2 mu sigma (lambda-two-sided a-std b-std))))
        (* sigma-sq (- (* a-std (pdf-normal a-std)) (* b-std (pdf-normal b-std))))
        (- (* (- 1 cdf-b) (* b b)) (* Ey Ey))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.censored-censored-variance-upper"/><dl class="library-member-table"><dt class="library-member-name">censored-variance-upper</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([b mu sigma])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the variance of a normal distribution (with mean mu and standard </div><div class="library-member-doc-line">  deviation sigma) with the upper tail censored at &apos;b&apos;</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.censored-censored-variance-upper&apos;)" id="linkto-membersource-incanter.censored-censored-variance-upper">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.censored-censored-variance-upper"><pre>(defn censored-variance-upper
&quot; Returns the variance of a normal distribution (with mean mu and standard ...&quot;
  ([b mu sigma]
   (let [sigma-sq (* sigma sigma)
         b-std (psi b mu sigma)
         cdf-b (cdf-normal b-std)
         Ey (censored-mean-upper b mu sigma)]
      (+ (* cdf-b
            (+ sigma-sq (* mu mu) (* 2 mu sigma (lambda-upper b-std))))
         (- (* sigma-sq b-std (pdf-normal b-std)))
         (* (- 1 cdf-b) (* b b))
         (- (* Ey Ey))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.censored-truncated-variance"/><dl class="library-member-table"><dt class="library-member-name">truncated-variance</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([&amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the variance of a normal distribution truncated at a and b.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :mean (default 0) mean of untruncated normal distribution</div><div class="library-member-doc-line">    :sd (default 1) standard deviation of untruncated normal distribution</div><div class="library-member-doc-line">    :a (default -infinity) lower truncation point</div><div class="library-member-doc-line">    :b (default +infinity) upper truncation point</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">  </div><div class="library-member-doc-line">    (use &apos;(incanter core stats))</div><div class="library-member-doc-line">    (truncated-variance :a -1.96 :b 1.96)  </div><div class="library-member-doc-line">    (truncated-variance :a 0)</div><div class="library-member-doc-line">    (truncated-variance :b 0)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;incanter.charts)</div><div class="library-member-doc-line">    (def x (range -3 3 0.1))</div><div class="library-member-doc-line">    (def plot (xy-plot x (map #(truncated-variance :a %) x)))</div><div class="library-member-doc-line">    (view plot)</div><div class="library-member-doc-line">    (add-lines plot x (map #(truncated-variance :b %) x))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def samp (sample-normal 10000))</div><div class="library-member-doc-line">    (add-lines plot x (map #(variance (filter (fn [s] (&gt; s %)) samp)) x))</div><div class="library-member-doc-line">    (add-lines plot x (map #(variance (mult samp (indicator (fn [s] (&gt; s %)) samp))) x))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    DeMaris, A. (2004) Regression with social data: modeling continuous and limited response variables. </div><div class="library-member-doc-line">      Wiley-IEEE.</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Truncated_normal_distribution</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.censored-truncated-variance&apos;)" id="linkto-membersource-incanter.censored-truncated-variance">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.censored-truncated-variance"><pre>(defn truncated-variance 
&quot; Returns the variance of a normal distribution truncated at a and b....&quot;
  ([&amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          mu (if (:mean opts) (:mean opts) 0)
          sd (if (:sd opts) (:sd opts) 1)
          sigma-sq (* sd sd)
          a (if (:a opts) (:a opts) Double/NEGATIVE_INFINITY)
          b (if (:b opts) (:b opts) Double/POSITIVE_INFINITY)
          lambda (fn [alpha] (/ (pdf-normal alpha) (- 1 (cdf-normal alpha))))
          delta (fn [alpha] (* (lambda alpha) (- (lambda alpha) alpha)))
          ;one-tail-var (fn [alpha s-sq] 
          ;               (* s-sq 
          ;                  (- 1 (cdf-normal alpha)) 
          ;                  (+ (- 1 (delta alpha)) 
          ;                     (* (pow (- alpha (lambda alpha)) 2) 
          ;                        (cdf-normal alpha)))))
          a-std (if (= a Double/NEGATIVE_INFINITY) Double/NEGATIVE_INFINITY (/ (- a mu) sd))
          b-std (if (= b Double/POSITIVE_INFINITY) Double/POSITIVE_INFINITY (/ (- b mu) sd))
          pdf-a (if (= a Double/NEGATIVE_INFINITY) 0 (pdf-normal a-std))
          pdf-b (if (= b Double/POSITIVE_INFINITY) 0 (pdf-normal b-std))
          cdf-a (if (= a Double/NEGATIVE_INFINITY) 0 (cdf-normal a-std))
          cdf-b (if (= b Double/POSITIVE_INFINITY) 1 (cdf-normal b-std))]
      (cond 
        (and (= b Double/POSITIVE_INFINITY) (= a Double/NEGATIVE_INFINITY))
          sigma-sq
        (and (= b Double/POSITIVE_INFINITY) (&gt; a Double/NEGATIVE_INFINITY))
          (* sigma-sq (- 1 (delta a-std)))
          ;(one-tail-var a-std sigma-sq)
        (and (= a Double/NEGATIVE_INFINITY) (&lt; b Double/POSITIVE_INFINITY))
          (* sigma-sq (- 1 (delta (- 1 b-std))))
          ;(- sigma-sq (one-tail-var b-std sigma-sq))
        :else
          (* sigma-sq 
            (+ 1 (/ (- (* a-std pdf-a) (* b-std pdf-b))
                    (- cdf-b cdf-a))
              (- (pow (/ (- pdf-a pdf-b) (- cdf-b cdf-a)) 2))))))))</pre></div></div></dd></dl></li></ol></div></div><div class="library"><a name="library-incanter.charts"/><div class="library-name"><span class="library-contents-toggle">[ <a id="library-contents-toggle-incanter.charts" href="javascript:toggle(&apos;library-contents-incanter.charts&apos;, &apos;library-contents-toggle-incanter.charts&apos;, &apos;-&apos;, &apos;+&apos;)">-</a> ] </span>incanter.charts</div><div class="library-contents" id="library-contents-incanter.charts"><div class="library-member-links"><a class="lib-member-link" href="#member-incanter.charts-add-box-plot">add-box-plot</a> <a class="lib-member-link" href="#member-incanter.charts-add-categories">add-categories</a> <a class="lib-member-link" href="#member-incanter.charts-add-function">add-function</a> <a class="lib-member-link" href="#member-incanter.charts-add-histogram">add-histogram</a> <a class="lib-member-link" href="#member-incanter.charts-add-lines">add-lines</a> <a class="lib-member-link" href="#member-incanter.charts-add-pointer">add-pointer</a> <a class="lib-member-link" href="#member-incanter.charts-add-points">add-points</a> <a class="lib-member-link" href="#member-incanter.charts-add-polygon">add-polygon</a> <a class="lib-member-link" href="#member-incanter.charts-add-text">add-text</a> <a class="lib-member-link" href="#member-incanter.charts-bar-chart">bar-chart</a> <a class="lib-member-link" href="#member-incanter.charts-bland-altman-plot">bland-altman-plot</a> <a class="lib-member-link" href="#member-incanter.charts-box-plot">box-plot</a> <a class="lib-member-link" href="#member-incanter.charts-clear-background">clear-background</a> <a class="lib-member-link" href="#member-incanter.charts-function-plot">function-plot</a> <a class="lib-member-link" href="#member-incanter.charts-histogram">histogram</a> <a class="lib-member-link" href="#member-incanter.charts-line-chart">line-chart</a> <a class="lib-member-link" href="#member-incanter.charts-line-plot">line-plot</a> <a class="lib-member-link" href="#member-incanter.charts-qq-plot">qq-plot</a> <a class="lib-member-link" href="#member-incanter.charts-scatter-plot">scatter-plot</a> <a class="lib-member-link" href="#member-incanter.charts-set-alpha">set-alpha</a> <a class="lib-member-link" href="#member-incanter.charts-set-background-alpha">set-background-alpha</a> <a class="lib-member-link" href="#member-incanter.charts-set-title">set-title</a> <a class="lib-member-link" href="#member-incanter.charts-set-x-label">set-x-label</a> <a class="lib-member-link" href="#member-incanter.charts-set-y-label">set-y-label</a> <a class="lib-member-link" href="#member-incanter.charts-trace-plot">trace-plot</a> <a class="lib-member-link" href="#member-incanter.charts-xy-plot">xy-plot</a></div><ol class="library-members"><li class="library-member"><a name="member-incanter.charts-add-box-plot"/><dl class="library-member-table"><dt class="library-member-name">add-box-plot</dt><dd><div class="library-member-info"><span class="library-member-type">macro</span> <span class="library-member-arglists">([chart x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Adds an additional box to an existing box-plot, returns the modified chart object.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :series-label (default x expression)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (use &apos;(incanter core charts stats))</div><div class="library-member-doc-line">      (doto (box-plot (sample-normal 1000) :legend true)</div><div class="library-member-doc-line">            view</div><div class="library-member-doc-line">            (add-box-plot (sample-normal 1000 :sd 2))</div><div class="library-member-doc-line">            (add-box-plot (sample-gamma 1000)))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-add-box-plot&apos;)" id="linkto-membersource-incanter.charts-add-box-plot">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-add-box-plot"><pre>(defmacro add-box-plot 
&quot;...&quot;
  ([chart x &amp; options]
    `(let [opts# (if &apos;~options (assoc {} ~@options))
          _x# (if (matrix? ~x) (to-list ~x) ~x)
          chart# ~chart
          data-plot# (.getCategoryPlot chart#)
          n-col# (.getColumnCount (.getDataset data-plot#)) 
          n-row# (.getRowCount (.getDataset data-plot#))
          series-label# (if (:series-label opts#) (:series-label opts#) (str &apos;~x))
          category-label# (if (:category-label opts#) 
                            (:category-label opts#) 
                            (str n-col#))
        ]
      (do
        (.add (.getDataset data-plot#) _x# series-label# category-label#)
        chart#))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-add-categories"/><dl class="library-member-table"><dt class="library-member-name">add-categories</dt><dd><div class="library-member-info"><span class="library-member-type">macro</span> <span class="library-member-arglists">([chart categories values &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Adds an additional categories to an existing bar-chart or line-chart, returns the modified chart object.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :group-by</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (use &apos;(incanter core charts stats))</div><div class="library-member-doc-line">      (def seasons (mapcat identity (repeat 3 [&quot;winter&quot; &quot;spring&quot; &quot;summer&quot; &quot;fall&quot;])))</div><div class="library-member-doc-line">      (def years (mapcat identity (repeat 4 [2007 2008 2009])))</div><div class="library-member-doc-line">      (def x (sample-uniform 12 :integers true :max 100))</div><div class="library-member-doc-line">      (def plot (bar-chart years x :group-by seasons :legend true))</div><div class="library-member-doc-line">      (view plot)</div><div class="library-member-doc-line">      (add-category-line plot (plus 3 years) (sample-uniform 12 :integers true :max 100) :group-by seasons)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (def plot2 (line-chart years x :group-by seasons :legend true))</div><div class="library-member-doc-line">      (view plot2)</div><div class="library-member-doc-line">      (add-category-line plot2 (plus 3 years) (sample-uniform 12 :integers true :max 100) :group-by seasons)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-add-categories&apos;)" id="linkto-membersource-incanter.charts-add-categories">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-add-categories"><pre>(defmacro add-categories
&quot;
  Adds an additional categories to an existing bar-chart or line-chart, returns the modified chart object.

  Options:
    :group-by

  Examples:

      (use &apos;(incanter core charts stats))
      (def seasons (mapcat identity (repeat 3 [\&quot;winter\&quot; \&quot;spring\&quot; \&quot;summer\&quot; \&quot;fall\&quot;])))
      (def years (mapcat identity (repeat 4 [2007 2008 2009])))
      (def x (sample-uniform 12 :integers true :max 100))
      (def plot (bar-chart years x :group-by seasons :legend true))
      (view plot)
      (add-category-line plot (plus 3 years) (sample-uniform 12 :integers true :max 100) :group-by seasons)

      (def plot2 (line-chart years x :group-by seasons :legend true))
      (view plot2)
      (add-category-line plot2 (plus 3 years) (sample-uniform 12 :integers true :max 100) :group-by seasons)


  References:
    http://www.jfree.org/jfreechart/api/javadoc/
    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html
    
&quot;
  ([chart categories values &amp; options]
    `(let [opts# (if &apos;~options (assoc {} ~@options))
           values# (if (matrix? ~values) (to-list ~values) ~values)
           chart# ~chart
           group-by# (when (:group-by opts#) (:group-by opts#))
           data-plot# (.getCategoryPlot chart#)
           n-col# (.getColumnCount (.getDataset data-plot#)) 
           n-row# (.getRowCount (.getDataset data-plot#))]
        (do
          (doseq [i# (range 0 (count values#))] (.addValue (.getDataset data-plot#)
                                                      (nth values# i#) 
                                                      (if group-by#
                                                        (nth group-by# i#)
                                                        (str &apos;~values))
                                                       (nth ~categories i#)))
          chart#))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-add-function"/><dl class="library-member-table"><dt class="library-member-name">add-function</dt><dd><div class="library-member-info"><span class="library-member-type">macro</span> <span class="library-member-arglists">([chart function min-range max-range &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Adds a xy-plot of the given function to the given chart, returning</div><div class="library-member-doc-line">  a modified version of the chart.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :series-label (default x expression)</div><div class="library-member-doc-line">    :step-size (default (/ (- max-range min-range) 500))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also:</div><div class="library-member-doc-line">    function-plot, view, save, add-function, add-points, add-lines</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core stats charts))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; plot the sine and cosine functions</div><div class="library-member-doc-line">    (doto (function-plot sin (- Math/PI) Math/PI)</div><div class="library-member-doc-line">          (add-function cos (- Math/PI) Math/PI)</div><div class="library-member-doc-line">          view)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; plot two normal pdf functions</div><div class="library-member-doc-line">    (doto (function-plot pdf-normal -3 3 :legend true)</div><div class="library-member-doc-line">          (add-function (fn [x] (pdf-normal x :mean 0.5 :sd 0.5)) -3 3)</div><div class="library-member-doc-line">          view)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; plot a user defined function and its derivative</div><div class="library-member-doc-line">    (use &apos;(incanter core charts optimize))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; define the function, x^3 + 2x^2 + 2x + 3</div><div class="library-member-doc-line">    (defn cubic [x] (+ (* x x x) (* 2 x x) (* 2 x) 3))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; use the derivative function to get a function</div><div class="library-member-doc-line">    ;; that approximates its derivative</div><div class="library-member-doc-line">    (def deriv-cubic (derivative cubic))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; plot the cubic function and its derivative</div><div class="library-member-doc-line">    (doto (function-plot cubic -10 10)</div><div class="library-member-doc-line">          (add-function deriv-cubic -10 10)</div><div class="library-member-doc-line">          view)</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-add-function&apos;)" id="linkto-membersource-incanter.charts-add-function">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-add-function"><pre>(defmacro add-function
&quot; Adds a xy-plot of the given function to the given chart, returning...&quot;
  ([chart function min-range max-range &amp; options]
    `(let [opts# (if &apos;~options (assoc {} ~@options))
           step-size# (if (:step-size opts#) (:step-size opts#) (float (/ (- ~max-range ~min-range) 500)))
           x# (range ~min-range ~max-range step-size#)
           series-lab# (if (:series-label opts#) (:series-label opts#) (format &quot;%s&quot; &apos;~function))
          ]
       (add-lines ~chart x# (map ~function x#) 
                 :series-label series-lab#))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-add-histogram"/><dl class="library-member-table"><dt class="library-member-name">add-histogram</dt><dd><div class="library-member-info"><span class="library-member-type">macro</span> <span class="library-member-arglists">([chart x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Adds a histogram to an existing histogram plot, returns the modified</div><div class="library-member-doc-line">  chart object.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :nbins (default 10) number of bins for histogram</div><div class="library-member-doc-line">    :series-label (default x expression)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core charts stats))</div><div class="library-member-doc-line">    (doto (histogram (sample-normal 1000) </div><div class="library-member-doc-line">                     :legend true)</div><div class="library-member-doc-line">          view </div><div class="library-member-doc-line">          (add-histogram (sample-normal 1000 :sd 0.5)))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-add-histogram&apos;)" id="linkto-membersource-incanter.charts-add-histogram">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-add-histogram"><pre>(defmacro add-histogram 
&quot;...&quot;
  ([chart x &amp; options]
    `(let [opts# (if &apos;~options (assoc {} ~@options))
          _x# (if (matrix? ~x) (to-list ~x) ~x)
          chart# ~chart
          data-plot# (.getPlot chart#)
          n# (.getDatasetCount data-plot#)
          nbins# (if (:nbins opts#) (:nbins opts#) 10)
          series-lab# (if (:series-label opts#) (:series-label opts#) (str &apos;~x))
        ]
      (do
        (.addSeries (.getDataset data-plot#) series-lab# (double-array _x#) nbins#)
        (.setSeriesRenderingOrder data-plot# org.jfree.chart.plot.SeriesRenderingOrder/FORWARD)
        (.fireChartChanged chart#)
        chart#))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-add-lines"/><dl class="library-member-table"><dt class="library-member-name">add-lines</dt><dd><div class="library-member-info"><span class="library-member-type">macro</span> <span class="library-member-arglists">([chart x y &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Plots lines on the given scatter or line plot of the (x,y) points.</div><div class="library-member-doc-line">  Equivalent to R&apos;s lines function, returns the modified chart object.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :series-label (default x expression)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core stats io datasets charts))</div><div class="library-member-doc-line">    (def cars (to-matrix (get-dataset :cars)))</div><div class="library-member-doc-line">    (def y (sel cars :cols 0))</div><div class="library-member-doc-line">    (def x (sel cars :cols 1))</div><div class="library-member-doc-line">    (def plot1 (scatter-plot x y :legend true))</div><div class="library-member-doc-line">    (view plot1)</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    ;; add regression line to scatter plot</div><div class="library-member-doc-line">    (def lm1 (linear-model y x))</div><div class="library-member-doc-line">    (add-lines plot1 x (:fitted lm1))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; model the data without an intercept</div><div class="library-member-doc-line">    (def lm2 (linear-model y x :intercept false))</div><div class="library-member-doc-line">    (add-lines plot1 x (:fitted lm2))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; Clojure&apos;s doto macro can be used to build a chart</div><div class="library-member-doc-line">    (doto (xy-plot x (pdf-normal x))</div><div class="library-member-doc-line">          view</div><div class="library-member-doc-line">          clear-background</div><div class="library-member-doc-line">          (add-lines x (pdf-normal x :sd 1.5))</div><div class="library-member-doc-line">          (add-lines x (pdf-normal x :sd 0.5)))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-add-lines&apos;)" id="linkto-membersource-incanter.charts-add-lines">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-add-lines"><pre>(defmacro add-lines
&quot; Plots lines on the given scatter or line plot of the (x,y) points....&quot;
  ([chart x y &amp; options]
    `(let [opts# (if &apos;~options (assoc {} ~@options))
           _x# (if (matrix? ~x) (to-list ~x) ~x)
           _y# (if (matrix? ~y) (to-list ~y) ~y)
           chart# ~chart
           data-plot# (.getPlot chart#)
           n# (.getDatasetCount data-plot#)
           series-lab# (if (:series-label opts#) (:series-label opts#) (format &quot;%s, %s&quot; &apos;~x &apos;~y))
           ;legend?# (if (false? (:legend opts#)) false true)
           ;points?# (if (false? (:points opts#)) false true) ;; TODO
           data-series# (XYSeries. series-lab#)
           line-renderer# (XYLineAndShapeRenderer. true false)
           data-set# (XYSeriesCollection.)
          ]
    (do
      (doseq [i# (range (count _x#))] (.add data-series# (nth _x# i#)  (nth _y# i#)))
      ;(.addSeries (.getDataset data-plot) data-series)
      (.setSeriesRenderingOrder (.getPlot chart#) org.jfree.chart.plot.SeriesRenderingOrder/FORWARD)
      (.setDatasetRenderingOrder data-plot# org.jfree.chart.plot.DatasetRenderingOrder/FORWARD) 
      (.addSeries data-set# data-series#)
      (.setDataset data-plot# (.getDatasetCount data-plot#) data-set#)
      ;(.setSeriesPaint line-renderer 1 java.awt.Color/blue)
      (.setRenderer data-plot# (dec (.getDatasetCount data-plot#)) line-renderer#)
      chart#))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-add-pointer"/><dl class="library-member-table"><dt class="library-member-name">add-pointer</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([chart x y &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Adds an arrow annotation to the given chart.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Arguments:</div><div class="library-member-doc-line">    chart -- the chart to annotate</div><div class="library-member-doc-line">    x, y -- the coordinate to add the annotation</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">      :text -- (default &quot;&quot;) text to include at the end of the arrow</div><div class="library-member-doc-line">      :angle -- (default :nw) either a number indicating the angle of the arrow, </div><div class="library-member-doc-line">                or a keyword indicating a direction (:north :nw :west :sw :south</div><div class="library-member-doc-line">                :se :east :ne)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core charts))</div><div class="library-member-doc-line">    (def x (range (* -2 Math/PI) (* 2 Math/PI) 0.01))</div><div class="library-member-doc-line">    (def plot (xy-plot x (sin x)))</div><div class="library-member-doc-line">    (view plot)</div><div class="library-member-doc-line">    ;; annotate the plot</div><div class="library-member-doc-line">    (doto plot</div><div class="library-member-doc-line">      (add-pointer (- Math/PI) (sin (- Math/PI)) :text &quot;(-pi, (sin -pi))&quot;)</div><div class="library-member-doc-line">      (add-pointer Math/PI (sin Math/PI) :text &quot;(pi, (sin pi))&quot; :angle :ne)</div><div class="library-member-doc-line">      (add-pointer (* 1/2 Math/PI) (sin (* 1/2 Math/PI)) :text &quot;(pi/2, (sin pi/2))&quot; :angle :south))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; try the different angle options</div><div class="library-member-doc-line">    (add-pointer plot 0 0 :text &quot;north&quot; :angle :north)</div><div class="library-member-doc-line">    (add-pointer plot 0 0 :text &quot;nw&quot; :angle :nw)</div><div class="library-member-doc-line">    (add-pointer plot 0 0 :text &quot;ne&quot; :angle :ne)</div><div class="library-member-doc-line">    (add-pointer plot 0 0 :text &quot;west&quot; :angle :west)</div><div class="library-member-doc-line">    (add-pointer plot 0 0 :text &quot;east&quot; :angle :east)</div><div class="library-member-doc-line">    (add-pointer plot 0 0 :text &quot;south&quot; :angle :south)</div><div class="library-member-doc-line">    (add-pointer plot 0 0 :text &quot;sw&quot; :angle :sw)</div><div class="library-member-doc-line">    (add-pointer plot 0 0 :text &quot;se&quot; :angle :se)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-add-pointer&apos;)" id="linkto-membersource-incanter.charts-add-pointer">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-add-pointer"><pre>(defn add-pointer
&quot; Adds an arrow annotation to the given chart.

  Arguments:
    chart -- the chart to annotate
    x, y -- the coordinate to add the annotation


  Options:
      :text -- (default \&quot;\&quot;) text to include at the end of the arrow
      :angle -- (default :nw) either a number indicating the angle of the arrow, 
                or a keyword indicating a direction (:north :nw :west :sw :south
                :se :east :ne)


  Examples:

    (use &apos;(incanter core charts))
    (def x (range (* -2 Math/PI) (* 2 Math/PI) 0.01))
    (def plot (xy-plot x (sin x)))
    (view plot)
    ;; annotate the plot
    (doto plot
      (add-pointer (- Math/PI) (sin (- Math/PI)) :text \&quot;(-pi, (sin -pi))\&quot;)
      (add-pointer Math/PI (sin Math/PI) :text \&quot;(pi, (sin pi))\&quot; :angle :ne)
      (add-pointer (* 1/2 Math/PI) (sin (* 1/2 Math/PI)) :text \&quot;(pi/2, (sin pi/2))\&quot; :angle :south))

    ;; try the different angle options
    (add-pointer plot 0 0 :text \&quot;north\&quot; :angle :north)
    (add-pointer plot 0 0 :text \&quot;nw\&quot; :angle :nw)
    (add-pointer plot 0 0 :text \&quot;ne\&quot; :angle :ne)
    (add-pointer plot 0 0 :text \&quot;west\&quot; :angle :west)
    (add-pointer plot 0 0 :text \&quot;east\&quot; :angle :east)
    (add-pointer plot 0 0 :text \&quot;south\&quot; :angle :south)
    (add-pointer plot 0 0 :text \&quot;sw\&quot; :angle :sw)
    (add-pointer plot 0 0 :text \&quot;se\&quot; :angle :se)


&quot;
  ([chart x y &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          text (if (:text opts) (:text opts) &quot;&quot;)
          n (* -1/2 Math/PI)
          s (* 1/2 Math/PI)
          w Math/PI
          e 0
          nw (* -3/4 Math/PI)
          ne (* -1/4 Math/PI)
          se (* 1/4 Math/PI)
          sw (* 3/4 Math/PI)
          angle (if (nil? (:angle opts))
                    nw
                    (if (keyword? (:angle opts))
                      (cond 
                        (= (:angle opts) :north) n
                        (= (:angle opts) :south) s
                        (= (:angle opts) :west) w
                        (= (:angle opts) :east) e
                        (= (:angle opts) :nw) nw
                        (= (:angle opts) :ne) ne
                        (= (:angle opts) :sw) sw
                        (= (:angle opts) :se) se)
                      (:angle opts)))
          anno (XYPointerAnnotation. text x y angle)]
      (do
        (cond
          (= angle n)
            (.setTextAnchor TextAnchor/BASELINE_CENTER)
          (= angle s)
            (.setTextAnchor TextAnchor/CENTER)
          (= angle w)
            (.setTextAnchor TextAnchor/CENTER_RIGHT)
          (= angle e)
            (.setTextAnchor TextAnchor/CENTER_LEFT)
          (= angle nw)
            (.setTextAnchor TextAnchor/CENTER_RIGHT)
          (= angle ne)
            (.setTextAnchor TextAnchor/CENTER_LEFT)
          (= angle sw)
            (.setTextAnchor TextAnchor/CENTER_RIGHT)
          (= angle se)
            (.setTextAnchor TextAnchor/CENTER_LEFT))
        (.addAnnotation (.getPlot chart) anno)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-add-points"/><dl class="library-member-table"><dt class="library-member-name">add-points</dt><dd><div class="library-member-info"><span class="library-member-type">macro</span> <span class="library-member-arglists">([chart x y &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Plots points on the given scatter-plot or xy-plot of the (x,y) points.</div><div class="library-member-doc-line">  Equivalent to R&apos;s lines function, returns the modified chart object.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :series-label (default x expression)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core stats io datasets charts))</div><div class="library-member-doc-line">    (def cars (to-matrix (get-dataset :cars)))</div><div class="library-member-doc-line">    (def y (sel cars :cols 0))</div><div class="library-member-doc-line">    (def x (sel cars :cols 1))</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    ;; add regression line to scatter plot</div><div class="library-member-doc-line">    (def lm1 (linear-model y x))</div><div class="library-member-doc-line">    ;; model the data without an intercept</div><div class="library-member-doc-line">    (def lm2 (linear-model y x :intercept false))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (doto (xy-plot x (:fitted lm1) :legend true)</div><div class="library-member-doc-line">          view</div><div class="library-member-doc-line">          (add-points x y)</div><div class="library-member-doc-line">          (add-lines x (:fitted lm2)))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-add-points&apos;)" id="linkto-membersource-incanter.charts-add-points">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-add-points"><pre>(defmacro add-points
&quot; Plots points on the given scatter-plot or xy-plot of the (x,y) points....&quot;
  ([chart x y &amp; options]
    `(let [opts# (if &apos;~options (assoc {} ~@options))
        _x# (if (matrix? ~x) (to-list ~x) ~x)
        _y# (if (matrix? ~y) (to-list ~y) ~y)
        chart# ~chart
        data-plot# (.getPlot chart#)
        n# (.getDatasetCount data-plot#)
        series-lab# (if (:series-label opts#) (:series-label opts#) (format &quot;%s, %s&quot; &apos;~x &apos;~y))
        ;legend?# (if (false? (:legend opts#)) false true)
        ;points?# (if (false? (:points opts#)) false true) ;; TODO
        data-series# (XYSeries. series-lab#)
        line-renderer# (XYLineAndShapeRenderer. false true)
        data-set# (XYSeriesCollection.)
       ]
    (do
      (doseq [i# (range (count _x#))] (.add data-series# (nth _x# i#)  (nth _y# i#)))
      ;(.addSeries (.getDataset data-plot) data-series)
      (.setSeriesRenderingOrder (.getPlot chart#) org.jfree.chart.plot.SeriesRenderingOrder/FORWARD)
      (.setDatasetRenderingOrder (.getPlot chart#) org.jfree.chart.plot.DatasetRenderingOrder/FORWARD)
      (.addSeries data-set# data-series#)
      (.setDataset data-plot# (.getDatasetCount data-plot#) data-set#)
      ;(.setSeriesPaint line-renderer 1 java.awt.Color/blue)
      (.setRenderer data-plot# (dec (.getDatasetCount data-plot#)) line-renderer#)
      chart#))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-add-polygon"/><dl class="library-member-table"><dt class="library-member-name">add-polygon</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([chart coords &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Adds a polygon outline defined by a given coordinates. The last coordinate will </div><div class="library-member-doc-line">  close with the first. If only two points are given, it will plot a line.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Arguments:</div><div class="library-member-doc-line">    chart -- the chart to add the polygon to.</div><div class="library-member-doc-line">    coords -- a list of coords (an n-by-2 matrix can also be used)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (use &apos;(incanter core stats charts))</div><div class="library-member-doc-line">    (def x (range -3 3 0.01))</div><div class="library-member-doc-line">    (def plot (xy-plot x (pdf-normal x)))</div><div class="library-member-doc-line">    (view plot)</div><div class="library-member-doc-line">   </div><div class="library-member-doc-line">    ;; add polygon to the chart</div><div class="library-member-doc-line">    (add-polygon plot [[-1.96 0] [1.96 0] [1.96 0.4] [-1.96 0.4]])</div><div class="library-member-doc-line">    ;; the coordinates can also be passed in a matrix</div><div class="library-member-doc-line">    ;; (def points (matrix [[-1.96 0] [1.96 0] [1.96 0.4] [-1.96 0.4]]))</div><div class="library-member-doc-line">    ;; (add-polygon plot points)</div><div class="library-member-doc-line">    ;; add a text annotation</div><div class="library-member-doc-line">    (add-text plot -1.25 0.35 &quot;95% Conf Interval&quot;)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; PCA chart example</div><div class="library-member-doc-line">    (use &apos;(incanter core stats charts datasets))</div><div class="library-member-doc-line">    ;; load the iris dataset</div><div class="library-member-doc-line">    (def iris (to-matrix (get-dataset :iris)))</div><div class="library-member-doc-line">    ;; run the pca</div><div class="library-member-doc-line">    (def pca (principal-components (sel iris :cols (range 4))))</div><div class="library-member-doc-line">    ;; extract the first two principal components</div><div class="library-member-doc-line">    (def pc1 (sel (:rotation pca) :cols 0))</div><div class="library-member-doc-line">    (def pc2 (sel (:rotation pca) :cols 1))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; project the first four dimension of the iris data onto the first</div><div class="library-member-doc-line">    ;; two principal components</div><div class="library-member-doc-line">    (def x1 (mmult (sel iris :cols (range 4)) pc1)) </div><div class="library-member-doc-line">    (def x2 (mmult (sel iris :cols (range 4)) pc2)) </div><div class="library-member-doc-line">   </div><div class="library-member-doc-line">    ;; now plot the transformed data, coloring each species a different color</div><div class="library-member-doc-line">    (def plot (scatter-plot x1 x2 </div><div class="library-member-doc-line">                            :group-by (sel iris :cols 4)</div><div class="library-member-doc-line">                            :x-label &quot;PC1&quot; :y-label &quot;PC2&quot; :title &quot;Iris PCA&quot;))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (view plot)</div><div class="library-member-doc-line">    ;; put box around the first group</div><div class="library-member-doc-line">    (add-polygon plot [[-3.2 -6.3] [-2 -6.3] [-2 -3.78] [-3.2 -3.78]])</div><div class="library-member-doc-line">    ;; add some text annotations</div><div class="library-member-doc-line">    (add-text plot -2.5 -6.5 &quot;Setosa&quot;)</div><div class="library-member-doc-line">    (add-text plot -5 -5.5 &quot;Versicolor&quot;) </div><div class="library-member-doc-line">    (add-text plot -8 -5.5 &quot;Virginica&quot;)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-add-polygon&apos;)" id="linkto-membersource-incanter.charts-add-polygon">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-add-polygon"><pre>(defn add-polygon
&quot; Adds a polygon outline defined by a given coordinates. The last coordinate will 
  close with the first. If only two points are given, it will plot a line.

  Arguments:
    chart -- the chart to add the polygon to.
    coords -- a list of coords (an n-by-2 matrix can also be used)


  Examples:
    (use &apos;(incanter core stats charts))
    (def x (range -3 3 0.01))
    (def plot (xy-plot x (pdf-normal x)))
    (view plot)
   
    ;; add polygon to the chart
    (add-polygon plot [[-1.96 0] [1.96 0] [1.96 0.4] [-1.96 0.4]])
    ;; the coordinates can also be passed in a matrix
    ;; (def points (matrix [[-1.96 0] [1.96 0] [1.96 0.4] [-1.96 0.4]]))
    ;; (add-polygon plot points)
    ;; add a text annotation
    (add-text plot -1.25 0.35 \&quot;95% Conf Interval\&quot;)

    ;; PCA chart example
    (use &apos;(incanter core stats charts datasets))
    ;; load the iris dataset
    (def iris (to-matrix (get-dataset :iris)))
    ;; run the pca
    (def pca (principal-components (sel iris :cols (range 4))))
    ;; extract the first two principal components
    (def pc1 (sel (:rotation pca) :cols 0))
    (def pc2 (sel (:rotation pca) :cols 1))

    ;; project the first four dimension of the iris data onto the first
    ;; two principal components
    (def x1 (mmult (sel iris :cols (range 4)) pc1)) 
    (def x2 (mmult (sel iris :cols (range 4)) pc2)) 
   
    ;; now plot the transformed data, coloring each species a different color
    (def plot (scatter-plot x1 x2 
                            :group-by (sel iris :cols 4)
                            :x-label \&quot;PC1\&quot; :y-label \&quot;PC2\&quot; :title \&quot;Iris PCA\&quot;))

    (view plot)
    ;; put box around the first group
    (add-polygon plot [[-3.2 -6.3] [-2 -6.3] [-2 -3.78] [-3.2 -3.78]])
    ;; add some text annotations
    (add-text plot -2.5 -6.5 \&quot;Setosa\&quot;)
    (add-text plot -5 -5.5 \&quot;Versicolor\&quot;) 
    (add-text plot -8 -5.5 \&quot;Virginica\&quot;)



&quot;
  ([chart coords &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          points (double-array (mapcat identity coords))
          anno (XYPolygonAnnotation. points)]
      (.addAnnotation (.getPlot chart) anno))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-add-text"/><dl class="library-member-table"><dt class="library-member-name">add-text</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([chart x y text &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Adds a text annotation centered at the given coordinates.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Arguments:</div><div class="library-member-doc-line">    chart -- the chart to annotate</div><div class="library-member-doc-line">    x, y -- the coordinates to center the text</div><div class="library-member-doc-line">    text -- the text to add</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; PCA chart example</div><div class="library-member-doc-line">    (use &apos;(incanter core stats charts datasets))</div><div class="library-member-doc-line">    ;; load the iris dataset</div><div class="library-member-doc-line">    (def iris (to-matrix (get-dataset :iris)))</div><div class="library-member-doc-line">    ;; run the pca</div><div class="library-member-doc-line">    (def pca (principal-components (sel iris :cols (range 4))))</div><div class="library-member-doc-line">    ;; extract the first two principal components</div><div class="library-member-doc-line">    (def pc1 (sel (:rotation pca) :cols 0))</div><div class="library-member-doc-line">    (def pc2 (sel (:rotation pca) :cols 1))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; project the first four dimension of the iris data onto the first</div><div class="library-member-doc-line">    ;; two principal components</div><div class="library-member-doc-line">    (def x1 (mmult (sel iris :cols (range 4)) pc1)) </div><div class="library-member-doc-line">    (def x2 (mmult (sel iris :cols (range 4)) pc2)) </div><div class="library-member-doc-line">   </div><div class="library-member-doc-line">    ;; now plot the transformed data, coloring each species a different color</div><div class="library-member-doc-line">    (def plot (scatter-plot x1 x2 </div><div class="library-member-doc-line">                            :group-by (sel iris :cols 4)</div><div class="library-member-doc-line">                            :x-label &quot;PC1&quot; :y-label &quot;PC2&quot; :title &quot;Iris PCA&quot;))</div><div class="library-member-doc-line">    (view plot)</div><div class="library-member-doc-line">    ;; add some text annotations</div><div class="library-member-doc-line">    (add-text plot -2.5 -6.5 &quot;Setosa&quot;)</div><div class="library-member-doc-line">    (add-text plot -5 -5.5 &quot;Versicolor&quot;) </div><div class="library-member-doc-line">    (add-text plot -8 -5.5 &quot;Virginica&quot;)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-add-text&apos;)" id="linkto-membersource-incanter.charts-add-text">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-add-text"><pre>(defn add-text
&quot; Adds a text annotation centered at the given coordinates.

  Arguments:
    chart -- the chart to annotate
    x, y -- the coordinates to center the text
    text -- the text to add


  Examples:

    ;; PCA chart example
    (use &apos;(incanter core stats charts datasets))
    ;; load the iris dataset
    (def iris (to-matrix (get-dataset :iris)))
    ;; run the pca
    (def pca (principal-components (sel iris :cols (range 4))))
    ;; extract the first two principal components
    (def pc1 (sel (:rotation pca) :cols 0))
    (def pc2 (sel (:rotation pca) :cols 1))

    ;; project the first four dimension of the iris data onto the first
    ;; two principal components
    (def x1 (mmult (sel iris :cols (range 4)) pc1)) 
    (def x2 (mmult (sel iris :cols (range 4)) pc2)) 
   
    ;; now plot the transformed data, coloring each species a different color
    (def plot (scatter-plot x1 x2 
                            :group-by (sel iris :cols 4)
                            :x-label \&quot;PC1\&quot; :y-label \&quot;PC2\&quot; :title \&quot;Iris PCA\&quot;))
    (view plot)
    ;; add some text annotations
    (add-text plot -2.5 -6.5 \&quot;Setosa\&quot;)
    (add-text plot -5 -5.5 \&quot;Versicolor\&quot;) 
    (add-text plot -8 -5.5 \&quot;Virginica\&quot;)


&quot;
  ([chart x y text &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          anno (XYTextAnnotation. text x y)]
      (.addAnnotation (.getPlot chart) anno))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-bar-chart"/><dl class="library-member-table"><dt class="library-member-name">bar-chart</dt><dd><div class="library-member-info"><span class="library-member-type">macro</span> <span class="library-member-arglists">([categories values &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a JFreeChart object representing a bar-chart of the given data.</div><div class="library-member-doc-line">  Use the &apos;view&apos; function to display the chart, or the &apos;save&apos; function</div><div class="library-member-doc-line">  to write it to a file.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Arguments:</div><div class="library-member-doc-line">    categories -- a sequence of categories</div><div class="library-member-doc-line">    values -- a sequence of numeric values</div><div class="library-member-doc-line">  </div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :title (default &apos;Histogram&apos;) main title</div><div class="library-member-doc-line">    :x-label (default &apos;Categories&apos;)</div><div class="library-member-doc-line">    :y-label (default &apos;Value&apos;)</div><div class="library-member-doc-line">    :legend (default false) prints legend</div><div class="library-member-doc-line">    :vertical (default true) the orientation of the plot</div><div class="library-member-doc-line">    :group-by (default nil) -- a vector of values used to group the values into </div><div class="library-member-doc-line">                               series within each category.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also:</div><div class="library-member-doc-line">    view and save</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core stats charts datasets))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def data (get-dataset :co2))</div><div class="library-member-doc-line">    (def grass-type (sel data :cols 1))</div><div class="library-member-doc-line">    (def treatment-type (sel data :cols 2))</div><div class="library-member-doc-line">    (def uptake (sel data :cols 4))</div><div class="library-member-doc-line">    (view (bar-chart grass-type uptake </div><div class="library-member-doc-line">                    :title &quot;CO2 Uptake&quot;</div><div class="library-member-doc-line">                    :group-by treatment-type </div><div class="library-member-doc-line">                    :x-label &quot;Grass Types&quot; :y-label &quot;Uptake&quot; </div><div class="library-member-doc-line">                    :legend true))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def data (get-dataset :airline-passengers))</div><div class="library-member-doc-line">    (def years (sel data :cols 0))</div><div class="library-member-doc-line">    (def months (sel data :cols 2))</div><div class="library-member-doc-line">    (def passengers (sel data :cols 1))</div><div class="library-member-doc-line">    (view (bar-chart years passengers :group-by months :legend true))</div><div class="library-member-doc-line">    (view (bar-chart months passengers :group-by years :legend true))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def data (get-dataset :austres))</div><div class="library-member-doc-line">    (view data)</div><div class="library-member-doc-line">    (def plot (bar-chart (sel data :cols 0) (sel data :cols 1) </div><div class="library-member-doc-line">                         :group-by (sel data :cols 2) :legend true))</div><div class="library-member-doc-line">    (view plot)</div><div class="library-member-doc-line">    (save plot &quot;/tmp/austres_plot.png&quot; :width 1000)</div><div class="library-member-doc-line">    (view &quot;file:///tmp/austres_plot.png&quot;)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def seasons (mapcat identity (repeat 3 [&quot;winter&quot; &quot;spring&quot; &quot;summer&quot; &quot;fall&quot;])))</div><div class="library-member-doc-line">    (def years (mapcat identity (repeat 4 [2007 2008 2009])))</div><div class="library-member-doc-line">    (def values (sample-uniform 12 :integers true :max 100))</div><div class="library-member-doc-line">    (view (bar-chart years values :group-by seasons :legend true))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (view (bar-chart [&quot;a&quot; &quot;b&quot; &quot;c&quot;] [10 20 30]))</div><div class="library-member-doc-line">    (view (bar-chart [&quot;a&quot; &quot;a&quot; &quot;b&quot; &quot;b&quot; &quot;c&quot; &quot;c&quot; ] [10 20 30 10 40 20]</div><div class="library-member-doc-line">                     :legend true </div><div class="library-member-doc-line">                     :group-by [&quot;I&quot; &quot;II&quot; &quot;I&quot; &quot;II&quot; &quot;I&quot; &quot;II&quot;]))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (view (bar-chart (sample &quot;abcdefghij&quot; :size 10 :replacement true) </div><div class="library-member-doc-line">                     (sample-uniform 10 :max 50) :legend true))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">           </div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-bar-chart&apos;)" id="linkto-membersource-incanter.charts-bar-chart">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-bar-chart"><pre>(defmacro bar-chart 
&quot; Returns a JFreeChart object representing a bar-chart of the given data.
  Use the &apos;view&apos; function to display the chart, or the &apos;save&apos; function
  to write it to a file.

  Arguments:
    categories -- a sequence of categories
    values -- a sequence of numeric values
  
  Options:
    :title (default &apos;Histogram&apos;) main title
    :x-label (default &apos;Categories&apos;)
    :y-label (default &apos;Value&apos;)
    :legend (default false) prints legend
    :vertical (default true) the orientation of the plot
    :group-by (default nil) -- a vector of values used to group the values into 
                               series within each category.


  See also:
    view and save

  Examples:


    (use &apos;(incanter core stats charts datasets))

    (def data (get-dataset :co2))
    (def grass-type (sel data :cols 1))
    (def treatment-type (sel data :cols 2))
    (def uptake (sel data :cols 4))
    (view (bar-chart grass-type uptake 
                    :title \&quot;CO2 Uptake\&quot;
                    :group-by treatment-type 
                    :x-label \&quot;Grass Types\&quot; :y-label \&quot;Uptake\&quot; 
                    :legend true))


    (def data (get-dataset :airline-passengers))
    (def years (sel data :cols 0))
    (def months (sel data :cols 2))
    (def passengers (sel data :cols 1))
    (view (bar-chart years passengers :group-by months :legend true))
    (view (bar-chart months passengers :group-by years :legend true))


    (def data (get-dataset :austres))
    (view data)
    (def plot (bar-chart (sel data :cols 0) (sel data :cols 1) 
                         :group-by (sel data :cols 2) :legend true))
    (view plot)
    (save plot \&quot;/tmp/austres_plot.png\&quot; :width 1000)
    (view \&quot;file:///tmp/austres_plot.png\&quot;)


    (def seasons (mapcat identity (repeat 3 [\&quot;winter\&quot; \&quot;spring\&quot; \&quot;summer\&quot; \&quot;fall\&quot;])))
    (def years (mapcat identity (repeat 4 [2007 2008 2009])))
    (def values (sample-uniform 12 :integers true :max 100))
    (view (bar-chart years values :group-by seasons :legend true))

    (view (bar-chart [\&quot;a\&quot; \&quot;b\&quot; \&quot;c\&quot;] [10 20 30]))
    (view (bar-chart [\&quot;a\&quot; \&quot;a\&quot; \&quot;b\&quot; \&quot;b\&quot; \&quot;c\&quot; \&quot;c\&quot; ] [10 20 30 10 40 20]
                     :legend true 
                     :group-by [\&quot;I\&quot; \&quot;II\&quot; \&quot;I\&quot; \&quot;II\&quot; \&quot;I\&quot; \&quot;II\&quot;]))

    (view (bar-chart (sample \&quot;abcdefghij\&quot; :size 10 :replacement true) 
                     (sample-uniform 10 :max 50) :legend true))


           
  References:
    http://www.jfree.org/jfreechart/api/javadoc/
    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html
    
&quot;
  ([categories values &amp; options]
    `(let [opts# (if &apos;~options (assoc {} ~@options))
           values# (if (matrix? ~values) (to-list ~values) ~values)
           main-title# (if (:title opts#) (:title opts#) &quot;Bar Chart&quot;)
           group-by# (when (:group-by opts#) (:group-by opts#))
           x-label# (if (:x-label opts#) (:x-label opts#) &quot;Categories&quot;)
           y-label# (if (:y-label opts#) (:y-label opts#) &quot;Value&quot;)
           vertical?# (if (false? (:vertical opts#)) (:vertical opts#) true)
           legend?# (true? (:legend opts#))
           dataset# (DefaultCategoryDataset.)
           chart# (org.jfree.chart.ChartFactory/createBarChart
                     main-title#
                     x-label#
                     y-label#
                     dataset# 
                     (if vertical?# 
                       org.jfree.chart.plot.PlotOrientation/VERTICAL
                       org.jfree.chart.plot.PlotOrientation/HORIZONTAL)
                     legend?#
                     true
                     false)]
        (do
          (doseq [i# (range 0 (count values#))] (.addValue dataset# 
                                                      (nth values# i#) 
                                                      (if group-by#
                                                        (nth group-by# i#)
                                                        (str &apos;~values))
                                                       (nth ~categories i#)))
          chart#))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-bland-altman-plot"/><dl class="library-member-table"><dt class="library-member-name">bland-altman-plot</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x1 x2])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core datasets charts))</div><div class="library-member-doc-line">    (def flow-meter (to-matrix (get-dataset :flow-meter)))</div><div class="library-member-doc-line">    (def x1 (sel flow-meter :cols 1))</div><div class="library-member-doc-line">    (def x2 (sel flow-meter :cols 3))</div><div class="library-member-doc-line">    (view (bland-altman-plot x1 x2))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Bland-Altman_plot</div><div class="library-member-doc-line">    http://www-users.york.ac.uk/~mb55/meas/ba.htm</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-bland-altman-plot&apos;)" id="linkto-membersource-incanter.charts-bland-altman-plot">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-bland-altman-plot"><pre>(defn bland-altman-plot
&quot;...&quot;
  ([x1 x2]
      (let [plot (scatter-plot (div (plus x1 x2) 2) (minus x1 x2) 
                               :title &quot;Bland Altman Plot&quot;
                               :legend false)
            x-axis (div (plus x1 x2) 2)
            y-axis (minus x1 x2)
            min-x (reduce min x-axis)
            max-x (reduce max x-axis)
            x (range min-x max-x (/ (- max-x min-x) 100))
            y-sd (* (sd y-axis) 2)]
        (do
          (add-lines plot x (repeat (count x) 0) :series-label &quot;mean&quot;)
          (add-lines plot x (repeat (count x) y-sd) :series-label &quot;mean + sd&quot;)
          (add-lines plot x (repeat (count x) (- 0 y-sd)) :series-label &quot;mean - sd&quot;)
          plot))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-box-plot"/><dl class="library-member-table"><dt class="library-member-name">box-plot</dt><dd><div class="library-member-info"><span class="library-member-type">macro</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a JFreeChart object representing a box-plot of the given data.</div><div class="library-member-doc-line">  Use the &apos;view&apos; function to display the chart, or the &apos;save&apos; function</div><div class="library-member-doc-line">  to write it to a file.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :title (default &apos;Histogram&apos;) main title</div><div class="library-member-doc-line">    :x-label (default x expression)</div><div class="library-member-doc-line">    :y-label (default &apos;Frequency&apos;)</div><div class="library-member-doc-line">    :legend (default false) prints legend</div><div class="library-member-doc-line">    :series-label (default x expression)</div><div class="library-member-doc-line">    :group-by (default nil) -- a vector of values used to group the x values into series.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also:</div><div class="library-member-doc-line">    view and save</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core stats charts))</div><div class="library-member-doc-line">    (def gamma-box-plot (box-plot (sample-gamma 1000 :shape 1 :rate 2) </div><div class="library-member-doc-line">                          :title &quot;Gamma Boxplot&quot;</div><div class="library-member-doc-line">                          :legend true)) </div><div class="library-member-doc-line">    (view gamma-box-plot)</div><div class="library-member-doc-line">    (add-box-plot gamma-box-plot (sample-gamma 1000 :shape 2 :rate 2))</div><div class="library-member-doc-line">    (add-box-plot gamma-box-plot (sample-gamma 1000 :shape 3 :rate 2))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; use the group-by options</div><div class="library-member-doc-line">    (use &apos;(incanter core stats datasets charts))</div><div class="library-member-doc-line">    (def iris (to-matrix (get-dataset :iris))) </div><div class="library-member-doc-line">    (view (box-plot (sel iris :cols 0) :group-by (sel iris :cols 4) :legend true))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; see INCANTER_HOME/examples/probability_plots.clj for more examples of plots</div><div class="library-member-doc-line">           </div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-box-plot&apos;)" id="linkto-membersource-incanter.charts-box-plot">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-box-plot"><pre>(defmacro box-plot 
&quot; Returns a JFreeChart object representing a box-plot of the given data.
  Use the &apos;view&apos; function to display the chart, or the &apos;save&apos; function
  to write it to a file.

  Options:
    :title (default &apos;Histogram&apos;) main title
    :x-label (default x expression)
    :y-label (default &apos;Frequency&apos;)
    :legend (default false) prints legend
    :series-label (default x expression)
    :group-by (default nil) -- a vector of values used to group the x values into series.

  See also:
    view and save

  Examples:

    (use &apos;(incanter core stats charts))
    (def gamma-box-plot (box-plot (sample-gamma 1000 :shape 1 :rate 2) 
                          :title \&quot;Gamma Boxplot\&quot;
                          :legend true)) 
    (view gamma-box-plot)
    (add-box-plot gamma-box-plot (sample-gamma 1000 :shape 2 :rate 2))
    (add-box-plot gamma-box-plot (sample-gamma 1000 :shape 3 :rate 2))

    ;; use the group-by options
    (use &apos;(incanter core stats datasets charts))
    (def iris (to-matrix (get-dataset :iris))) 
    (view (box-plot (sel iris :cols 0) :group-by (sel iris :cols 4) :legend true))

    ;; see INCANTER_HOME/examples/probability_plots.clj for more examples of plots
           
  References:
    http://www.jfree.org/jfreechart/api/javadoc/
    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html
    
&quot;
  ([x &amp; options]
    `(let [opts# (if &apos;~options (assoc {} ~@options))
           _x# (if (matrix? ~x) (to-list ~x) ~x)
           group-by# (when (:group-by opts#) (if (matrix? (:group-by opts#)) (to-list (:group-by opts#)) (:group-by opts#)))
           x-groups# (when group-by# (map to-list (group-by (bind-columns _x# group-by#) 1 :cols 0)))
           ;x-groups# (when (:group-by opts#) (map to-list (group-by (bind-columns _x# (:group-by opts#)) 1 :cols 0)))
           x# (if x-groups# (first x-groups#) _x#)
           main-title# (if (:title opts#) (:title opts#) &quot;Boxplot&quot;)
           ;x-label# (if (:x-label opts#) (:x-label opts#) (str &apos;~x))
           x-label# (if (:x-label opts#) (:x-label opts#) &quot;&quot;)
           y-label# (if (:y-label opts#) (:y-label opts#) &quot;Values&quot;)
           series-label# (if (:series-label opts#) (:series-label opts#) (if x-groups# (str &apos;~x 0) (str &apos;~x)))
           category-label# (if (:category-label opts#) (:category-label opts#) 0)
           ;category-label# (if (:category-label opts#) (:category-label opts#) (str &apos;~x))
           legend?# (true? (:legend opts#))
           dataset# (DefaultBoxAndWhiskerCategoryDataset.)
           chart# (org.jfree.chart.ChartFactory/createBoxAndWhiskerChart 
                     main-title#
                     x-label#
                     y-label#
                     dataset# 
                     legend?#)]
        (do
          (.. chart# getCategoryPlot getRenderer (setMaximumBarWidth 0.25))
          (.add dataset# x# series-label# category-label#)
          (when-not (empty? (rest x-groups#))
            ;(doseq [g# (rest x-groups#)] (add-box-plot chart# g#)))
            (doseq [i# (range 1 (count x-groups#))] (.add dataset# (nth x-groups# i#) (str &apos;~x i#) i#)))
          chart#))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-clear-background"/><dl class="library-member-table"><dt class="library-member-name">clear-background</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([chart])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Sets the alpha level (transparancy) of the plot&apos;s background to zero, </div><div class="library-member-doc-line">  removing the default grid, returns the modified chart object.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-clear-background&apos;)" id="linkto-membersource-incanter.charts-clear-background">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-clear-background"><pre>(defn clear-background 
&quot; Sets the alpha level (transparancy) of the plot&apos;s background to zero, ...&quot;
  ([chart] 
    (.setBackgroundAlpha (.getPlot chart) 0.0)
    chart))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-function-plot"/><dl class="library-member-table"><dt class="library-member-name">function-plot</dt><dd><div class="library-member-info"><span class="library-member-type">macro</span> <span class="library-member-arglists">([function min-range max-range &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a xy-plot object of the given function over the range indicated </div><div class="library-member-doc-line">  by the min-range and max-range arguments. Use the &apos;view&apos; function to </div><div class="library-member-doc-line">  display the chart, or the &apos;save&apos; function to write it to a file.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :title (default &apos;Histogram&apos;) main title</div><div class="library-member-doc-line">    :x-label (default x expression)</div><div class="library-member-doc-line">    :y-label (default &apos;Frequency&apos;)</div><div class="library-member-doc-line">    :legend (default false) prints legend</div><div class="library-member-doc-line">    :series-label (default x expression)</div><div class="library-member-doc-line">    :step-size (default (/ (- max-range min-range) 500))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also:</div><div class="library-member-doc-line">    view, save, add-points, add-lines</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core stats charts))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (view (function-plot sin (- Math/PI) Math/PI))</div><div class="library-member-doc-line">    (view (function-plot pdf-normal -3 3))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (defn cubic [x] (+ (* x x x) (* 2 x x) (* 2 x) 3))</div><div class="library-member-doc-line">    (view (function-plot cubic -10 10))</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-function-plot&apos;)" id="linkto-membersource-incanter.charts-function-plot">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-function-plot"><pre>(defmacro function-plot
&quot; Returns a xy-plot object of the given function over the range indicated ...&quot;
  ([function min-range max-range &amp; options]
   `(let [opts# (if &apos;~options (assoc {} ~@options))
          step-size# (if (:step-size opts#) (:step-size opts#) (float (/ (- ~max-range ~min-range) 500)))
          x# (range ~min-range ~max-range step-size#)
          main-title# (if (:title opts#) (:title opts#) &quot;Function Plot&quot;)
          x-lab# (if (:x-label opts#) (:x-label opts#) (format &quot;%s &lt; x &lt; %s&quot; &apos;~min-range &apos;~max-range))
          y-lab# (if (:y-label opts#) (:y-label opts#) (str &apos;~function))
          series-lab# (if (:series-label opts#) (:series-label opts#) (format &quot;%s&quot; &apos;~function))
          legend?# (true? (:legend opts#))]
      (xy-plot x# (map ~function x#) 
                 :x-label x-lab# 
                 :y-label y-lab# 
                 :title main-title# 
                 :series-label series-lab# 
                 :legend legend?#))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-histogram"/><dl class="library-member-table"><dt class="library-member-name">histogram</dt><dd><div class="library-member-info"><span class="library-member-type">macro</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a JFreeChart object representing the histogram of the given data.</div><div class="library-member-doc-line">  Use the &apos;view&apos; function to display the chart, or the &apos;save&apos; function</div><div class="library-member-doc-line">  to write it to a file.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :nbins (default 10) number of bins</div><div class="library-member-doc-line">    :density (default false) if false, plots frequency, otherwise density</div><div class="library-member-doc-line">    :title (default &apos;Histogram&apos;) main title</div><div class="library-member-doc-line">    :x-label (default x expression)</div><div class="library-member-doc-line">    :y-label (default &apos;Frequency&apos;)</div><div class="library-member-doc-line">    :legend (default false) prints legend</div><div class="library-member-doc-line">    :series-label (default x expression)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also:</div><div class="library-member-doc-line">    view, save, add-histogram</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core charts stats))</div><div class="library-member-doc-line">    (view (histogram (sample-normal 1000)))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    # plot a density histogram</div><div class="library-member-doc-line">    (def hist (histogram (sample-normal 1000) :density true))</div><div class="library-member-doc-line">    (view hist)</div><div class="library-member-doc-line">    # add a normal density line to the plot</div><div class="library-member-doc-line">    (def x (range -4 4 0.01))</div><div class="library-member-doc-line">    (add-lines hist x (pdf-normal x))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    # plot some gamma data</div><div class="library-member-doc-line">    (def gam-hist (histogram (sample-gamma 1000) :density true :nbins 30))</div><div class="library-member-doc-line">    (view gam-hist) </div><div class="library-member-doc-line">    (def x (range 0 8 0.01))</div><div class="library-member-doc-line">    (add-lines gam-hist x (pdf-gamma x))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; see INCANTER_HOME/examples/probability_plots.clj for more examples of plots</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-histogram&apos;)" id="linkto-membersource-incanter.charts-histogram">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-histogram"><pre>(defmacro histogram 
&quot; Returns a JFreeChart object representing the histogram of the given data....&quot;
  ([x &amp; options]
    `(let [opts# (if &apos;~options (assoc {} ~@options) nil)
          data# (if (matrix? ~x) (to-list ~x) ~x)
          nbins# (if (:nbins opts#) (:nbins opts#) 10)
          density?# (true? (:density opts#))
          main-title# (if (:title opts#) (:title opts#) &quot;Histogram&quot;)
          x-lab# (if (:x-label opts#) (:x-label opts#) (str &apos;~x))
          y-lab# (if (:y-label opts#) (:y-label opts#) 
                   (if density?# &quot;Density&quot; &quot;Frequency&quot;))
          series-lab# (if (:series-label opts#) (:series-label opts#) (str &apos;~x))
          legend?# (true? (:legend opts#))
          dataset# (HistogramDataset.)
        ]
      (do
        (.addSeries dataset# series-lab# (double-array data#) nbins#)
        (when density?# (.setType dataset# org.jfree.data.statistics.HistogramType/SCALE_AREA_TO_1))
        (org.jfree.chart.ChartFactory/createHistogram 
            main-title#
            x-lab#
            y-lab#
            dataset# 
            org.jfree.chart.plot.PlotOrientation/VERTICAL 
            legend?# ; no legend 
            true  ; tooltips
            false)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-line-chart"/><dl class="library-member-table"><dt class="library-member-name">line-chart</dt><dd><div class="library-member-info"><span class="library-member-type">macro</span> <span class="library-member-arglists">([categories values &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a JFreeChart object representing a line-chart of the given values and categories.</div><div class="library-member-doc-line">  Use the &apos;view&apos; function to display the chart, or the &apos;save&apos; function</div><div class="library-member-doc-line">  to write it to a file.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Arguments:</div><div class="library-member-doc-line">    categories -- a sequence of categories</div><div class="library-member-doc-line">    values -- a sequence of numeric values</div><div class="library-member-doc-line">  </div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :title (default &apos;Histogram&apos;) main title</div><div class="library-member-doc-line">    :x-label (default &apos;Categories&apos;)</div><div class="library-member-doc-line">    :y-label (default &apos;Value&apos;)</div><div class="library-member-doc-line">    :legend (default false) prints legend</div><div class="library-member-doc-line">    :group-by (default nil) -- a vector of values used to group the values into </div><div class="library-member-doc-line">                               series within each category.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also:</div><div class="library-member-doc-line">    view and save</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core stats charts datasets))</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    (def data (get-dataset :airline-passengers))</div><div class="library-member-doc-line">    (def years (sel data :cols 0))</div><div class="library-member-doc-line">    (def months (sel data :cols 2))</div><div class="library-member-doc-line">    (def passengers (sel data :cols 1))</div><div class="library-member-doc-line">    (view (line-chart years passengers :group-by months :legend true))</div><div class="library-member-doc-line">    (view (line-chart months passengers :group-by years :legend true))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def seasons (mapcat identity (repeat 3 [&quot;winter&quot; &quot;spring&quot; &quot;summer&quot; &quot;fall&quot;])))</div><div class="library-member-doc-line">    (def years (mapcat identity (repeat 4 [2007 2008 2009])))</div><div class="library-member-doc-line">    (def x (sample-uniform 12 :integers true :max 100))</div><div class="library-member-doc-line">    (view (line-chart years x :group-by seasons :legend true))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (view (line-chart [&quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot;] [10 20 30 10 40 20]))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (view (line-chart (sample &quot;abcdefghij&quot; :size 10 :replacement true)  </div><div class="library-member-doc-line">                         (sample-uniform 10 :max 50) :legend true))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">           </div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-line-chart&apos;)" id="linkto-membersource-incanter.charts-line-chart">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-line-chart"><pre>(defmacro line-chart 
&quot; Returns a JFreeChart object representing a line-chart of the given values and categories.
  Use the &apos;view&apos; function to display the chart, or the &apos;save&apos; function
  to write it to a file.

  Arguments:
    categories -- a sequence of categories
    values -- a sequence of numeric values
  
  Options:
    :title (default &apos;Histogram&apos;) main title
    :x-label (default &apos;Categories&apos;)
    :y-label (default &apos;Value&apos;)
    :legend (default false) prints legend
    :group-by (default nil) -- a vector of values used to group the values into 
                               series within each category.


  See also:
    view and save

  Examples:

    (use &apos;(incanter core stats charts datasets))
    
    (def data (get-dataset :airline-passengers))
    (def years (sel data :cols 0))
    (def months (sel data :cols 2))
    (def passengers (sel data :cols 1))
    (view (line-chart years passengers :group-by months :legend true))
    (view (line-chart months passengers :group-by years :legend true))


    (def seasons (mapcat identity (repeat 3 [\&quot;winter\&quot; \&quot;spring\&quot; \&quot;summer\&quot; \&quot;fall\&quot;])))
    (def years (mapcat identity (repeat 4 [2007 2008 2009])))
    (def x (sample-uniform 12 :integers true :max 100))
    (view (line-chart years x :group-by seasons :legend true))

    (view (line-chart [\&quot;a\&quot; \&quot;b\&quot; \&quot;c\&quot; \&quot;d\&quot; \&quot;e\&quot; \&quot;f\&quot;] [10 20 30 10 40 20]))

    (view (line-chart (sample \&quot;abcdefghij\&quot; :size 10 :replacement true)  
                         (sample-uniform 10 :max 50) :legend true))


           
  References:
    http://www.jfree.org/jfreechart/api/javadoc/
    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html
    
&quot;
  ([categories values &amp; options]
    `(let [opts# (if &apos;~options (assoc {} ~@options))
           values# (if (matrix? ~values) (to-list ~values) ~values)
           main-title# (if (:title opts#) (:title opts#) &quot;Line Chart&quot;)
           group-by# (when (:group-by opts#) (:group-by opts#))
           x-label# (if (:x-label opts#) (:x-label opts#) &quot;Categories&quot;)
           y-label# (if (:y-label opts#) (:y-label opts#) &quot;Value&quot;)
           vertical?# (if (false? (:vertical opts#)) (:vertical opts#) true)
           legend?# (true? (:legend opts#))
           dataset# (DefaultCategoryDataset.)
           chart# (org.jfree.chart.ChartFactory/createLineChart
                     main-title#
                     x-label#
                     y-label#
                     dataset# 
                     (if vertical?# 
                       org.jfree.chart.plot.PlotOrientation/VERTICAL
                       org.jfree.chart.plot.PlotOrientation/HORIZONTAL)
                     legend?#
                     true
                     false)]
        (do
          (doseq [i# (range 0 (count values#))] (.addValue dataset# 
                                                      (nth values# i#) 
                                                      (if group-by#
                                                        (nth group-by# i#)
                                                        (str &apos;~values))
                                                       (nth ~categories i#)))
          chart#))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-line-plot"/><dl class="library-member-table"><dt class="library-member-name">line-plot</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x y &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line">WARNING: line-plot has been renamed xy-plot.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-line-plot&apos;)" id="linkto-membersource-incanter.charts-line-plot">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-line-plot"><pre>(defn line-plot 
  &quot;WARNING: line-plot has been renamed xy-plot.&quot;
  ([x y &amp; options] (throw (Exception. &quot;line-plot has been renamed xy-plot&quot;))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-qq-plot"/><dl class="library-member-table"><dt class="library-member-name">qq-plot</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns a QQ-Plot object. Use the &apos;view&apos; function to display it.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/QQ_plot</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    (use &apos;(incanter core stats charts))</div><div class="library-member-doc-line">    (view (qq-plot (sample-normal 100)))</div><div class="library-member-doc-line">    (view (qq-plot (sample-exp 100)))</div><div class="library-member-doc-line">    (view (qq-plot (sample-gamma 100)))</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-qq-plot&apos;)" id="linkto-membersource-incanter.charts-qq-plot">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-qq-plot"><pre>(defn qq-plot
&quot;...&quot;
  ([x &amp; options]
   (let [n (count x)
         quants (for [k (range 1 n)] (/ k (inc n)))
         norm-quants (quantile-normal quants)
         y (quantile x :probs quants)]
         (scatter-plot norm-quants y 
                   :title &quot;QQ-Plot&quot;
                   :x-label &quot;Normal theoretical quantiles&quot;
                   :y-label &quot;Data quantiles&quot;
                   :series-label &quot;Theoretical Normal&quot;))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-scatter-plot"/><dl class="library-member-table"><dt class="library-member-name">scatter-plot</dt><dd><div class="library-member-info"><span class="library-member-type">macro</span> <span class="library-member-arglists">([x y &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a JFreeChart object representing a scatter-plot of the given data.</div><div class="library-member-doc-line">  Use the &apos;view&apos; function to display the chart, or the &apos;save&apos; function</div><div class="library-member-doc-line">  to write it to a file.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :title (default &apos;Histogram&apos;) main title</div><div class="library-member-doc-line">    :x-label (default x expression)</div><div class="library-member-doc-line">    :y-label (default &apos;Frequency&apos;)</div><div class="library-member-doc-line">    :legend (default false) prints legend</div><div class="library-member-doc-line">    :series-label (default x expression)</div><div class="library-member-doc-line">    :group-by (default nil) -- a vector of values used to group the x and y values into series.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also:</div><div class="library-member-doc-line">    view, save, add-points, add-lines</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core stats charts))</div><div class="library-member-doc-line">    ;; create some data</div><div class="library-member-doc-line">    (def mvn-samp (sample-multivariate-normal 1000 :mean [7 5] :sigma (matrix [[2 1.5] [1.5 3]])))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; create scatter-plot of points</div><div class="library-member-doc-line">    (def mvn-plot (scatter-plot (sel mvn-samp :cols 0) (sel mvn-samp :cols 1)))</div><div class="library-member-doc-line">    (view mvn-plot)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; add regression line to scatter plot</div><div class="library-member-doc-line">    (def x (sel mvn-samp :cols 0))</div><div class="library-member-doc-line">    (def y (sel mvn-samp :cols 1))</div><div class="library-member-doc-line">    (def lm (linear-model y x))</div><div class="library-member-doc-line">    (add-lines mvn-plot x (:fitted lm))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; use :group-by option</div><div class="library-member-doc-line">    (use &apos;(incanter core stats datasets charts))</div><div class="library-member-doc-line">    ;; load the :iris dataset</div><div class="library-member-doc-line">    (def iris (to-matrix (get-dataset :iris)))</div><div class="library-member-doc-line">    ;; plot the first two columns grouped by the fifth column</div><div class="library-member-doc-line">    (view (scatter-plot (sel iris :cols 0) (sel iris :cols 1) :group-by (sel iris :cols 4)))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  </div><div class="library-member-doc-line">    ;; see INCANTER_HOME/examples/probability_plots.clj for more examples of plots</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-scatter-plot&apos;)" id="linkto-membersource-incanter.charts-scatter-plot">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-scatter-plot"><pre>(defmacro scatter-plot 
&quot; Returns a JFreeChart object representing a scatter-plot of the given data....&quot;
  ([x y &amp; options]
    `(let [opts# (if &apos;~options (assoc {} ~@options))
           _x# (if (matrix? ~x) (to-list ~x) ~x)
           _y# (if (matrix? ~y) (to-list ~y) ~y)
           group-by# (when (:group-by opts#) (if (matrix? (:group-by opts#)) (to-list (:group-by opts#)) (:group-by opts#)))
           x-groups# (when group-by# (group-by (bind-columns _x# group-by#) 1 :cols 0))
           y-groups# (when group-by# (group-by (bind-columns _y# group-by#) 1 :cols 0))
           ;x-groups# (when (:group-by opts#) (group-by (bind-columns _x# (:group-by opts#)) 1 :cols 0))
           ;y-groups# (when (:group-by opts#) (group-by (bind-columns _y# (:group-by opts#)) 1 :cols 0))
           x# (if x-groups# (first x-groups#) _x#)
           y# (if y-groups# (first y-groups#) _y#)
           main-title# (if (:title opts#) (:title opts#) &quot;Scatter Plot&quot;)
           x-lab# (if (:x-label opts#) (:x-label opts#) (str &apos;~x))
           y-lab# (if (:y-label opts#) (:y-label opts#) (str &apos;~y))
           series-lab# (if (:series-label opts#) (:series-label opts#) (if x-groups# (format &quot;%s, %s (0)&quot; &apos;~x &apos;~y) (format &quot;%s, %s&quot; &apos;~x &apos;~y)))
           legend?# (true? (:legend opts#))
           data-series# (XYSeries. series-lab#)
           dataset# (XYSeriesCollection.)
           chart# (do
                    (doseq [i# (range (count x#))] (.add data-series# (nth x# i#)  (nth y# i#)))
                    (.addSeries dataset# data-series#)
                    (org.jfree.chart.ChartFactory/createScatterPlot 
                        main-title#
                        x-lab#
                        y-lab#
                        dataset# 
                        org.jfree.chart.plot.PlotOrientation/VERTICAL 
                        legend?# 
                        true  ; tooltips
                        false))
           _# (when x-groups#
                (doseq [i# (range 1 (count x-groups#))] 
                  (add-points chart# (nth x-groups# i#) 
                              (nth y-groups# i#)
                              :series-label (format &quot;%s, %s (%s)&quot; &apos;~x &apos;~y i#))))]
        chart#)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-set-alpha"/><dl class="library-member-table"><dt class="library-member-name">set-alpha</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([chart alpha])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Sets the alpha level (transparancy) of the plot&apos;s foreground, </div><div class="library-member-doc-line">  returns the modified chart object.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-set-alpha&apos;)" id="linkto-membersource-incanter.charts-set-alpha">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-set-alpha"><pre>(defn set-alpha 
&quot; Sets the alpha level (transparancy) of the plot&apos;s foreground, ...&quot;
  ([chart alpha] 
    (.setForegroundAlpha (.getPlot chart) alpha)
    chart))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-set-background-alpha"/><dl class="library-member-table"><dt class="library-member-name">set-background-alpha</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([chart alpha])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Sets the alpha level (transparancy) of the plot&apos;s background, </div><div class="library-member-doc-line">  returns the modified chart object.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-set-background-alpha&apos;)" id="linkto-membersource-incanter.charts-set-background-alpha">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-set-background-alpha"><pre>(defn set-background-alpha 
&quot; Sets the alpha level (transparancy) of the plot&apos;s background, ...&quot;
  ([chart alpha] 
    (.setBackgroundAlpha (.getPlot chart) alpha)
    chart))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-set-title"/><dl class="library-member-table"><dt class="library-member-name">set-title</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([chart title])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Sets the main title of the plot, returns the modified chart object.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-set-title&apos;)" id="linkto-membersource-incanter.charts-set-title">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-set-title"><pre>(defn set-title 
&quot; Sets the main title of the plot, returns the modified chart object....&quot;
  ([chart title] 
    (.setTitle chart title)
    chart))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-set-x-label"/><dl class="library-member-table"><dt class="library-member-name">set-x-label</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([chart label])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Sets the label of the x-axis, returns the modified chart object.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-set-x-label&apos;)" id="linkto-membersource-incanter.charts-set-x-label">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-set-x-label"><pre>(defn set-x-label 
&quot; Sets the label of the x-axis, returns the modified chart object....&quot;
  ([chart label] 
    (.setLabel (.getDomainAxis (.getPlot chart)) label)
    chart))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-set-y-label"/><dl class="library-member-table"><dt class="library-member-name">set-y-label</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([chart label])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Sets the label of the y-axis, returns the modified chart object.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-set-y-label&apos;)" id="linkto-membersource-incanter.charts-set-y-label">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-set-y-label"><pre>(defn set-y-label 
&quot; Sets the label of the y-axis, returns the modified chart object....&quot;
  ([chart label] 
    (.setLabel (.getRangeAxis (.getPlot chart)) label)
    chart))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-trace-plot"/><dl class="library-member-table"><dt class="library-member-name">trace-plot</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a trace-plot object, use the &apos;view&apos; function to display it.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Examples:</div><div class="library-member-doc-line">      (use &apos;(incanter core datasets stats bayes charts))</div><div class="library-member-doc-line">      (def ols-data (to-matrix (get-dataset :survey)))</div><div class="library-member-doc-line">      (def x (sel ols-data (range 0 2313) (range 1 10)))</div><div class="library-member-doc-line">      (def y (sel ols-data (range 0 2313) 10))</div><div class="library-member-doc-line">      (def sample-params (sample-model-params 5000 (linear-model y x :intercept false)))</div><div class="library-member-doc-line">      (view (trace-plot (:var sample-params))) </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (view (trace-plot (sel (:coefs sample-params) :cols 0)))</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-trace-plot&apos;)" id="linkto-membersource-incanter.charts-trace-plot">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-trace-plot"><pre>(defn trace-plot
  &quot; Returns a trace-plot object, use the &apos;view&apos; function to display it....&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          title (if (:title opts) (:title opts) &quot;Trace Plot&quot;)
          x-label (if (:x-label opts) (:x-label opts) &quot;Iteration&quot;)
          y-label (if (:y-label opts) (:y-label opts) &quot;Value&quot;)
          series-lab (if (:series-label opts) (:series-label opts) &quot;Value&quot;)
          ;legend? (if (:series-label opts) (:series-label opts) true)
          n (count x)
          chart (xy-plot (range n) 
                         x ;)]
                         :title title 
                         :x-label x-label 
                         :y-label y-label
                         :series-label series-lab)]
      (do
        (add-lines chart (range n) (cumulative-mean x) :series-label &quot;running mean&quot;)
        (.setSeriesRenderingOrder (.getPlot chart) SeriesRenderingOrder/FORWARD)
        (.setDatasetRenderingOrder (.getPlot chart) DatasetRenderingOrder/FORWARD)
        chart))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.charts-xy-plot"/><dl class="library-member-table"><dt class="library-member-name">xy-plot</dt><dd><div class="library-member-info"><span class="library-member-type">macro</span> <span class="library-member-arglists">([x y &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a JFreeChart object representing a xy-plot of the given data.</div><div class="library-member-doc-line">  Use the &apos;view&apos; function to display the chart, or the &apos;save&apos; function</div><div class="library-member-doc-line">  to write it to a file.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :title (default &apos;Histogram&apos;) main title</div><div class="library-member-doc-line">    :x-label (default x expression)</div><div class="library-member-doc-line">    :y-label (default &apos;Frequency&apos;)</div><div class="library-member-doc-line">    :legend (default false) prints legend</div><div class="library-member-doc-line">    :series-label (default x expression)</div><div class="library-member-doc-line">    :group-by (default nil) -- a vector of values used to group the x and y values into series.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also:</div><div class="library-member-doc-line">    view, save, add-points, add-lines</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core stats charts))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; plot the cosine function</div><div class="library-member-doc-line">    (def x (range -1 5 0.01))  </div><div class="library-member-doc-line">    (def y (cos (mult 2 Math/PI x)))</div><div class="library-member-doc-line">    (view (xy-plot x y))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; plot gamma pdf with different parameters</div><div class="library-member-doc-line">    (def x2 (range 0 20 0.1))</div><div class="library-member-doc-line">    (def gamma-plot (xy-plot x2 (pdf-gamma x2 :shape 1 :rate 2) </div><div class="library-member-doc-line">                               :legend true</div><div class="library-member-doc-line">                               :title &quot;Gamma PDF&quot;</div><div class="library-member-doc-line">                               :y-label &quot;Density&quot;))</div><div class="library-member-doc-line">    (view gamma-plot)</div><div class="library-member-doc-line">    (add-lines gamma-plot x2 (pdf-gamma x2 :shape 2 :rate 2))</div><div class="library-member-doc-line">    (add-lines gamma-plot x2 (pdf-gamma x2 :shape 3 :rate 2))</div><div class="library-member-doc-line">    (add-lines gamma-plot x2 (pdf-gamma x2 :shape 5 :rate 1))</div><div class="library-member-doc-line">    (add-lines gamma-plot x2 (pdf-gamma x2 :shape 9 :rate 0.5))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; use :group-by option</div><div class="library-member-doc-line">    (use &apos;(incanter core charts datasets))</div><div class="library-member-doc-line">    (def data (to-matrix (get-dataset :chick-weight))) </div><div class="library-member-doc-line">    (let [[weight time chick] (trans data)]</div><div class="library-member-doc-line">      (view (xy-plot time weight :group-by chick)))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  </div><div class="library-member-doc-line">    ;; see INCANTER_HOME/examples/probability_plots.clj for more examples of plots</div><div class="library-member-doc-line">                                                </div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/</div><div class="library-member-doc-line">    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.charts-xy-plot&apos;)" id="linkto-membersource-incanter.charts-xy-plot">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.charts-xy-plot"><pre>(defmacro xy-plot 
&quot; Returns a JFreeChart object representing a xy-plot of the given data.
  Use the &apos;view&apos; function to display the chart, or the &apos;save&apos; function
  to write it to a file.

  Options:
    :title (default &apos;Histogram&apos;) main title
    :x-label (default x expression)
    :y-label (default &apos;Frequency&apos;)
    :legend (default false) prints legend
    :series-label (default x expression)
    :group-by (default nil) -- a vector of values used to group the x and y values into series.

  See also:
    view, save, add-points, add-lines

  Examples:

    (use &apos;(incanter core stats charts))

    ;; plot the cosine function
    (def x (range -1 5 0.01))  
    (def y (cos (mult 2 Math/PI x)))
    (view (xy-plot x y))

    ;; plot gamma pdf with different parameters
    (def x2 (range 0 20 0.1))
    (def gamma-plot (xy-plot x2 (pdf-gamma x2 :shape 1 :rate 2) 
                               :legend true
                               :title \&quot;Gamma PDF\&quot;
                               :y-label \&quot;Density\&quot;))
    (view gamma-plot)
    (add-lines gamma-plot x2 (pdf-gamma x2 :shape 2 :rate 2))
    (add-lines gamma-plot x2 (pdf-gamma x2 :shape 3 :rate 2))
    (add-lines gamma-plot x2 (pdf-gamma x2 :shape 5 :rate 1))
    (add-lines gamma-plot x2 (pdf-gamma x2 :shape 9 :rate 0.5))

    ;; use :group-by option
    (use &apos;(incanter core charts datasets))
    (def data (to-matrix (get-dataset :chick-weight))) 
    (let [[weight time chick] (trans data)]
      (view (xy-plot time weight :group-by chick)))

  
    ;; see INCANTER_HOME/examples/probability_plots.clj for more examples of plots
                                                
  References:
    http://www.jfree.org/jfreechart/api/javadoc/
    http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html
    
&quot;
  ([x y &amp; options]
    `(let [opts# (if &apos;~options (assoc {} ~@options))
           _x# (if (matrix? ~x) (to-list ~x) ~x)
           _y# (if (matrix? ~y) (to-list ~y) ~y)
           group-by# (when (:group-by opts#) (if (matrix? (:group-by opts#)) (to-list (:group-by opts#)) (:group-by opts#)))
           x-groups# (when group-by# (group-by (bind-columns _x# group-by#) 1 :cols 0))
           y-groups# (when group-by# (group-by (bind-columns _y# group-by#) 1 :cols 0))
           x# (if x-groups# (first x-groups#) _x#)
           y# (if y-groups# (first y-groups#) _y#)
           main-title# (if (:title opts#) (:title opts#) &quot;XY Plot&quot;)
           x-lab# (if (:x-label opts#) (:x-label opts#) (str &apos;~x))
           y-lab# (if (:y-label opts#) (:y-label opts#) (str &apos;~y))
           series-lab# (if (:series-label opts#) (:series-label opts#) (if x-groups# (format &quot;%s, %s (0)&quot; &apos;~x &apos;~y) (format &quot;%s, %s&quot; &apos;~x &apos;~y)))
           legend?# (true? (:legend opts#))
           data-series# (XYSeries. series-lab#)
           dataset# (XYSeriesCollection.)
           chart# (do
                    (doseq [i# (range (count x#))] (.add data-series# (nth x# i#)  (nth y# i#)))
                    (.addSeries dataset# data-series#)
                    (org.jfree.chart.ChartFactory/createXYLineChart 
                        main-title#
                        x-lab#
                        y-lab#
                        dataset# 
                        org.jfree.chart.plot.PlotOrientation/VERTICAL 
                        legend?# 
                        true  ; tooltips
                        false))
           _# (when x-groups#
                (doseq [i# (range 1 (count x-groups#))] 
                  (add-lines chart# (nth x-groups# i#) 
                             (nth y-groups# i#)
                             :series-label (format &quot;%s, %s (%s)&quot; &apos;~x &apos;~y i#))))]
        chart#)))</pre></div></div></dd></dl></li></ol></div></div><div class="library"><a name="library-incanter.core"/><div class="library-name"><span class="library-contents-toggle">[ <a id="library-contents-toggle-incanter.core" href="javascript:toggle(&apos;library-contents-incanter.core&apos;, &apos;library-contents-toggle-incanter.core&apos;, &apos;-&apos;, &apos;+&apos;)">-</a> ] </span>incanter.core</div><div class="library-contents" id="library-contents-incanter.core"><div class="library-member-links"><a class="lib-member-link" href="#member-incanter.core-abs">abs</a> <a class="lib-member-link" href="#member-incanter.core-acos">acos</a> <a class="lib-member-link" href="#member-incanter.core-asin">asin</a> <a class="lib-member-link" href="#member-incanter.core-atan">atan</a> <a class="lib-member-link" href="#member-incanter.core-beta">beta</a> <a class="lib-member-link" href="#member-incanter.core-bind-columns">bind-columns</a> <a class="lib-member-link" href="#member-incanter.core-bind-rows">bind-rows</a> <a class="lib-member-link" href="#member-incanter.core-categorical-var">categorical-var</a> <a class="lib-member-link" href="#member-incanter.core-choose">choose</a> <a class="lib-member-link" href="#member-incanter.core-condition">condition</a> <a class="lib-member-link" href="#member-incanter.core-copy">copy</a> <a class="lib-member-link" href="#member-incanter.core-cos">cos</a> <a class="lib-member-link" href="#member-incanter.core-cumulative-sum">cumulative-sum</a> <a class="lib-member-link" href="#member-incanter.core-dataset">dataset</a> <a class="lib-member-link" href="#member-incanter.core-dataset?">dataset?</a> <a class="lib-member-link" href="#member-incanter.core-decomp-cholesky">decomp-cholesky</a> <a class="lib-member-link" href="#member-incanter.core-decomp-eigenvalue">decomp-eigenvalue</a> <a class="lib-member-link" href="#member-incanter.core-decomp-lu">decomp-lu</a> <a class="lib-member-link" href="#member-incanter.core-decomp-qr">decomp-qr</a> <a class="lib-member-link" href="#member-incanter.core-decomp-svd">decomp-svd</a> <a class="lib-member-link" href="#member-incanter.core-det">det</a> <a class="lib-member-link" href="#member-incanter.core-diag">diag</a> <a class="lib-member-link" href="#member-incanter.core-div">div</a> <a class="lib-member-link" href="#member-incanter.core-exp">exp</a> <a class="lib-member-link" href="#member-incanter.core-factorial">factorial</a> <a class="lib-member-link" href="#member-incanter.core-gamma">gamma</a> <a class="lib-member-link" href="#member-incanter.core-group-by">group-by</a> <a class="lib-member-link" href="#member-incanter.core-half-vectorize">half-vectorize</a> <a class="lib-member-link" href="#member-incanter.core-identity-matrix">identity-matrix</a> <a class="lib-member-link" href="#member-incanter.core-incomplete-beta">incomplete-beta</a> <a class="lib-member-link" href="#member-incanter.core-length">length</a> <a class="lib-member-link" href="#member-incanter.core-log">log</a> <a class="lib-member-link" href="#member-incanter.core-log10">log10</a> <a class="lib-member-link" href="#member-incanter.core-log2">log2</a> <a class="lib-member-link" href="#member-incanter.core-matrix">matrix</a> <a class="lib-member-link" href="#member-incanter.core-matrix?">matrix?</a> <a class="lib-member-link" href="#member-incanter.core-minus">minus</a> <a class="lib-member-link" href="#member-incanter.core-mmult">mmult</a> <a class="lib-member-link" href="#member-incanter.core-mult">mult</a> <a class="lib-member-link" href="#member-incanter.core-ncol">ncol</a> <a class="lib-member-link" href="#member-incanter.core-nrow">nrow</a> <a class="lib-member-link" href="#member-incanter.core-plus">plus</a> <a class="lib-member-link" href="#member-incanter.core-pow">pow</a> <a class="lib-member-link" href="#member-incanter.core-prod">prod</a> <a class="lib-member-link" href="#member-incanter.core-quit">quit</a> <a class="lib-member-link" href="#member-incanter.core-rank">rank</a> <a class="lib-member-link" href="#member-incanter.core-regularized-beta">regularized-beta</a> <a class="lib-member-link" href="#member-incanter.core-save">save</a> <a class="lib-member-link" href="#member-incanter.core-sel">sel</a> <a class="lib-member-link" href="#member-incanter.core-sin">sin</a> <a class="lib-member-link" href="#member-incanter.core-solve">solve</a> <a class="lib-member-link" href="#member-incanter.core-solve-quadratic">solve-quadratic</a> <a class="lib-member-link" href="#member-incanter.core-sqrt">sqrt</a> <a class="lib-member-link" href="#member-incanter.core-sum">sum</a> <a class="lib-member-link" href="#member-incanter.core-sum-of-squares">sum-of-squares</a> <a class="lib-member-link" href="#member-incanter.core-symmetric-matrix">symmetric-matrix</a> <a class="lib-member-link" href="#member-incanter.core-tan">tan</a> <a class="lib-member-link" href="#member-incanter.core-to-dummies">to-dummies</a> <a class="lib-member-link" href="#member-incanter.core-to-labels">to-labels</a> <a class="lib-member-link" href="#member-incanter.core-to-levels">to-levels</a> <a class="lib-member-link" href="#member-incanter.core-to-list">to-list</a> <a class="lib-member-link" href="#member-incanter.core-to-matrix">to-matrix</a> <a class="lib-member-link" href="#member-incanter.core-to-vect">to-vect</a> <a class="lib-member-link" href="#member-incanter.core-trace">trace</a> <a class="lib-member-link" href="#member-incanter.core-trans">trans</a> <a class="lib-member-link" href="#member-incanter.core-vectorize">vectorize</a> <a class="lib-member-link" href="#member-incanter.core-view">view</a></div><ol class="library-members"><li class="library-member"><a name="member-incanter.core-abs"/><dl class="library-member-table"><dt class="library-member-name">abs</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([A])</span></div><div class="library-member-docs"><div class="library-member-doc-line">Returns the absolute value of the elements in the given matrix, sequence or number.</div><div class="library-member-doc-line">   Equivalent to R&apos;s abs function.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-abs&apos;)" id="linkto-membersource-incanter.core-abs">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-abs"><pre>(defn abs 
  &quot;Returns the absolute value of the elements in the given matrix, sequence or number....&quot;
   ([A] (transform-with A #(Math/abs (float %)) abs)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-acos"/><dl class="library-member-table"><dt class="library-member-name">acos</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([A])</span></div><div class="library-member-docs"><div class="library-member-doc-line">Returns the arc cosine of the elements in the given matrix, sequence or number.</div><div class="library-member-doc-line">   Equivalent to R&apos;s acos function.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-acos&apos;)" id="linkto-membersource-incanter.core-acos">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-acos"><pre>(defn acos 
  &quot;Returns the arc cosine of the elements in the given matrix, sequence or number....&quot;
   ([A] (transform-with A #(Math/acos %) acos)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-asin"/><dl class="library-member-table"><dt class="library-member-name">asin</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([A])</span></div><div class="library-member-docs"><div class="library-member-doc-line">Returns the arc sine of the elements in the given matrix, sequence or number.</div><div class="library-member-doc-line">   Equivalent to R&apos;s asin function.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-asin&apos;)" id="linkto-membersource-incanter.core-asin">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-asin"><pre>(defn asin 
  &quot;Returns the arc sine of the elements in the given matrix, sequence or number....&quot;
   ([A] (transform-with A #(Math/asin %) asin)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-atan"/><dl class="library-member-table"><dt class="library-member-name">atan</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([A])</span></div><div class="library-member-docs"><div class="library-member-doc-line">Returns the arc tangent of the elements in the given matrix, sequence or number.</div><div class="library-member-doc-line">   Equivalent to R&apos;s atan function.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-atan&apos;)" id="linkto-membersource-incanter.core-atan">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-atan"><pre>(defn atan 
  &quot;Returns the arc tangent of the elements in the given matrix, sequence or number....&quot;
   ([A] (transform-with A #(Math/atan %) atan)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-beta"/><dl class="library-member-table"><dt class="library-member-name">beta</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([a b])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Equivalent to R&apos;s beta function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/Gamma.html</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-beta&apos;)" id="linkto-membersource-incanter.core-beta">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-beta"><pre>(defn beta 
&quot;...&quot;
  ([a b]  (Gamma/beta a b)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-bind-columns"/><dl class="library-member-table"><dt class="library-member-name">bind-columns</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([&amp; args])</span></div><div class="library-member-docs"><div class="library-member-doc-line">   Returns the matrix resulting from concatenating the given matrices </div><div class="library-member-doc-line">    and/or sequences by their columns. Equivalent to R&apos;s cbind.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Examples:</div><div class="library-member-doc-line">      (def A (matrix [[1 2 3] </div><div class="library-member-doc-line">                     [4 5 6] </div><div class="library-member-doc-line">                     [7 8 9]]))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (def B (matrix [10 11 12]))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (bind-columns A B)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (bind-columns [1 2 3 4] [5 6 7 8])</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-bind-columns&apos;)" id="linkto-membersource-incanter.core-bind-columns">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-bind-columns"><pre>(defn bind-columns 
&quot;   Returns the matrix resulting from concatenating the given matrices ...&quot;
  ([&amp; args]
   (reduce 
    (fn [A B] (.viewDice (bind-rows (trans A) (trans B))))
    args)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-bind-rows"/><dl class="library-member-table"><dt class="library-member-name">bind-rows</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([&amp; args])</span></div><div class="library-member-docs"><div class="library-member-doc-line">   Returns the matrix resulting from concatenating the given matrices </div><div class="library-member-doc-line">    and/or sequences by their rows. Equivalent to R&apos;s rbind.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Examples:</div><div class="library-member-doc-line">      (def A (matrix [[1 2 3] </div><div class="library-member-doc-line">                     [4 5 6] </div><div class="library-member-doc-line">                     [7 8 9]]))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (def B (matrix [[10 11 12]</div><div class="library-member-doc-line">                      [13 14 15]]))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (bind-rows A B)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (bind-rows [1 2 3 4] [5 6 7 8])</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-bind-rows&apos;)" id="linkto-membersource-incanter.core-bind-rows">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-bind-rows"><pre>(defn bind-rows 
&quot;   Returns the matrix resulting from concatenating the given matrices ...&quot;
  ([&amp; args]
   (reduce
    (fn [A B] 
      (cond 
        (nil? (seq A))
          B
        (nil? (seq B))
          A
        (and (matrix? A) (matrix? B))
          (conj A B)
        (and (matrix? A) (coll? B))
          (conj A B)
        (and (coll? A) (matrix? B))
          (conj (matrix A (count A)) B)
        (and (coll? A) (coll? B))
          (conj (matrix A (count A)) (matrix B (count B)))
        :else
          (throw (Exception. &quot;Incompatible types&quot;)))) 
      args)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-categorical-var"/><dl class="library-member-table"><dt class="library-member-name">categorical-var</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([&amp; args])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a categorical variable based on the values in the given collection.</div><div class="library-member-doc-line">  Equivalent to R&apos;s factor function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :data (default nil) factors will be extracted from the given data.</div><div class="library-member-doc-line">    :ordered? (default false) indicates that the variable is ordinal.</div><div class="library-member-doc-line">    :labels (default (sort (into #{} data)))</div><div class="library-member-doc-line">    :levels (range (count labels))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (categorical-var :data [:a :a :c :b :a :c :c])</div><div class="library-member-doc-line">    (categorical-var :labels [:a :b :c])</div><div class="library-member-doc-line">    (categorical-var :labels [:a :b :c] :levels [10 20 30])</div><div class="library-member-doc-line">    (categorical-var :levels [1 2 3])</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-categorical-var&apos;)" id="linkto-membersource-incanter.core-categorical-var">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-categorical-var"><pre>(defn categorical-var
&quot; Returns a categorical variable based on the values in the given collection....&quot;
  ([&amp; args]
   (let [opts (if args (apply assoc {} args) nil)
         data (if (:data opts) (:data opts) nil)
         ordered? (if (false? (:ordered? opts)) true false)
         labels (if (:labels opts) 
                  (:labels opts) 
                  (if (nil? data)
                    (:levels opts)
                    (sort (into #{} data))))
         levels (if (:levels opts) (:levels opts) (range (count labels)))]
    {:ordered? ordered?
     :labels labels
     :levels levels
     :to-labels (apply assoc {} (interleave levels labels))
     :to-levels (apply assoc {} (interleave labels levels))})))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-choose"/><dl class="library-member-table"><dt class="library-member-name">choose</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([n k])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns number of k-combinations (each of size k) from a set S with </div><div class="library-member-doc-line">  n elements (size n), which is the binomial coefficient (also known </div><div class="library-member-doc-line">  as the &apos;choose function&apos;) [wikipedia]</div><div class="library-member-doc-line">        choose = n!/(k!(n - k)!)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Equivalent to R&apos;s choose function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (choose 25 6) ; =&gt; 2,598,960</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/jet/math/tdouble/DoubleArithmetic.html</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Combination</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-choose&apos;)" id="linkto-membersource-incanter.core-choose">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-choose"><pre>(defn choose 
&quot;...&quot;
  ([n k] (DoubleArithmetic/binomial (double n) (long k))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-condition"/><dl class="library-member-table"><dt class="library-member-name">condition</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the two norm condition number, which is max(S) / min(S), where S is the diagonal matrix of singular values from an SVD decomposition.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  (use &apos;incanter.core)</div><div class="library-member-doc-line">  (def foo (matrix (range 9) 3))</div><div class="library-member-doc-line">  (condition foo)</div><div class="library-member-doc-line">  </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Condition_number</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/colt/matrix/tdouble/algo/decomposition/DoubleSingularValueDecompositionDC.html</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-condition&apos;)" id="linkto-membersource-incanter.core-condition">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-condition"><pre>(defn condition
&quot; Returns the two norm condition number, which is max(S) / min(S), where S is the diagonal matrix of singular values from an SVD decomposition....&quot;
  ([mat]
    (.cond (DoubleSingularValueDecompositionDC. mat, true, true))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-copy"/><dl class="library-member-table"><dt class="library-member-name">copy</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line">Returns a copy of the given matrix.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-copy&apos;)" id="linkto-membersource-incanter.core-copy">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-copy"><pre>(defn #^Matrix copy 
  &quot;Returns a copy of the given matrix.&quot;
  ([#^Matrix mat] (.copy mat)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-cos"/><dl class="library-member-table"><dt class="library-member-name">cos</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([A])</span></div><div class="library-member-docs"><div class="library-member-doc-line">Returns the cosine of the elements in the given matrix, sequence or number.</div><div class="library-member-doc-line">   Equivalent to R&apos;s cos function.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-cos&apos;)" id="linkto-membersource-incanter.core-cos">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-cos"><pre>(defn cos 
  &quot;Returns the cosine of the elements in the given matrix, sequence or number....&quot;
   ([A] (transform-with A #(Math/cos %) cos)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-cumulative-sum"/><dl class="library-member-table"><dt class="library-member-name">cumulative-sum</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([coll])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a sequence of cumulative sum for the given collection. For instance </div><div class="library-member-doc-line">    The first value equals the first value of the argument, the second value is</div><div class="library-member-doc-line">    the sum of the first two arguments, the third is the sum of the first three</div><div class="library-member-doc-line">    arguments, etc.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Examples:</div><div class="library-member-doc-line">      (cumulative-sum (range 100))</div><div class="library-member-doc-line">  </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-cumulative-sum&apos;)" id="linkto-membersource-incanter.core-cumulative-sum">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-cumulative-sum"><pre>(defn cumulative-sum 
  &quot; Returns a sequence of cumulative sum for the given collection. For instance ...&quot;
  ([coll] 
   (let [n (count coll)]
    (loop [in-coll (rest coll)
           cumu-sum [(first coll)]]
      (if (empty? in-coll)
        cumu-sum
        (recur (rest in-coll) (conj cumu-sum (+ (last cumu-sum) (first in-coll)))))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-dataset"/><dl class="library-member-table"><dt class="library-member-name">dataset</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([column-names &amp; data])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a map of type ::dataset constructed from the given column-names and</div><div class="library-member-doc-line">  data. The data is a sequence of sequences.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-dataset&apos;)" id="linkto-membersource-incanter.core-dataset">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-dataset"><pre>(defn dataset 
&quot; Returns a map of type ::dataset constructed from the given column-names and...&quot;
  ([column-names &amp; data] 
    (with-meta 
      {:column-names column-names
      :rows (map #(apply assoc {} (interleave column-names %)) (first data))}
      {:type ::dataset})))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-dataset?"/><dl class="library-member-table"><dt class="library-member-name">dataset?</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([obj])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Determines if obj is of type ::dataset.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-dataset?&apos;)" id="linkto-membersource-incanter.core-dataset?">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-dataset?"><pre>(defn dataset?
&quot; Determines if obj is of type ::dataset.&quot;
  ([obj] (= (type obj) ::dataset)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-decomp-cholesky"/><dl class="library-member-table"><dt class="library-member-name">decomp-cholesky</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Cholesky decomposition of the given matrix. Equivalent to R&apos;s</div><div class="library-member-doc-line">  chol function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns:</div><div class="library-member-doc-line">    a matrix of the triangular factor (note: the result from</div><div class="library-member-doc-line">    cern.colt.matrix.linalg.CholeskyDecomposition is transposed so </div><div class="library-member-doc-line">    that it matches the result return from R&apos;s chol function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">                                            </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  (use &apos;(incanter core stats charts datasets))</div><div class="library-member-doc-line">  ;; load the iris dataset</div><div class="library-member-doc-line">  (def iris (to-matrix (get-dataset :iris)))</div><div class="library-member-doc-line">  ;; take the Cholesky decompostion of the correlation matrix of the iris data.</div><div class="library-member-doc-line">  (decomp-cholesky (correlation iris))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/colt/matrix/tdouble/algo/decomposition/DoubleCholeskyDecomposition.html</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Cholesky_decomposition</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-decomp-cholesky&apos;)" id="linkto-membersource-incanter.core-decomp-cholesky">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-decomp-cholesky"><pre>(defn #^Matrix decomp-cholesky
&quot; Returns the Cholesky decomposition of the given matrix. Equivalent to R&apos;s...&quot;
  ([#^Matrix mat]
    (.viewDice (.getL (DoubleCholeskyDecomposition. mat)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-decomp-eigenvalue"/><dl class="library-member-table"><dt class="library-member-name">decomp-eigenvalue</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Eigenvalue Decomposition of the given matrix. Equivalent to R&apos;s eig function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns:</div><div class="library-member-doc-line">    a map containing:</div><div class="library-member-doc-line">      :values -- vector of eigenvalues</div><div class="library-member-doc-line">      :vectors -- the matrix of eigenvectors</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  (use &apos;incanter.core)</div><div class="library-member-doc-line">  (def foo (matrix (range 9) 3))</div><div class="library-member-doc-line">  (decomp-eigenvalue foo)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Eigenvalue_decomposition</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/colt/matrix/tdouble/algo/decomposition/DoubleEigenvalueDecomposition.html</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-decomp-eigenvalue&apos;)" id="linkto-membersource-incanter.core-decomp-eigenvalue">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-decomp-eigenvalue"><pre>(defn decomp-eigenvalue
&quot; Returns the Eigenvalue Decomposition of the given matrix. Equivalent to R&apos;s eig function....&quot;
  ([mat]
    (let [result (DoubleEigenvalueDecomposition. mat)]
      {:values (diag (Matrix. (.getD result)))
       :vectors (Matrix. (.getV result))})))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-decomp-lu"/><dl class="library-member-table"><dt class="library-member-name">decomp-lu</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the LU decomposition of the given matrix.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  (use &apos;incanter.core)</div><div class="library-member-doc-line">  (def foo (matrix (range 9) 3))</div><div class="library-member-doc-line">  (decomp-lu foo)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns:</div><div class="library-member-doc-line">    a map containing:</div><div class="library-member-doc-line">      :L -- the lower triangular factor</div><div class="library-member-doc-line">      :U -- the upper triangular factor</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/LU_decomposition</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/colt/matrix/tdouble/algo/decomposition/DoubleLUDecomposition.html</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-decomp-lu&apos;)" id="linkto-membersource-incanter.core-decomp-lu">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-decomp-lu"><pre>(defn decomp-lu
&quot; Returns the LU decomposition of the given matrix....&quot;
  ([mat]
    (let [result (DoubleLUDecomposition. mat)]
      {:L (Matrix. (.getL result))
       :U (Matrix. (.getU result))})))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-decomp-qr"/><dl class="library-member-table"><dt class="library-member-name">decomp-qr</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the QR decomposition of the given matrix. Equivalent to R&apos;s qr function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  (use &apos;incanter.core)</div><div class="library-member-doc-line">  (def foo (matrix (range 9) 3))</div><div class="library-member-doc-line">  (decomp-qr foo)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns:</div><div class="library-member-doc-line">    a map containing:</div><div class="library-member-doc-line">      :Q -- orthogonal factor</div><div class="library-member-doc-line">      :R -- the upper triangular factor</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/QR_decomposition</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/colt/matrix/tdouble/algo/decomposition/DoubleQRDecomposition.html</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-decomp-qr&apos;)" id="linkto-membersource-incanter.core-decomp-qr">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-decomp-qr"><pre>(defn decomp-qr
&quot; Returns the QR decomposition of the given matrix. Equivalent to R&apos;s qr function....&quot;
  ([mat]
    (let [result (DoubleQRDecomposition. mat)]
      {:Q (Matrix. (.getQ result))
       :R (Matrix. (.getR result))})))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-decomp-svd"/><dl class="library-member-table"><dt class="library-member-name">decomp-svd</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Singular Value Decomposition (SVD) of the given matrix. Equivalent to</div><div class="library-member-doc-line">  R&apos;s svd function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns:</div><div class="library-member-doc-line">    a map containing:</div><div class="library-member-doc-line">      :S -- the diagonal matrix of singular values</div><div class="library-member-doc-line">      :U -- the left singular vectors U</div><div class="library-member-doc-line">      :V -- the right singular vectors V</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  (use &apos;incanter.core)</div><div class="library-member-doc-line">  (def foo (matrix (range 9) 3))</div><div class="library-member-doc-line">  (decomp-foo foo)</div><div class="library-member-doc-line">  </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Singular_value_decomposition</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/colt/matrix/tdouble/algo/decomposition/DoubleSingularValueDecompositionDC.html</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-decomp-svd&apos;)" id="linkto-membersource-incanter.core-decomp-svd">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-decomp-svd"><pre>(defn decomp-svd
&quot; Returns the Singular Value Decomposition (SVD) of the given matrix. Equivalent to...&quot;
  ([mat]
    (let [result (DoubleSingularValueDecompositionDC. mat, true, true)]
      {:S (diag (Matrix. (.getS result)))
       :U (Matrix. (.getU result))
       :V (Matrix. (.getV result))})))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-det"/><dl class="library-member-table"><dt class="library-member-name">det</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the determinant of the given matrix using LU decomposition. Equivalent</div><div class="library-member-doc-line">  to R&apos;s det function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/LU_decomposition</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/colt/matrix/tdouble/algo/decomposition/DoubleLUDecomposition.html</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-det&apos;)" id="linkto-membersource-incanter.core-det">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-det"><pre>(defn det 
&quot; Returns the determinant of the given matrix using LU decomposition. Equivalent...&quot;
  ;([mat] (.det (cern.colt.matrix.linalg.LUDecomposition. mat))))
  ([mat] (.det DoubleAlgebra/DEFAULT mat)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-diag"/><dl class="library-member-table"><dt class="library-member-name">diag</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([m])</span></div><div class="library-member-docs"><div class="library-member-doc-line">   If given a matrix, diag returns a sequence of its diagonal elements.</div><div class="library-member-doc-line">    If given a sequence, it returns a matrix with the sequence&apos;s elements </div><div class="library-member-doc-line">    on its diagonal. Equivalent to R&apos;s diag function.</div><div class="library-member-doc-line">  </div><div class="library-member-doc-line">    Examples:</div><div class="library-member-doc-line">      (diag [1 2 3 4])</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (def A (matrix [[1 2 3]</div><div class="library-member-doc-line">                      [4 5 6]</div><div class="library-member-doc-line">                      [7 8 9]]))</div><div class="library-member-doc-line">      (diag A)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-diag&apos;)" id="linkto-membersource-incanter.core-diag">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-diag"><pre>(defn diag 
&quot;   If given a matrix, diag returns a sequence of its diagonal elements....&quot;
   ([m]
    (cond 
     (matrix? m)
      (seq (.toArray (.diagonal DoubleFactory2D/dense m)))
     (coll? m)
      (Matrix. (.diagonal DoubleFactory2D/dense (.make DoubleFactory1D/dense (double-array m))))
     (number? m)
      m)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-div"/><dl class="library-member-table"><dt class="library-member-name">div</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([&amp; args])</span></div><div class="library-member-docs"><div class="library-member-doc-line">   Performs element-by-element division on multiple matrices, sequences, </div><div class="library-member-doc-line">    and/or numbers. Equivalent to R&apos;s / operator.</div><div class="library-member-doc-line">      </div><div class="library-member-doc-line">    Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (def A (matrix [[1 2 3] </div><div class="library-member-doc-line">                      [4 5 6] </div><div class="library-member-doc-line">                      [7 8 9]]))</div><div class="library-member-doc-line">      (div A A A) </div><div class="library-member-doc-line">      (div A 2)</div><div class="library-member-doc-line">      (div 2 A)</div><div class="library-member-doc-line">      (div [1 2 3] [1 2 3])</div><div class="library-member-doc-line">      (div [1 2 3] 2)</div><div class="library-member-doc-line">      (div 2 [1 2 3])</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-div&apos;)" id="linkto-membersource-incanter.core-div">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-div"><pre>(defn div 
&quot;   Performs element-by-element division on multiple matrices, sequences, ...&quot;
   ([&amp; args] (reduce (fn [A B] (combine-with A B clojure.core// div)) args)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-exp"/><dl class="library-member-table"><dt class="library-member-name">exp</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([A])</span></div><div class="library-member-docs"><div class="library-member-doc-line">Returns the exponential of the elements in the given matrix, sequence or number.</div><div class="library-member-doc-line">   Equivalent to R&apos;s exp function.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-exp&apos;)" id="linkto-membersource-incanter.core-exp">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-exp"><pre>(defn exp 
  &quot;Returns the exponential of the elements in the given matrix, sequence or number....&quot;
   ([A] (transform-with A #(Math/exp %) exp)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-factorial"/><dl class="library-member-table"><dt class="library-member-name">factorial</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([k])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns the factorial of k (k must be a positive integer). Equivalent to R&apos;s</div><div class="library-member-doc-line">  factorial function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (factorial 6)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/jet/math/tdouble/DoubleArithmetic.html</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Factorial</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-factorial&apos;)" id="linkto-membersource-incanter.core-factorial">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-factorial"><pre>(defn factorial 
&quot;...&quot;
  ([k] (DoubleArithmetic/factorial k)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-gamma"/><dl class="library-member-table"><dt class="library-member-name">gamma</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Equivalent to R&apos;s gamma function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/Gamma.html</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-gamma&apos;)" id="linkto-membersource-incanter.core-gamma">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-gamma"><pre>(defn gamma 
&quot;...&quot;
  ([x]  (Gamma/gamma x)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-group-by"/><dl class="library-member-table"><dt class="library-member-name">group-by</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat on-cols &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Groups the given matrix by the values in the columns indicated by the </div><div class="library-member-doc-line">  &apos;on-cols&apos; argument, returning a sequence of matrices. The returned</div><div class="library-member-doc-line">  matrices are sorted by the value of the group column ONLY when there</div><div class="library-member-doc-line">  is only a single (non-vector) on-col argument.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core datasets))</div><div class="library-member-doc-line">    (def plant-growth (to-matrix (get-dataset :plant-growth)))</div><div class="library-member-doc-line">    (group-by plant-growth 1)</div><div class="library-member-doc-line">    ;; only return the first column</div><div class="library-member-doc-line">    (group-by plant-growth 1 :cols 0)</div><div class="library-member-doc-line">    ;; don&apos;t return the second column</div><div class="library-member-doc-line">    (group-by plant-growth 1 :except-cols 1)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def plant-growth-dummies (to-matrix (get-dataset :plant-growth) :dummies true))</div><div class="library-member-doc-line">    (group-by plant-growth-dummies [1 2])</div><div class="library-member-doc-line">    ;; return only the first column</div><div class="library-member-doc-line">    (group-by plant-growth-dummies [1 2] :cols 0) </div><div class="library-member-doc-line">    ;; don&apos;t return the last two columns</div><div class="library-member-doc-line">    (group-by plant-growth-dummies [1 2] :except-cols [1 2])</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; plot the plant groups</div><div class="library-member-doc-line">    (use &apos;incanter.charts)</div><div class="library-member-doc-line">    ;; can use destructuring if you know the number of groups,</div><div class="library-member-doc-line">    ;; groups are sorted only if the group is based on a single column value</div><div class="library-member-doc-line">    (let [[ctrl trt1 trt2] (group-by plant-growth 1 :cols 0)]</div><div class="library-member-doc-line">      (doto (box-plot ctrl)</div><div class="library-member-doc-line">            (add-box-plot trt1)</div><div class="library-member-doc-line">            (add-box-plot trt2)</div><div class="library-member-doc-line">            view))</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-group-by&apos;)" id="linkto-membersource-incanter.core-group-by">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-group-by"><pre>(defn group-by
&quot; Groups the given matrix by the values in the columns indicated by the ...&quot;
  ([mat on-cols &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          cols (when (:cols opts) (:cols opts))
          except-cols (when (:except-cols opts) (:except-cols opts))
          groups (if (coll? on-cols)
                   (into #{} (to-list (sel mat :cols on-cols)))
                   (sort (into #{} (to-list (sel mat :cols on-cols)))))
          filter-fn (fn [group] 
                      (cond 
                        (and (coll? on-cols) (&gt; (count on-cols) 1))
                          (fn [row] 
                            (reduce #(and %1 %2) 
                                    (map (fn [i g] (= (nth row i) g)) on-cols group)))
                        (and (coll? on-cols) (= (count on-cols) 1))
                          (fn [row] 
                            (= (nth row (first on-cols)) group))
                        :else
                          (fn [row] 
                            (= (nth row on-cols) group))))
         ]
      (cond
        cols
          (map #(sel mat :cols cols :filter (filter-fn %)) groups)
        except-cols
          (map #(sel mat :except-cols except-cols :filter (filter-fn %)) groups)
        :else
          (map #(sel mat :filter (filter-fn %)) groups)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-half-vectorize"/><dl class="library-member-table"><dt class="library-member-name">half-vectorize</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the half-vectorization (i.e. vech) of the given matrix.</div><div class="library-member-doc-line">    The half-vectorization, vech(A), of a symmetric nxn matrix A </div><div class="library-member-doc-line">    is the n(n+1)/2 x 1 column vector obtained by vectorizing only </div><div class="library-member-doc-line">    the lower triangular part of A.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    For instance:</div><div class="library-member-doc-line">      (= (half-vectorize (matrix [[a b] [b d]])) (matrix [a b d]))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Examples:</div><div class="library-member-doc-line">      (def A (matrix [[1 2] [2 4]])) </div><div class="library-member-doc-line">      (half-vectorize A)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    References:</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Vectorization_(mathematics)</div><div class="library-member-doc-line">  </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-half-vectorize&apos;)" id="linkto-membersource-incanter.core-half-vectorize">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-half-vectorize"><pre>(defn half-vectorize 
  &quot; Returns the half-vectorization (i.e. vech) of the given matrix....&quot;
  ([mat]
   (for [j (range (nrow mat)) i (range j (nrow mat))] (sel mat i j))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-identity-matrix"/><dl class="library-member-table"><dt class="library-member-name">identity-matrix</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([n])</span></div><div class="library-member-docs"><div class="library-member-doc-line">   Returns an n-by-n identity matrix.</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    Examples:</div><div class="library-member-doc-line">      (identity-matrix 4)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-identity-matrix&apos;)" id="linkto-membersource-incanter.core-identity-matrix">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-identity-matrix"><pre>(defn identity-matrix 
&quot;   Returns an n-by-n identity matrix....&quot;
   ([n] (Matrix. (.identity DoubleFactory2D/dense n))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-incomplete-beta"/><dl class="library-member-table"><dt class="library-member-name">incomplete-beta</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x a b])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns the non-regularized incomplete beta value.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/Gamma.html</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-incomplete-beta&apos;)" id="linkto-membersource-incanter.core-incomplete-beta">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-incomplete-beta"><pre>(defn incomplete-beta 
&quot;...&quot;

  ([x a b]  (* (Gamma/incompleteBeta a b x) (Gamma/beta a b))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-length"/><dl class="library-member-table"><dt class="library-member-name">length</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([coll])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> A version of count that works on collections, matrices, and numbers. </div><div class="library-member-doc-line">    The length of a number is one, the length of a collection is its count,</div><div class="library-member-doc-line">    and the length of a matrix is the number of elements it contains (nrow*ncol).</div><div class="library-member-doc-line">    Equivalent to R&apos;s length function.</div><div class="library-member-doc-line">  </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-length&apos;)" id="linkto-membersource-incanter.core-length">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-length"><pre>(defn length 
  &quot; A version of count that works on collections, matrices, and numbers. ...&quot;
  ([coll]
    (cond
      (number? coll) 
        1
      (matrix? coll)
        (* (.rows #^Matrix coll) (.columns #^Matrix coll))
      (coll? coll)
        (count coll)
      :else
        (throw (Exception. &quot;Argument must be a collection or matrix!&quot;)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-log"/><dl class="library-member-table"><dt class="library-member-name">log</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([A])</span></div><div class="library-member-docs"><div class="library-member-doc-line">Returns the natural log of the elements in the given matrix, sequence or number.</div><div class="library-member-doc-line">   Equvalent to R&apos;s log function.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-log&apos;)" id="linkto-membersource-incanter.core-log">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-log"><pre>(defn log 
  &quot;Returns the natural log of the elements in the given matrix, sequence or number....&quot;
   ([A] (transform-with A #(Math/log %) log)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-log10"/><dl class="library-member-table"><dt class="library-member-name">log10</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([A])</span></div><div class="library-member-docs"><div class="library-member-doc-line">Returns the log base 10 of the elements in the given matrix, sequence or number.</div><div class="library-member-doc-line">   Equivalent to R&apos;s log10 function.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-log10&apos;)" id="linkto-membersource-incanter.core-log10">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-log10"><pre>(defn log10 
  &quot;Returns the log base 10 of the elements in the given matrix, sequence or number....&quot;
   ([A] (transform-with A #(Math/log10 %) (lg 10.0))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-log2"/><dl class="library-member-table"><dt class="library-member-name">log2</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([A])</span></div><div class="library-member-docs"><div class="library-member-doc-line">Returns the log base 2 of the elements in the given matrix, sequence or number.</div><div class="library-member-doc-line">   Equivalent to R&apos;s log2 function.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-log2&apos;)" id="linkto-membersource-incanter.core-log2">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-log2"><pre>(defn log2 
  &quot;Returns the log base 2 of the elements in the given matrix, sequence or number....&quot;
   ([A] (transform-with A #(/ (Math/log %) (Math/log 2)) log2)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-matrix"/><dl class="library-member-table"><dt class="library-member-name">matrix</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([data] [data ncol] [init-val rows cols])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns an instance of an incanter.Matrix, which is an extension of</div><div class="library-member-doc-line">  cern.colt.matrix.tdouble.impl.DenseColDoubleMatrix2D that implements the Clojure</div><div class="library-member-doc-line">  interface clojure.lang.ISeq. Therefore Clojure sequence operations can</div><div class="library-member-doc-line">  be applied to matrices. A matrix consists of a sequence of rows, where</div><div class="library-member-doc-line">  each row is a one-dimensional row matrix. One-dimensional matrices are,</div><div class="library-member-doc-line">  in turn, sequences of numbers. Equivalent to R&apos;s matrix function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (def A (matrix [[1 2 3] [4 5 6] [7 8 9]])) ; produces a 3x3 matrix</div><div class="library-member-doc-line">    (def A2 (matrix [1 2 3 4 5 6 7 8 9] 3)) ; produces the same 3x3 matrix</div><div class="library-member-doc-line">    (def B (matrix [1 2 3 4 5 6 7 8 9])) ; produces a 9x1 column vector</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (first A) ; produces a row matrix [1 2 3]</div><div class="library-member-doc-line">    (rest A) ; produces a sub matrix [[4 5 6] [7 8 9]]</div><div class="library-member-doc-line">    (first (first A)) ; produces 1.0</div><div class="library-member-doc-line">    (rest (first A)) ; produces a row matrix [2 3]</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ; since (plus row1 row2) adds the two rows element-by-element,</div><div class="library-member-doc-line">    (reduce plus A) ; produces the sums of the columns, </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ; and since (sum row1) sums the elements of the row, </div><div class="library-member-doc-line">    (map sum A) ; produces the sums of the rows, </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ; you can filter the rows using Clojure&apos;s filter function</div><div class="library-member-doc-line">    (filter #(&gt; (nth % 1) 4) A) ; returns the rows where the second column is greater than 4.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/colt/matrix/tdouble/DoubleMatrix2D.html</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-matrix&apos;)" id="linkto-membersource-incanter.core-matrix">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-matrix"><pre>(defn matrix 
&quot;...&quot;
  ([data]
   (make-matrix data))

  ([data ncol]
   (make-matrix data ncol))

  ([init-val rows cols]
   (make-matrix init-val rows cols)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-matrix?"/><dl class="library-member-table"><dt class="library-member-name">matrix?</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([obj])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Test if obj is &apos;derived&apos; incanter.Matrix.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-matrix?&apos;)" id="linkto-membersource-incanter.core-matrix?">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-matrix?"><pre>(defn matrix? 
  &quot; Test if obj is &apos;derived&apos; incanter.Matrix.&quot;
  ([obj] (is-matrix obj)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-minus"/><dl class="library-member-table"><dt class="library-member-name">minus</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([&amp; args])</span></div><div class="library-member-docs"><div class="library-member-doc-line">   Performs element-by-element subtraction on multiple matrices, sequences, </div><div class="library-member-doc-line">    and/or numbers. If only a single argument is provided, returns the </div><div class="library-member-doc-line">    negative of the given matrix, sequence, or number. Equivalent to R&apos;s - operator.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (def A (matrix [[1 2 3] </div><div class="library-member-doc-line">                      [4 5 6] </div><div class="library-member-doc-line">                      [7 8 9]]))</div><div class="library-member-doc-line">      (minus A)</div><div class="library-member-doc-line">      (minus A A A) </div><div class="library-member-doc-line">      (minus A 2)</div><div class="library-member-doc-line">      (minus 2 A)</div><div class="library-member-doc-line">      (minus [1 2 3] [1 2 3])</div><div class="library-member-doc-line">      (minus [1 2 3] 2)</div><div class="library-member-doc-line">      (minus 2 [1 2 3])</div><div class="library-member-doc-line">      (minus [1 2 3])</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-minus&apos;)" id="linkto-membersource-incanter.core-minus">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-minus"><pre>(defn minus 
&quot;   Performs element-by-element subtraction on multiple matrices, sequences, ...&quot;
   ;([&amp; args] (reduce (fn [A B] (combine-with A B clojure.core/- minus)) args)))
   ([&amp; args] (if (= (count args) 1)
               (combine-with 0 (first args) clojure.core/- minus)
               (reduce (fn [A B] (combine-with A B clojure.core/- minus)) args))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-mmult"/><dl class="library-member-table"><dt class="library-member-name">mmult</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([&amp; args])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the matrix resulting from the matrix multiplication of the</div><div class="library-member-doc-line">    the given arguments. Equivalent to R&apos;s %*% operator.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Examples:</div><div class="library-member-doc-line">  </div><div class="library-member-doc-line">      (def A (matrix [[1 2 3] </div><div class="library-member-doc-line">                      [4 5 6] </div><div class="library-member-doc-line">                      [7 8 9]]))</div><div class="library-member-doc-line">      (mmult A (trans A))</div><div class="library-member-doc-line">      (mmult A (trans A) A)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    References:</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Matrix_multiplication</div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/colt/matrix/tdouble/DoubleMatrix2D.html</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-mmult&apos;)" id="linkto-membersource-incanter.core-mmult">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-mmult"><pre>(defn mmult 
  &quot; Returns the matrix resulting from the matrix multiplication of the...&quot;
    ([&amp; args]
     (reduce (fn [A B]
              (let [a (if (matrix? A) A (matrix A))
                    b (if (matrix? B) B (matrix B))
                    result (Matrix. (.zMult #^Matrix a #^Matrix b nil))]
                (if (and (= (.rows result) 1) (= (.columns result) 1))
                  (.getQuick result 0 0)
                  result))) 
            args)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-mult"/><dl class="library-member-table"><dt class="library-member-name">mult</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([&amp; args])</span></div><div class="library-member-docs"><div class="library-member-doc-line">   Performs element-by-element multiplication on multiple matrices, sequences, </div><div class="library-member-doc-line">    and/or numbers. Equivalent to R&apos;s * operator.</div><div class="library-member-doc-line">      </div><div class="library-member-doc-line">    Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (def A (matrix [[1 2 3] </div><div class="library-member-doc-line">                      [4 5 6] </div><div class="library-member-doc-line">                      [7 8 9]]))</div><div class="library-member-doc-line">      (mult A A A) </div><div class="library-member-doc-line">      (mult A 2)</div><div class="library-member-doc-line">      (mult 2 A)</div><div class="library-member-doc-line">      (mult [1 2 3] [1 2 3])</div><div class="library-member-doc-line">      (mult [1 2 3] 2)</div><div class="library-member-doc-line">      (mult 2 [1 2 3])</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-mult&apos;)" id="linkto-membersource-incanter.core-mult">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-mult"><pre>(defn mult 
&quot;   Performs element-by-element multiplication on multiple matrices, sequences, ...&quot;
   ([&amp; args] (reduce (fn [A B] (combine-with A B clojure.core/* mult)) args)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-ncol"/><dl class="library-member-table"><dt class="library-member-name">ncol</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the number of columns in the given matrix. Equivalent to R&apos;s ncol function.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-ncol&apos;)" id="linkto-membersource-incanter.core-ncol">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-ncol"><pre>(defn ncol 
  &quot; Returns the number of columns in the given matrix. Equivalent to R&apos;s ncol function.&quot;
  ([mat]
   (cond 
    (matrix? mat) (.columns #^Matrix mat)
    (coll? mat) 1 )))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-nrow"/><dl class="library-member-table"><dt class="library-member-name">nrow</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the number of rows in the given matrix. Equivalent to R&apos;s nrow function.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-nrow&apos;)" id="linkto-membersource-incanter.core-nrow">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-nrow"><pre>(defn nrow 
  &quot; Returns the number of rows in the given matrix. Equivalent to R&apos;s nrow function.&quot;
  ([mat]
   (cond 
    (matrix? mat) (.rows #^Matrix mat)
    (coll? mat) (count mat))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-plus"/><dl class="library-member-table"><dt class="library-member-name">plus</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([&amp; args])</span></div><div class="library-member-docs"><div class="library-member-doc-line">   Performs element-by-element addition on multiple matrices, sequences, </div><div class="library-member-doc-line">    and/or numbers. Equivalent to R&apos;s + operator.</div><div class="library-member-doc-line"> </div><div class="library-member-doc-line">    Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (def A (matrix [[1 2 3] </div><div class="library-member-doc-line">                      [4 5 6] </div><div class="library-member-doc-line">                      [7 8 9]]))</div><div class="library-member-doc-line">      (plus A A A) </div><div class="library-member-doc-line">      (plus A 2)</div><div class="library-member-doc-line">      (plus 2 A)</div><div class="library-member-doc-line">      (plus [1 2 3] [1 2 3])</div><div class="library-member-doc-line">      (plus [1 2 3] 2)</div><div class="library-member-doc-line">      (plus 2 [1 2 3])</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-plus&apos;)" id="linkto-membersource-incanter.core-plus">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-plus"><pre>(defn plus 
&quot;   Performs element-by-element addition on multiple matrices, sequences, ...&quot;
   ([&amp; args] (reduce (fn [A B] (combine-with A B clojure.core/+ plus)) args)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-pow"/><dl class="library-member-table"><dt class="library-member-name">pow</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([&amp; args])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> This is an element-by-element exponent function, raising the first argument,</div><div class="library-member-doc-line">    by the exponents in the remaining arguments. Equivalent to R&apos;s ^ operator.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-pow&apos;)" id="linkto-membersource-incanter.core-pow">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-pow"><pre>(defn pow 
  &quot; This is an element-by-element exponent function, raising the first argument,...&quot;
   ([&amp; args] (reduce (fn [A B] (combine-with A B #(Math/pow %1 %2) pow)) args)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-prod"/><dl class="library-member-table"><dt class="library-member-name">prod</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x])</span></div><div class="library-member-docs"><div class="library-member-doc-line">Returns the product of the given sequence.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-prod&apos;)" id="linkto-membersource-incanter.core-prod">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-prod"><pre>(defn prod 
  &quot;Returns the product of the given sequence.&quot;
  ([x]
    (let [xx (if (or (nil? x) (empty? x)) [0] (to-list x))]
      (DoubleDescriptive/product (DoubleArrayList. (double-array xx))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-quit"/><dl class="library-member-table"><dt class="library-member-name">quit</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Exits the Clojure shell.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-quit&apos;)" id="linkto-membersource-incanter.core-quit">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-quit"><pre>(defn quit
&quot; Exits the Clojure shell.&quot; 
  ([] (System/exit 0)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-rank"/><dl class="library-member-table"><dt class="library-member-name">rank</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the effective numerical matrix rank, which is the number of nonnegligible singular values.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  (use &apos;incanter.core)</div><div class="library-member-doc-line">  (def foo (matrix (range 9) 3))</div><div class="library-member-doc-line">  (rank foo)</div><div class="library-member-doc-line">  </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Matrix_rank</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/colt/matrix/tdouble/algo/decomposition/DoubleSingularValueDecompositionDC.html</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-rank&apos;)" id="linkto-membersource-incanter.core-rank">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-rank"><pre>(defn rank
&quot; Returns the effective numerical matrix rank, which is the number of nonnegligible singular values....&quot;
  ([mat]
    (.rank (DoubleSingularValueDecompositionDC. mat, true, true))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-regularized-beta"/><dl class="library-member-table"><dt class="library-member-name">regularized-beta</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x a b])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns the regularized incomplete beta value. Equivalent to R&apos;s pbeta function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/Gamma.html</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Regularized_incomplete_beta_function</div><div class="library-member-doc-line">    http://mathworld.wolfram.com/RegularizedBetaFunction.html</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-regularized-beta&apos;)" id="linkto-membersource-incanter.core-regularized-beta">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-regularized-beta"><pre>(defn regularized-beta 
&quot;...&quot;
  ([x a b] 
    (Gamma/incompleteBeta a b x)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-save"/><dl class="library-member-table"><dt class="library-member-name">save</dt><dd><div class="library-member-info"><span class="library-member-type">multi</span> <span class="library-member-arglists"></span></div><div class="library-member-docs"><div class="library-member-doc-line"> Save is a multi-function that is used to write matrices, datasets and </div><div class="library-member-doc-line">  charts (in png format) to a file.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Arguments:</div><div class="library-member-doc-line">    obj -- is a matrix, dataset, or chart object</div><div class="library-member-doc-line">    filename -- the filename to create.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Matrix and dataset options:</div><div class="library-member-doc-line">    :delim (default \,) column delimiter </div><div class="library-member-doc-line">    :header (default nil) an sequence of strings to be used as header line,</div><div class="library-member-doc-line">        for matrices the default value is nil, for datasets, the default is</div><div class="library-member-doc-line">        the dataset&apos;s column-names array.</div><div class="library-member-doc-line">    :append (default false) determines whether this given file should be </div><div class="library-member-doc-line">        appended to. If true, a header will not be written to the file again.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Chart options:</div><div class="library-member-doc-line">    :width (default 500)</div><div class="library-member-doc-line">    :height (default 400)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Matrix Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core io))</div><div class="library-member-doc-line">    (def A (matrix (range 12) 3)) ; creates a 3x4 matrix</div><div class="library-member-doc-line">    (save A &quot;A.dat&quot;) ; writes A to the file A.dat, with no header and comma delimited</div><div class="library-member-doc-line">    (save A &quot;A.dat&quot; :delim \tab) ; writes A to the file A.dat, with no header and tab delimited</div><div class="library-member-doc-line">   </div><div class="library-member-doc-line">    ;; writes A to the file A.dat, with a header and tab delimited</div><div class="library-member-doc-line">    (save A &quot;A.dat&quot; :delim \, :header [&quot;col1&quot; &quot;col2&quot; &quot;col3&quot;]) </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Dataset Example:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core io datasets))</div><div class="library-member-doc-line">    ;; read the iris sample dataset, and save it to a file.</div><div class="library-member-doc-line">    (def iris (get-dataset :iris))</div><div class="library-member-doc-line">    (save iris &quot;iris.dat&quot;)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Chart Example:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core io stats charts))</div><div class="library-member-doc-line">    (save (histogram (sample-normal 1000)) &quot;hist.png&quot;)</div><div class="library-member-doc-line">  </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-save&apos;)" id="linkto-membersource-incanter.core-save">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-save"><pre>(defmulti save 
&quot; Save is a multi-function that is used to write matrices, datasets and 
  charts (in png format) to a file.

  Arguments:
    obj -- is a matrix, dataset, or chart object
    filename -- the filename to create.

  Matrix and dataset options:
    :delim (default \\,) column delimiter 
    :header (default nil) an sequence of strings to be used as header line,
        for matrices the default value is nil, for datasets, the default is
        the dataset&apos;s column-names array.
    :append (default false) determines whether this given file should be 
        appended to. If true, a header will not be written to the file again.

  Chart options:
    :width (default 500)
    :height (default 400)


  Matrix Examples:

    (use &apos;(incanter core io))
    (def A (matrix (range 12) 3)) ; creates a 3x4 matrix
    (save A \&quot;A.dat\&quot;) ; writes A to the file A.dat, with no header and comma delimited
    (save A \&quot;A.dat\&quot; :delim \\tab) ; writes A to the file A.dat, with no header and tab delimited
   
    ;; writes A to the file A.dat, with a header and tab delimited
    (save A \&quot;A.dat\&quot; :delim \\, :header [\&quot;col1\&quot; \&quot;col2\&quot; \&quot;col3\&quot;]) 


  Dataset Example:

    (use &apos;(incanter core io datasets))
    ;; read the iris sample dataset, and save it to a file.
    (def iris (get-dataset :iris))
    (save iris \&quot;iris.dat\&quot;)


  Chart Example:

    (use &apos;(incanter core io stats charts))
    (save (histogram (sample-normal 1000)) \&quot;hist.png\&quot;)
  

&quot;
  (fn [obj filename &amp; options] (type obj)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-sel"/><dl class="library-member-table"><dt class="library-member-name">sel</dt><dd><div class="library-member-info"><span class="library-member-type">multi</span> <span class="library-member-arglists"></span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns an element or subset of the given matrix, or dataset. </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Argument:</div><div class="library-member-doc-line">    a matrix object or dataset.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :rows (default true) </div><div class="library-member-doc-line">      returns all rows by default, can pass a row index or sequence of row indices</div><div class="library-member-doc-line">    :cols (default true) </div><div class="library-member-doc-line">      returns all columns by default, can pass a column index or sequence of column indices</div><div class="library-member-doc-line">    :except-rows (default nil) can pass a row index or sequence of row indices to exclude</div><div class="library-member-doc-line">    :except-cols (default nil) can pass a column index or sequence of column indices to exclude</div><div class="library-member-doc-line">    :filter (default nil) </div><div class="library-member-doc-line">      a function can be provided to filter the rows of the matrix</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (use &apos;incanter.datasets)</div><div class="library-member-doc-line">    (def iris (to-matrix (get-dataset :iris)))</div><div class="library-member-doc-line">    (sel iris 0 0) ; first element</div><div class="library-member-doc-line">    (sel iris :rows 0 :cols 0) ; also first element</div><div class="library-member-doc-line">    (sel iris :cols 0) ; first column of all rows</div><div class="library-member-doc-line">    (sel iris :cols [0 2]) ; first and third column of all rows</div><div class="library-member-doc-line">    (sel iris :rows (range 10) :cols (range 2)) ; first two columns of the first 10 rows</div><div class="library-member-doc-line">    (sel iris :rows (range 10)) ; all columns of the first 10 rows</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; exclude rows or columns</div><div class="library-member-doc-line">    (sel iris :except-rows (range 10)) ; all columns of all but the first 10 rows</div><div class="library-member-doc-line">    (sel iris :except-cols 1) ; all columns except the second</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; return only the first 10 even rows</div><div class="library-member-doc-line">    (sel iris :rows (range 10) :filter #(even? (int (nth % 0))))</div><div class="library-member-doc-line">    ;; select rows where distance (third column) is greater than 50</div><div class="library-member-doc-line">    (sel iris :filter #(&gt; (nth % 2) 4))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; examples with datasets</div><div class="library-member-doc-line">    (use &apos;incanter.datasets)</div><div class="library-member-doc-line">    (def us-arrests (get-dataset :us-arrests))</div><div class="library-member-doc-line">    (sel us-arrests :cols &quot;State&quot;)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (sel us-arrests :cols [&quot;State&quot; &quot;Murder&quot;])</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-sel&apos;)" id="linkto-membersource-incanter.core-sel">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-sel"><pre>(defmulti sel 
&quot;
  Returns an element or subset of the given matrix, or dataset. 

  Argument:
    a matrix object or dataset.

  Options:
    :rows (default true) 
      returns all rows by default, can pass a row index or sequence of row indices
    :cols (default true) 
      returns all columns by default, can pass a column index or sequence of column indices
    :except-rows (default nil) can pass a row index or sequence of row indices to exclude
    :except-cols (default nil) can pass a column index or sequence of column indices to exclude
    :filter (default nil) 
      a function can be provided to filter the rows of the matrix

  Examples:
    (use &apos;incanter.datasets)
    (def iris (to-matrix (get-dataset :iris)))
    (sel iris 0 0) ; first element
    (sel iris :rows 0 :cols 0) ; also first element
    (sel iris :cols 0) ; first column of all rows
    (sel iris :cols [0 2]) ; first and third column of all rows
    (sel iris :rows (range 10) :cols (range 2)) ; first two columns of the first 10 rows
    (sel iris :rows (range 10)) ; all columns of the first 10 rows

    ;; exclude rows or columns
    (sel iris :except-rows (range 10)) ; all columns of all but the first 10 rows
    (sel iris :except-cols 1) ; all columns except the second

    ;; return only the first 10 even rows
    (sel iris :rows (range 10) :filter #(even? (int (nth % 0))))
    ;; select rows where distance (third column) is greater than 50
    (sel iris :filter #(&gt; (nth % 2) 4))

    ;; examples with datasets
    (use &apos;incanter.datasets)
    (def us-arrests (get-dataset :us-arrests))
    (sel us-arrests :cols \&quot;State\&quot;)

    (sel us-arrests :cols [\&quot;State\&quot; \&quot;Murder\&quot;])

&quot;
(fn [mat &amp; options] [(type mat) (keyword? (first options))]))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-sin"/><dl class="library-member-table"><dt class="library-member-name">sin</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([A])</span></div><div class="library-member-docs"><div class="library-member-doc-line">Returns the sine of the elements in the given matrix, sequence or number.</div><div class="library-member-doc-line">   Equivalent to R&apos;s sin function.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-sin&apos;)" id="linkto-membersource-incanter.core-sin">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-sin"><pre>(defn sin 
  &quot;Returns the sine of the elements in the given matrix, sequence or number....&quot;
   ([A] (transform-with A #(Math/sin %) sin)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-solve"/><dl class="library-member-table"><dt class="library-member-name">solve</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([A &amp; B])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a matrix solution if A is square, least squares solution otherwise.</div><div class="library-member-doc-line">  Equivalent to R&apos;s solve function.</div><div class="library-member-doc-line">  </div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (solve (matrix [[2 0 0] [0 2 0] [0 0 2]]))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Matrix_inverse</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-solve&apos;)" id="linkto-membersource-incanter.core-solve">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-solve"><pre>(defn solve 
&quot; Returns a matrix solution if A is square, least squares solution otherwise....&quot;
  ([#^Matrix A &amp; B]
   (if B
    (Matrix. (.solve (DoubleAlgebra.) A (first B)))
    (Matrix. (.inverse (DoubleAlgebra.) A)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-solve-quadratic"/><dl class="library-member-table"><dt class="library-member-name">solve-quadratic</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([a b c])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> </div><div class="library-member-doc-line">  Returns a vector with the solution to x from the quadratic</div><div class="library-member-doc-line">  equation, a*x^2 + b*x + c.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Arguments:</div><div class="library-member-doc-line">    a, b, c: coefficients of a qaudratic equation.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    ;; -2*x^2 + 7*x + 15</div><div class="library-member-doc-line">    (quadratic-formula -2 7 15)</div><div class="library-member-doc-line">    ;; x^2 + -2*x + 1</div><div class="library-member-doc-line">    (quadratic-formula 1 -2 1)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Quadratic_formula</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-solve-quadratic&apos;)" id="linkto-membersource-incanter.core-solve-quadratic">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-solve-quadratic"><pre>(defn solve-quadratic
&quot; ...&quot;
  ([a b c] 
   (let [t1 (- 0 b)
         t2 (sqrt (- (* b b) (* 4 a c)))
         t3 (* 2 a)]
     [(/ (- t1 t2) t3)
      (/ (+ t1 t2) t3)])))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-sqrt"/><dl class="library-member-table"><dt class="library-member-name">sqrt</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([A])</span></div><div class="library-member-docs"><div class="library-member-doc-line">Returns the square-root of the elements in the given matrix, sequence or number.</div><div class="library-member-doc-line">   Equivalent to R&apos;s sqrt function.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-sqrt&apos;)" id="linkto-membersource-incanter.core-sqrt">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-sqrt"><pre>(defn sqrt 
  &quot;Returns the square-root of the elements in the given matrix, sequence or number....&quot;
   ([A] (pow A 1/2)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-sum"/><dl class="library-member-table"><dt class="library-member-name">sum</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x])</span></div><div class="library-member-docs"><div class="library-member-doc-line">Returns the sum of the given sequence.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-sum&apos;)" id="linkto-membersource-incanter.core-sum">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-sum"><pre>(defn sum 
  &quot;Returns the sum of the given sequence.&quot;
  ([x]
    (let [xx (if (or (nil? x) (empty? x)) [0] (to-list x))]
      (DoubleDescriptive/sum (DoubleArrayList. (double-array xx))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-sum-of-squares"/><dl class="library-member-table"><dt class="library-member-name">sum-of-squares</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x])</span></div><div class="library-member-docs"><div class="library-member-doc-line">Returns the sum-of-squares of the given sequence.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-sum-of-squares&apos;)" id="linkto-membersource-incanter.core-sum-of-squares">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-sum-of-squares"><pre>(defn sum-of-squares 
  &quot;Returns the sum-of-squares of the given sequence.&quot;
  ([x]
    (let [xx (if (or (nil? x) (empty? x)) [0] (to-list x))]
      (DoubleDescriptive/sumOfSquares (DoubleArrayList. (double-array xx))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-symmetric-matrix"/><dl class="library-member-table"><dt class="library-member-name">symmetric-matrix</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([data &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns a symmetric matrix from the given data, which represents the lower triangular elements</div><div class="library-member-doc-line">  ordered by row. This is not the inverse of half-vectorize which returns a vector ordered</div><div class="library-member-doc-line">  by columns, unless the :by-row option is set to false.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :by-row (default true) -- if false, make symmetric-behavior the inverse of half-vectorize.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    (use &apos;incanter.core)</div><div class="library-member-doc-line">    (symmetric-matrix [1</div><div class="library-member-doc-line">                       2 3</div><div class="library-member-doc-line">                       4 5 6</div><div class="library-member-doc-line">                       7 8 9 10])</div><div class="library-member-doc-line">   </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (half-vectorize </div><div class="library-member-doc-line">      (symmetric-matrix [1</div><div class="library-member-doc-line">                         2 3</div><div class="library-member-doc-line">                         4 5 6</div><div class="library-member-doc-line">                         7 8 9 10] :by-row false))</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-symmetric-matrix&apos;)" id="linkto-membersource-incanter.core-symmetric-matrix">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-symmetric-matrix"><pre>(defn symmetric-matrix
&quot;...&quot;
  ([data &amp; options]
   (let [opts (if options (apply assoc {} options) nil)
         by-row? (if (false? (:by-row opts)) false true)
         n (count data)
         p (int (second (solve-quadratic 1/2 1/2 (- 0 n))))
         mat (incanter.Matrix. p p 0)
         indices (if by-row?
                   (for [i (range p) j (range p) :when (&lt;= j i)] [i j])
                   (for [i (range p) j (range p) :when (&lt;= i j)] [j i]))]
     (doseq [idx (range n)]
      (let [[i j] (nth indices idx)]
        (.set mat i j (nth data idx))
        (.set mat j i (nth data idx))))
     mat)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-tan"/><dl class="library-member-table"><dt class="library-member-name">tan</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([A])</span></div><div class="library-member-docs"><div class="library-member-doc-line">Returns the tangent of the elements in the given matrix, sequence or number.</div><div class="library-member-doc-line">   Equivalent to R&apos;s tan function.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-tan&apos;)" id="linkto-membersource-incanter.core-tan">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-tan"><pre>(defn tan 
  &quot;Returns the tangent of the elements in the given matrix, sequence or number....&quot;
   ([A] (transform-with A #(Math/tan %) tan)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-to-dummies"/><dl class="library-member-table"><dt class="library-member-name">to-dummies</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([coll])</span></div><div class="library-member-docs"/><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-to-dummies&apos;)" id="linkto-membersource-incanter.core-to-dummies">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-to-dummies"><pre>(defn to-dummies [coll]
  (let [cat-var (categorical-var :data coll)
        levels (:levels cat-var)
        encoded-data (to-levels coll :categorical-var cat-var)
        bit-map (get-dummies (count levels))]
    (for [item encoded-data] (nth bit-map item))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-to-labels"/><dl class="library-member-table"><dt class="library-member-name">to-labels</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([coll cat-var])</span></div><div class="library-member-docs"/><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-to-labels&apos;)" id="linkto-membersource-incanter.core-to-labels">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-to-labels"><pre>(defn to-labels 
&quot;...&quot;
  ([coll cat-var] 
    (let [to-labels (:to-labels cat-var)]
      (for [level coll] (to-labels level)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-to-levels"/><dl class="library-member-table"><dt class="library-member-name">to-levels</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([coll &amp; options])</span></div><div class="library-member-docs"/><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-to-levels&apos;)" id="linkto-membersource-incanter.core-to-levels">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-to-levels"><pre>(defn to-levels 
&quot;...&quot;
  ([coll &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          cat-var (if (:categorical-var opts) (:categorical-var opts) (categorical-var :data coll))
          to-levels (:to-levels cat-var)]
      (for [label coll] (to-levels label)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-to-list"/><dl class="library-member-table"><dt class="library-member-name">to-list</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a list-of-lists if the given matrix is two-dimensional,</div><div class="library-member-doc-line">    and a flat list if the matrix is one-dimensional.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-to-list&apos;)" id="linkto-membersource-incanter.core-to-list">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-to-list"><pre>(defn to-list 
  &quot; Returns a list-of-lists if the given matrix is two-dimensional,...&quot;
 ([#^Matrix mat] 
  (cond
    (and (coll? mat) (not (matrix? mat)))
      mat 
    (= (.columns mat) 1)
      (first (map #(seq %) (seq (.toArray (.viewDice mat)))))
    (= (.rows mat) 1)
      (first (map #(seq %) (seq (.toArray mat))))
    :else
      (map #(seq %) (seq (.toArray mat))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-to-matrix"/><dl class="library-member-table"><dt class="library-member-name">to-matrix</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([dataset &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line">  Converts a dataset into a matrix. Equivalent to R&apos;s as.matrix function</div><div class="library-member-doc-line">   for datasets.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :dummies (default false) -- if true converts non-numeric variables into sets </div><div class="library-member-doc-line">                                of binary dummy variables, otherwise converts</div><div class="library-member-doc-line">                                them into numeric codes.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-to-matrix&apos;)" id="linkto-membersource-incanter.core-to-matrix">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-to-matrix"><pre>(defn to-matrix 
&quot;  Converts a dataset into a matrix. Equivalent to R&apos;s as.matrix function...&quot;
  ([dataset &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          dummies? (if (true? (:dummies opts)) true false)]
      (reduce bind-columns 
              (map #(string-to-categorical dataset % dummies?) 
                    (range (count (keys (:column-names dataset)))))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-to-vect"/><dl class="library-member-table"><dt class="library-member-name">to-vect</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a vector-of-vectors if the given matrix is two-dimensional,</div><div class="library-member-doc-line">    and a flat vector if the matrix is one-dimensional. This is a bit</div><div class="library-member-doc-line">    slower than the to-list function. </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-to-vect&apos;)" id="linkto-membersource-incanter.core-to-vect">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-to-vect"><pre>(defn to-vect  
  &quot; Returns a vector-of-vectors if the given matrix is two-dimensional,...&quot;
 ([#^Matrix mat]
  (into [] (cond
             (= (.columns mat) 1)
              (first (map #(into [] (seq %)) (seq (.toArray (.viewDice mat)))))
             (= (.rows mat) 1)
              (first (map #(into [] (seq %)) (seq (.toArray mat))))
             :else
              (map #(into [] (seq %)) (seq (.toArray mat)))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-trace"/><dl class="library-member-table"><dt class="library-member-name">trace</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the trace of the given matrix.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Matrix_trace</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/colt/matrix/tdouble/algo/DoubleAlgebra.html</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-trace&apos;)" id="linkto-membersource-incanter.core-trace">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-trace"><pre>(defn trace 
&quot; Returns the trace of the given matrix....&quot;
  ([mat] (.trace DoubleAlgebra/DEFAULT mat)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-trans"/><dl class="library-member-table"><dt class="library-member-name">trans</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line">   Returns the transpose of the given matrix. Equivalent to R&apos;s t function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Examples:</div><div class="library-member-doc-line">      (def A (matrix [[1 2 3] </div><div class="library-member-doc-line">                     [4 5 6] </div><div class="library-member-doc-line">                     [7 8 9]]))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (trans A)</div><div class="library-member-doc-line">  </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-trans&apos;)" id="linkto-membersource-incanter.core-trans">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-trans"><pre>(defn #^Matrix trans 
&quot;   Returns the transpose of the given matrix. Equivalent to R&apos;s t function...&quot;
  ([mat]
   (cond 
    (matrix? mat)
      (.viewDice #^Matrix mat)
    (coll? mat)
      (.viewDice #^Matrix (matrix #^double-array mat)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-vectorize"/><dl class="library-member-table"><dt class="library-member-name">vectorize</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the vectorization (i.e. vec) of the given matrix.</div><div class="library-member-doc-line">    The vectorization of an m-by-n matrix A, denoted by vec(A), </div><div class="library-member-doc-line">    is the m*n-by-1 column vector obtain by stacking the columns </div><div class="library-member-doc-line">    of the matrix A on top of one another.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    For instance:</div><div class="library-member-doc-line">      (= (vectorize (matrix [[a b] [c d]])) (matrix [a c b d]))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Examples:</div><div class="library-member-doc-line">      (def A (matrix [[1 2] [3 4]])) </div><div class="library-member-doc-line">      (vectorize A)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    References:</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Vectorization_(mathematics)</div><div class="library-member-doc-line">  </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-vectorize&apos;)" id="linkto-membersource-incanter.core-vectorize">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-vectorize"><pre>(defn vectorize 
  &quot; Returns the vectorization (i.e. vec) of the given matrix....&quot;
  ([mat]
   (mapcat identity (trans mat))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.core-view"/><dl class="library-member-table"><dt class="library-member-name">view</dt><dd><div class="library-member-info"><span class="library-member-type">multi</span> <span class="library-member-arglists"></span></div><div class="library-member-docs"><div class="library-member-doc-line"> This is a general &apos;view&apos; function. When given an Incanter matrix/dataset </div><div class="library-member-doc-line">    or a Clojure numeric collection, it will display it in a Java Swing </div><div class="library-member-doc-line">    JTable. When given an Incanter chart object, it will display it in a new </div><div class="library-member-doc-line">    window. When given a URL string, it will open the location with the </div><div class="library-member-doc-line">    platform&apos;s default web browser.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      (use &apos;(incanter core stats datasets charts))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      ;; view matrices</div><div class="library-member-doc-line">      (def rand-mat (matrix (sample-normal 100) 4))</div><div class="library-member-doc-line">      (view rand-mat)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      ;; view numeric collections</div><div class="library-member-doc-line">      (view [1 2 3 4 5])</div><div class="library-member-doc-line">      (view (sample-normal 100))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      ;; view Incanter datasets</div><div class="library-member-doc-line">      (view (get-dataset :iris))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      ;; convert dataset to matrix, changing Species names to numeric codes</div><div class="library-member-doc-line">      (view (to-matrix (get-dataset :iris)))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      ;; convert dataset to matrix, changing Species names to dummy variables</div><div class="library-member-doc-line">      (view (to-matrix (get-dataset :iris) :dummies true))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      ;; view a chart</div><div class="library-member-doc-line">      (view (histogram (sample-normal 1000)))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      ;; view a URL</div><div class="library-member-doc-line">      (view &quot;http://incanter.org&quot;)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">      ;; view a PNG file</div><div class="library-member-doc-line">      (save (histogram (sample-normal 1000)) &quot;/tmp/norm_hist.png&quot;)</div><div class="library-member-doc-line">      (view &quot;file:///tmp/norm_hist.png&quot;)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.core-view&apos;)" id="linkto-membersource-incanter.core-view">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.core-view"><pre>(defmulti view 
  &quot; This is a general &apos;view&apos; function. When given an Incanter matrix/dataset 
    or a Clojure numeric collection, it will display it in a Java Swing 
    JTable. When given an Incanter chart object, it will display it in a new 
    window. When given a URL string, it will open the location with the 
    platform&apos;s default web browser.

    Examples:

      (use &apos;(incanter core stats datasets charts))

      ;; view matrices
      (def rand-mat (matrix (sample-normal 100) 4))
      (view rand-mat)

      ;; view numeric collections
      (view [1 2 3 4 5])
      (view (sample-normal 100))

      ;; view Incanter datasets
      (view (get-dataset :iris))

      ;; convert dataset to matrix, changing Species names to numeric codes
      (view (to-matrix (get-dataset :iris)))

      ;; convert dataset to matrix, changing Species names to dummy variables
      (view (to-matrix (get-dataset :iris) :dummies true))

      ;; view a chart
      (view (histogram (sample-normal 1000)))

      ;; view a URL
      (view \&quot;http://incanter.org\&quot;)

      ;; view a PNG file
      (save (histogram (sample-normal 1000)) \&quot;/tmp/norm_hist.png\&quot;)
      (view \&quot;file:///tmp/norm_hist.png\&quot;)


&quot;
  (fn [obj &amp; options] (if (and (not (matrix? obj)) 
                               (not (dataset? obj))
                               (coll? obj))
                        ::coll 
                        (type obj))))</pre></div></div></dd></dl></li></ol></div></div><div class="library"><a name="library-incanter.datasets"/><div class="library-name"><span class="library-contents-toggle">[ <a id="library-contents-toggle-incanter.datasets" href="javascript:toggle(&apos;library-contents-incanter.datasets&apos;, &apos;library-contents-toggle-incanter.datasets&apos;, &apos;-&apos;, &apos;+&apos;)">-</a> ] </span>incanter.datasets</div><div class="library-contents" id="library-contents-incanter.datasets"><div class="library-member-links"><a class="lib-member-link" href="#member-incanter.datasets-**datasets**">**datasets**</a> <a class="lib-member-link" href="#member-incanter.datasets-get-dataset">get-dataset</a></div><ol class="library-members"><li class="library-member"><a name="member-incanter.datasets-**datasets**"/><dl class="library-member-table"><dt class="library-member-name">**datasets**</dt><dd><div class="library-member-info"><span class="library-member-type">var</span> <span class="library-member-arglists"></span></div><div class="library-member-docs"/><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.datasets-**datasets**&apos;)" id="linkto-membersource-incanter.datasets-**datasets**">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.datasets-**datasets**"><pre>(def **datasets** 
  { 
   :iris {:filename &quot;data/iris.dat&quot;
          :delim \space
          :header true}
   :cars {:filename &quot;data/cars.dat&quot;
           :delim \space
           :header true}
   :cars-csv {:filename &quot;data/cars.dat&quot;
               :delim \,
               :header true}
   :cars-tdd {:filename &quot;data/cars.dat&quot;
               :delim \tab
               :header true}
   :survey {:filename &quot;data/olsexamp.dat&quot;
            :delim \space
            :header true}
   :us-arrests {:filename &quot;data/us_arrests.dat&quot;
            :delim \,
            :header true}
   :flow-meter {:filename &quot;data/flow_meter.dat&quot;
            :delim \space
            :header true}
   :co2 {:filename &quot;data/co2.csv&quot;
            :delim \,
            :header true}
   :chick-weight {:filename &quot;data/chick_weight.csv&quot;
            :delim \,
            :header true}
   :math-prog {:filename &quot;data/math_prog.csv&quot;
            :delim \,
            :header true}
   :plant-growth {:filename &quot;data/plant_growth.csv&quot;
            :delim \,
            :header true}
   :filip {:filename &quot;data/filip.dat&quot;
            :delim \space
            :header true}
   :pontius {:filename &quot;data/pontius.dat&quot;
            :delim \space
            :header true}
   :longley {:filename &quot;data/longley.dat&quot;
            :delim \space
            :header true}
   :chwirut {:filename &quot;data/Chwirut1.dat&quot;
            :delim \space
            :header true}
   :hair-eye-color {:filename &quot;data/hair_eye_color.csv&quot;
            :delim \,
            :header true}
   :austres {:filename &quot;data/austres.csv&quot;
            :delim \,
            :header true}
   :airline-passengers {:filename &quot;data/airline_passengers.csv&quot;
            :delim \,
            :header true}
   :thurstone {:filename &quot;data/thurstone.dat&quot;
            :delim \tab
            :header true}
  })</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.datasets-get-dataset"/><dl class="library-member-table"><dt class="library-member-name">get-dataset</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([dataset-key &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the sample dataset associated with the given key. Most datasets</div><div class="library-member-doc-line">  are from R&apos;s sample data sets, as are the descriptions below.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :incanter-home -- if the incanter.home property is not set when the JVM is</div><div class="library-member-doc-line">                      started, use the :incanter-home options to provide the</div><div class="library-member-doc-line">                      parent directory of the sample data directory.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Datasets:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :iris -- the Fisher&apos;s or Anderson&apos;s Iris data set gives the</div><div class="library-member-doc-line">             measurements in centimeters of the variables sepal </div><div class="library-member-doc-line">             length and width and petal length and width, </div><div class="library-member-doc-line">             respectively, for 50 flowers from each of 3 species </div><div class="library-member-doc-line">             of iris.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :cars -- The data give the speed of cars and the distances taken </div><div class="library-member-doc-line">              to stop. Note that the data were recorded in the 1920s.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :survey -- survey data used in Scott Lynch&apos;s &apos;Introduction to Applied Bayesian Statistics </div><div class="library-member-doc-line">               and Estimation for Social Scientists&apos;</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :us-arrests -- This data set contains statistics, in arrests per 100,000</div><div class="library-member-doc-line">                   residents for assault, murder, and rape in each of the 50 US</div><div class="library-member-doc-line">                   states in 1973. Also given is the percent of the population living</div><div class="library-member-doc-line">                   in urban areas.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :flow-meter -- flow meter data used in Bland Altman Lancet paper.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :co2 -- has 84 rows and 5 columns of data from an experiment on the cold tolerance </div><div class="library-member-doc-line">            of the grass species _Echinochloa crus-galli_.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :chick-weight -- has 578 rows and 4 columns from an experiment on the effect of diet </div><div class="library-member-doc-line">                     on early growth of chicks.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :plant-growth -- Results from an experiment to compare yields (as measured by dried</div><div class="library-member-doc-line">                     weight of plants) obtained under a control and two different</div><div class="library-member-doc-line">                     treatment conditions.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :pontius -- These data are from a NIST study involving calibration of load cells. </div><div class="library-member-doc-line">                The response variable (y) is the deflection and the predictor variable </div><div class="library-member-doc-line">                (x) is load.</div><div class="library-member-doc-line">                See http://www.itl.nist.gov/div898/strd/lls/data/Pontius.shtml</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :filip -- NIST data set for linear regression certification, </div><div class="library-member-doc-line">              see http://www.itl.nist.gov/div898/strd/lls/data/Filip.shtml</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :longely -- This classic dataset of labor statistics was one of the first used to </div><div class="library-member-doc-line">                test the accuracy of least squares computations. The response variable </div><div class="library-member-doc-line">                (y) is the Total Derived Employment and the predictor variables are GNP </div><div class="library-member-doc-line">                Implicit Price Deflator with Year 1954 = 100 (x1), Gross National Product </div><div class="library-member-doc-line">                (x2), Unemployment (x3), Size of Armed Forces (x4), Non-Institutional </div><div class="library-member-doc-line">                Population Age 14 &amp; Over (x5), and Year (x6).</div><div class="library-member-doc-line">                See http://www.itl.nist.gov/div898/strd/lls/data/Longley.shtml</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :Chwirut -- These data are the result of a NIST study involving ultrasonic calibration. </div><div class="library-member-doc-line">                The response variable is ultrasonic response, and the predictor variable is </div><div class="library-member-doc-line">                metal distance.</div><div class="library-member-doc-line">                See http://www.itl.nist.gov/div898/strd/nls/data/LINKS/DATA/Chwirut1.dat</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :thurstone -- test data for non-linear least squares.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :austres -- Quarterly Time Series of the Number of Australian Residents</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :hair-eye-color -- Hair and eye color of sample of students</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :airline-passengers -- Monthly Airline Passenger Numbers 1949-1960</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :math-prog -- Pass/fail results for a high school mathematics assessment test </div><div class="library-member-doc-line">                  and a freshmen college programming course.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.datasets-get-dataset&apos;)" id="linkto-membersource-incanter.datasets-get-dataset">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.datasets-get-dataset"><pre>(defn get-dataset
&quot; Returns the sample dataset associated with the given key. Most datasets...&quot;
  ([dataset-key &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          incanter-home (if (:incanter-home opts) (:incanter-home opts) (System/getProperty &quot;incanter.home&quot;))
          ds (**datasets** dataset-key)
          filename (if (nil? incanter-home) (ds :filename) (str incanter-home &quot;/&quot; (ds :filename)))
          delim (ds :delim)
          header (ds :header)]
   (read-dataset filename :delim delim :header header))))</pre></div></div></dd></dl></li></ol></div></div><div class="library"><a name="library-incanter.io"/><div class="library-name"><span class="library-contents-toggle">[ <a id="library-contents-toggle-incanter.io" href="javascript:toggle(&apos;library-contents-incanter.io&apos;, &apos;library-contents-toggle-incanter.io&apos;, &apos;-&apos;, &apos;+&apos;)">-</a> ] </span>incanter.io</div><div class="library-contents" id="library-contents-incanter.io"><div class="library-member-links"><a class="lib-member-link" href="#member-incanter.io-read-dataset">read-dataset</a></div><ol class="library-members"><li class="library-member"><a name="member-incanter.io-read-dataset"/><dl class="library-member-table"><dt class="library-member-name">read-dataset</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([filename &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Returns a dataset read from a file.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Options:</div><div class="library-member-doc-line">      :delim (default \,), other options (\tab \space \|  etc)</div><div class="library-member-doc-line">      :quote (default \&quot;) character used for quoting strings</div><div class="library-member-doc-line">      :skip (default 0) the number of lines to skip at the top of the file.</div><div class="library-member-doc-line">      :header (default false) indicates the file has a header line</div><div class="library-member-doc-line">  </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.io-read-dataset&apos;)" id="linkto-membersource-incanter.io-read-dataset">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.io-read-dataset"><pre>(defn read-dataset 
  &quot;
    Returns a dataset read from a file.

    Options:
      :delim (default \\,), other options (\\tab \\space \\|  etc)
      :quote (default \\\&quot;) character used for quoting strings
      :skip (default 0) the number of lines to skip at the top of the file.
      :header (default false) indicates the file has a header line
  &quot;
  ([filename &amp; options] 
   (let [opts (if options (apply assoc {} options) nil)
         delim (if (:delim opts) (:delim opts) \,) ; space delim default
         quote-char (if (:quote opts) (:quote opts) \&quot;)
         skip (if (:skip opts) (:skip opts) 0)
         header? (if (:header opts) (:header opts) false)
         reader (au.com.bytecode.opencsv.CSVReader. 
                    (java.io.FileReader. filename) 
                    delim
                    quote-char
                    skip)
         data-lines (map seq (seq (.readAll reader)))
         raw-data (filter #(&gt; (count %) 0) (map (fn [line] (filter #(not= % &quot;&quot;) line)) data-lines))
         parsed-data (into [] (map (fn [row] (into [] (map #(parse-string %) row))) raw-data))
       ]
    (if header? (dataset (first parsed-data) (rest parsed-data) (dataset parsed-data))))))</pre></div></div></dd></dl></li></ol></div></div><div class="library"><a name="library-incanter.optimize"/><div class="library-name"><span class="library-contents-toggle">[ <a id="library-contents-toggle-incanter.optimize" href="javascript:toggle(&apos;library-contents-incanter.optimize&apos;, &apos;library-contents-toggle-incanter.optimize&apos;, &apos;-&apos;, &apos;+&apos;)">-</a> ] </span>incanter.optimize</div><div class="library-contents" id="library-contents-incanter.optimize"><div class="library-member-links"><a class="lib-member-link" href="#member-incanter.optimize-derivative">derivative</a> <a class="lib-member-link" href="#member-incanter.optimize-gradient">gradient</a> <a class="lib-member-link" href="#member-incanter.optimize-hessian">hessian</a> <a class="lib-member-link" href="#member-incanter.optimize-integrate">integrate</a> <a class="lib-member-link" href="#member-incanter.optimize-non-linear-model">non-linear-model</a></div><ol class="library-members"><li class="library-member"><a name="member-incanter.optimize-derivative"/><dl class="library-member-table"><dt class="library-member-name">derivative</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([f &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns a function that approximates the derivative of the given function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :dx (default 0.0001)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core optimize charts stats))</div><div class="library-member-doc-line">    (defn cube [x] (* x x x))</div><div class="library-member-doc-line">    (def cube-deriv (derivative cube))</div><div class="library-member-doc-line">    (cube-deriv 2) ; value: 12.000600010022566</div><div class="library-member-doc-line">    (cube-deriv 3) ; value: 27.00090001006572</div><div class="library-member-doc-line">    (cube-deriv 4) ; value: 48.00120000993502</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def x (range -3 3 0.1))</div><div class="library-member-doc-line">    (def plot (xy-plot x (map cube x)))</div><div class="library-member-doc-line">    (view plot)</div><div class="library-member-doc-line">    (add-lines plot x (map cube-deriv x))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; get the second derivative function</div><div class="library-member-doc-line">    (def cube-deriv2 (derivative cube-deriv))</div><div class="library-member-doc-line">    (add-lines plot x (map cube-deriv2 x))</div><div class="library-member-doc-line">   </div><div class="library-member-doc-line">    ;; plot the normal pdf and its derivatives</div><div class="library-member-doc-line">    (def plot (xy-plot x (pdf-normal x)))</div><div class="library-member-doc-line">    (view plot)</div><div class="library-member-doc-line">    (def pdf-deriv (derivative pdf-normal))</div><div class="library-member-doc-line">    (add-lines plot x (pdf-deriv x))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; plot the second derivative function</div><div class="library-member-doc-line">    (def pdf-deriv2 (derivative pdf-deriv))</div><div class="library-member-doc-line">    (add-lines plot x (pdf-deriv2 x))</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.optimize-derivative&apos;)" id="linkto-membersource-incanter.optimize-derivative">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.optimize-derivative"><pre>(defn derivative 
&quot;...&quot;
  ([f &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          dx (if (:dx opts) (:dx opts) 0.0001)
          f-prime (fn [x] (div (minus (f (plus x dx)) (f x)) dx))]
      f-prime)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.optimize-gradient"/><dl class="library-member-table"><dt class="library-member-name">gradient</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([f start &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> </div><div class="library-member-doc-line">  Returns a function that calculates a 5-point approximation to </div><div class="library-member-doc-line">  the gradient of the given function. The vector of start values are</div><div class="library-member-doc-line">  used to determine the number of parameters required by the function, and</div><div class="library-member-doc-line">  to scale the step-size. The generated function accepts a vector of </div><div class="library-member-doc-line">  parameter values and a vector of x data points and returns a matrix,</div><div class="library-member-doc-line">  where each row is the gradient evaluated at the corresponding x value.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core optimize datasets charts))</div><div class="library-member-doc-line">    (defn f [theta x] </div><div class="library-member-doc-line">      (+ (nth theta 0) </div><div class="library-member-doc-line">            (div (* x (- (nth theta 1) (nth theta 0)))</div><div class="library-member-doc-line">                 (+ (nth theta 2) x))))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def start [20 200 100])</div><div class="library-member-doc-line">    (def data (to-matrix (get-dataset :thurstone)))</div><div class="library-member-doc-line">    (def x (sel data :cols 1))</div><div class="library-member-doc-line">    (def y (sel data :cols 0))</div><div class="library-member-doc-line">    ;; view the data</div><div class="library-member-doc-line">    (view (scatter-plot x y))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def grad (gradient f start))</div><div class="library-member-doc-line">    (time (doall (grad start x)))</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.optimize-gradient&apos;)" id="linkto-membersource-incanter.optimize-gradient">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.optimize-gradient"><pre>(defn gradient
&quot; ...&quot;
  ([f start &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          tol (if (:tol opts) (:tol opts) 1E-4)
          dx (if (:dx opts) (:dx opts) (mult start tol))
          p (count start)
          e (to-list (identity-matrix p))]
      (fn [theta x]
        (reduce bind-columns
                (for [i (range p)]
                  (let [h (mult (nth e i) dx)]
                    (div 
                      (map + (map (partial f (minus theta (mult 2 h))) x) 
                            (map - (mult 8 (map (partial f (minus theta h)) x))) 
                            (mult 8 (map (partial f (plus theta h)) x)) 
                            (map - (map (partial f (plus theta (mult 2 h))) x))) 
                      (* 12 (nth dx i))))))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.optimize-hessian"/><dl class="library-member-table"><dt class="library-member-name">hessian</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([f start &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a function that calculates an approximation to the Hessian matrix </div><div class="library-member-doc-line">  of the given function. The vector of start values are used to determine </div><div class="library-member-doc-line">  the number of parameters required by the function, and to scale the </div><div class="library-member-doc-line">  step-size. The generated function accepts a vector of </div><div class="library-member-doc-line">  parameter values and a vector of x data points and returns a matrix,</div><div class="library-member-doc-line">  where each row with p*(p+1)/2 columns, one for each unique entry in</div><div class="library-member-doc-line">  the Hessian evaluated at the corresponding x value.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core optimize datasets charts))</div><div class="library-member-doc-line">    (defn f [theta x] </div><div class="library-member-doc-line">      (+ (nth theta 0) </div><div class="library-member-doc-line">            (div (* x (- (nth theta 1) (nth theta 0)))</div><div class="library-member-doc-line">                 (+ (nth theta 2) x))))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def start [20 200 100])</div><div class="library-member-doc-line">    (def data (to-matrix (get-dataset :thurstone)))</div><div class="library-member-doc-line">    (def x (sel data :cols 1))</div><div class="library-member-doc-line">    (def y (sel data :cols 0))</div><div class="library-member-doc-line">    ;; view the data</div><div class="library-member-doc-line">    (view (scatter-plot x y))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (time (def hess (hessian f start)))</div><div class="library-member-doc-line">    (time (doall (hess start x)))</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.optimize-hessian&apos;)" id="linkto-membersource-incanter.optimize-hessian">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.optimize-hessian"><pre>(defn hessian
&quot; Returns a function that calculates an approximation to the Hessian matrix ...&quot;
  ([f start &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          tol (if (:tol opts) (:tol opts) 1E-4)
          dx (if (:dx opts) (:dx opts) (mult start tol))
          p (count start)
          e (to-list (identity-matrix p))]
      (fn [theta x]
        (reduce bind-columns
                (for [i (range p) j (range p) :when (&lt;= i j)]
                  (let [hi (mult (nth e i) dx)
                        hj (mult (nth e j) dx)
                        hij (mult (plus (nth e i) (nth e j)) dx)]
                    (div 
                      (map +
                        (map - (map (partial f theta) x) 
                               (map (partial f (plus theta hi)) x) 
                               (map (partial f (plus theta hj)) x)) 
                        (map (partial f (plus theta hij)) x))
                      (* (nth dx i) (nth dx j))))))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.optimize-integrate"/><dl class="library-member-table"><dt class="library-member-name">integrate</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([f a b])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Integrate a function f from a to b</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (defn f1 [x] 1)</div><div class="library-member-doc-line">    (defn f2 [x] (Math/pow x 2))</div><div class="library-member-doc-line">    (defn f3 [x] (* x (Math/exp (Math/pow x 2))))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (integrate f1 0 5)</div><div class="library-member-doc-line">    (integrate f2 0 1)</div><div class="library-member-doc-line">    (integrate f3 0 1)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; normal distribution</div><div class="library-member-doc-line">    (def std 1)</div><div class="library-member-doc-line">    (def mu 0)</div><div class="library-member-doc-line">    (defn normal [x]</div><div class="library-member-doc-line">      (/ 1                   </div><div class="library-member-doc-line">        (* (* std (Math/sqrt (* 2 Math/PI)))</div><div class="library-member-doc-line">          (Math/exp (/ (Math/pow (- (- x mu)) 2)</div><div class="library-member-doc-line">          (* 2 (Math/pow std 2)))))))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (integrate normal 1.96 10)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Reference:</div><div class="library-member-doc-line">    http://jng.imagine27.com/articles/2009-04-09-161839_integral_calculus_in_lambda_calculus_lisp.html</div><div class="library-member-doc-line">    http://iam.elbenshira.com/archives/151_integral-calculus-in-haskell/</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.optimize-integrate&apos;)" id="linkto-membersource-incanter.optimize-integrate">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.optimize-integrate"><pre>(defn integrate 
&quot; Integrate a function f from a to b...&quot;
  ([f a b]
    (let [small-dx 0.0001
          integrate-gen (fn [f x b dx sum]
                          (if (&gt; x b)
                            sum
                            (recur f (+ x dx) b dx (+ sum (* (f x) dx)))))]
      (integrate-gen f a b small-dx 0))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.optimize-non-linear-model"/><dl class="library-member-table"><dt class="library-member-name">non-linear-model</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([f y x start &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> </div><div class="library-member-doc-line">  Determine the nonlinear least-squares estimates of the</div><div class="library-member-doc-line">  parameters of a nonlinear model. </div><div class="library-member-doc-line">  Based on R&apos;s nls (non-linear least squares) function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Arguments:</div><div class="library-member-doc-line">    f -- model function, takes two argumetns the first a list of parameters</div><div class="library-member-doc-line">         that are to be estimated, and an x value.</div><div class="library-member-doc-line">    y -- sequence of dependent data</div><div class="library-member-doc-line">    x -- sequence of independent data</div><div class="library-member-doc-line">    start -- start values for the parameters to be estimated</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :method (default :gauss-newton) other option :newton-raphson</div><div class="library-member-doc-line">    :tol (default 1E-5) </div><div class="library-member-doc-line">    :max-iter (default 200)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns: a hash-map containing the following fields:</div><div class="library-member-doc-line">    :method -- the method used</div><div class="library-member-doc-line">    :coefs  -- the parameter estimates</div><div class="library-member-doc-line">    :gradient  -- the estimated gradient</div><div class="library-member-doc-line">    :hessian -- the estimated hessian, if available</div><div class="library-member-doc-line">    :iterations -- the number of iterations performed</div><div class="library-member-doc-line">    :fitted -- the fitted values of y (i.e. y-hat)</div><div class="library-member-doc-line">    :rss -- the residual sum-of-squares</div><div class="library-member-doc-line">    :x -- the independent data values</div><div class="library-member-doc-line">    :y -- the dependent data values</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; example 1</div><div class="library-member-doc-line">    (use &apos;(incanter core optimize datasets charts))</div><div class="library-member-doc-line">    ;; define the Michaelis-Menton model function</div><div class="library-member-doc-line">    ;; y = a + (b - a)*x/(c + x)</div><div class="library-member-doc-line">    (defn f [theta x] </div><div class="library-member-doc-line">      (let [[a b c] theta]</div><div class="library-member-doc-line">        (plus a (div (mult x (minus b a)) (plus c x)))))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def start [20 200 100])</div><div class="library-member-doc-line">    (def data (to-matrix (get-dataset :thurstone)))</div><div class="library-member-doc-line">    (def x (sel data :cols 1))</div><div class="library-member-doc-line">    (def y (sel data :cols 0))</div><div class="library-member-doc-line">    ;; view the data</div><div class="library-member-doc-line">    (def plot (scatter-plot x y))</div><div class="library-member-doc-line">    (view plot)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def nlm (non-linear-model f y x start))</div><div class="library-member-doc-line">    (add-lines plot x (:fitted nlm))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; example 2</div><div class="library-member-doc-line">    (use &apos;(incanter core optimize datasets charts))</div><div class="library-member-doc-line">    ;; Chwirut data set from NIST</div><div class="library-member-doc-line">    ;; http://www.itl.nist.gov/div898/strd/nls/data/LINKS/DATA/Chwirut1.dat</div><div class="library-member-doc-line">    (def data (to-matrix (get-dataset :chwirut)))</div><div class="library-member-doc-line">    (def x (sel data :cols 1))</div><div class="library-member-doc-line">    (def y (sel data :cols 0))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; define model function: y = exp(-b1*x)/(b2+b3*x) + e</div><div class="library-member-doc-line">    (defn f [theta x]</div><div class="library-member-doc-line">      (let [[b1 b2 b3] theta]</div><div class="library-member-doc-line">        (div (exp (mult (minus b1) x)) (plus b2 (mult b3 x)))))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def plot (scatter-plot x y :legend true))</div><div class="library-member-doc-line">    (view plot)</div><div class="library-member-doc-line"> </div><div class="library-member-doc-line">    ;; the newton-raphson algorithm fails to converge to the correct solution </div><div class="library-member-doc-line">    ;; using first set of start values from NIST, but the default gauss-newton </div><div class="library-member-doc-line">    ;; algorith converges to the correct solution.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def start1 [0.1 0.01 0.02])</div><div class="library-member-doc-line">    (add-lines plot x (f start1 x))</div><div class="library-member-doc-line">    (def nlm1 (non-linear-model f y x start1))</div><div class="library-member-doc-line">    (add-lines plot x (:fitted nlm1))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; both algorithms converges with second set of start values from NIST</div><div class="library-member-doc-line">    (def start2 [0.15 0.008 0.010])</div><div class="library-member-doc-line">    (add-lines plot x (f start2 x))</div><div class="library-member-doc-line">    (def nlm2 (non-linear-model f y x start2))</div><div class="library-member-doc-line">    (add-lines plot x (:fitted nlm2))</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.optimize-non-linear-model&apos;)" id="linkto-membersource-incanter.optimize-non-linear-model">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.optimize-non-linear-model"><pre>(defn non-linear-model
&quot; ...&quot;
  ([f y x start &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          method (if (:method opts) (:method opts) :guass-newton) ;; other option is :newton-raphson
          tol (if (:tol opts) (:tol opts) 1E-5)
          max-iter (if (:max-iter opts) (:max-iter opts) 200)
          nls (if (= method :newton-raphson)
                (nls-newton-raphson f (gradient f start) (hessian f start) start x y :tol tol :max-iter max-iter)
                (nls-gauss-newton f (gradient f start) start x y :tol tol :max-iter max-iter))
          fitted (map #(f (:theta nls) %) x)]
      {:method method
       :coefs (:theta nls)
       :gradient (:gradient nls)
       :hessian (:hessian nls)
       :iterations (:iterations nls)
       :rss (:rss nls)
       :fitted fitted
       :x x
       :y y})))</pre></div></div></dd></dl></li></ol></div></div><div class="library"><a name="library-incanter.som"/><div class="library-name"><span class="library-contents-toggle">[ <a id="library-contents-toggle-incanter.som" href="javascript:toggle(&apos;library-contents-incanter.som&apos;, &apos;library-contents-toggle-incanter.som&apos;, &apos;-&apos;, &apos;+&apos;)">-</a> ] </span>incanter.som</div><div class="library-contents" id="library-contents-incanter.som"><div class="library-member-links"><a class="lib-member-link" href="#member-incanter.som-som-batch-train">som-batch-train</a></div><ol class="library-members"><li class="library-member"><a name="member-incanter.som-som-batch-train"/><dl class="library-member-table"><dt class="library-member-name">som-batch-train</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([data &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Performs BL-SOM (batch-learning self organizing map) learning on </div><div class="library-member-doc-line">  the given data, returning a hashmap containing resulting BL-SOM </div><div class="library-member-doc-line">  values.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Arguments:</div><div class="library-member-doc-line">    data -- data matrix</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :cycles -- number of cycles of learning</div><div class="library-member-doc-line">    :alpha -- initial value of alpha learning parameter</div><div class="library-member-doc-line">    :beta -- initial value of beta learning parameter</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns: A hashmap containing the following fields:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    :fit -- array of fitness values for each cycle of SOM learning</div><div class="library-member-doc-line">    :weights -- hashmap of weight vectors, keyed by lattice indices</div><div class="library-member-doc-line">    :sets -- hashmap mapping data elements to lattice nodes</div><div class="library-member-doc-line">             (key lattice index) (value list of row indices from data)</div><div class="library-member-doc-line">    :dims -- dimensions of SOM lattice</div><div class="library-member-doc-line">    :data-means -- column means of input data matrix</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core som stats charts datasets))</div><div class="library-member-doc-line">    (def data (to-matrix (sel (get-dataset :iris) </div><div class="library-member-doc-line">                           :cols [&quot;Sepal.Length&quot; &quot;Sepal.Width&quot; &quot;Petal.Length&quot; &quot;Petal.Width&quot;])))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def som (som-batch-train data :cycles 10 :alpha 0.5 :beta 3))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; plot the fitness for each cycle of training</div><div class="library-member-doc-line">    (view (xy-plot (range (count (:fit som))) (:fit som)))</div><div class="library-member-doc-line">    ;; view indices of data items in each cell</div><div class="library-member-doc-line">    (:sets som)</div><div class="library-member-doc-line">    ;; view the species in each cell</div><div class="library-member-doc-line">    (doseq [rws (vals (:sets som))] </div><div class="library-member-doc-line">      (println (sel (get-dataset :iris) :cols &quot;Species&quot; :rows rws) \newline)) </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; plot the means of the data vectors in each cell/cluster</div><div class="library-member-doc-line">    (def cell-means (map #(map mean (trans (sel data :rows ((:sets som) %)))) (keys (:sets som))))</div><div class="library-member-doc-line">    (def x (range (ncol data)))</div><div class="library-member-doc-line">    (doto (xy-plot x (first cell-means))</div><div class="library-member-doc-line">          view</div><div class="library-member-doc-line">          (add-lines x (nth cell-means 1))</div><div class="library-member-doc-line">          (add-lines x (nth cell-means 2)))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Self-organizing_map</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.som-som-batch-train&apos;)" id="linkto-membersource-incanter.som-som-batch-train">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.som-som-batch-train"><pre>(defn som-batch-train 
&quot; Performs BL-SOM (batch-learning self organizing map) learning on 
  the given data, returning a hashmap containing resulting BL-SOM 
  values.


  Arguments:
    data -- data matrix

  Options:
    :cycles -- number of cycles of learning
    :alpha -- initial value of alpha learning parameter
    :beta -- initial value of beta learning parameter


  Returns: A hashmap containing the following fields:

    :fit -- array of fitness values for each cycle of SOM learning
    :weights -- hashmap of weight vectors, keyed by lattice indices
    :sets -- hashmap mapping data elements to lattice nodes
             (key lattice index) (value list of row indices from data)
    :dims -- dimensions of SOM lattice
    :data-means -- column means of input data matrix


  Examples:

    (use &apos;(incanter core som stats charts datasets))
    (def data (to-matrix (sel (get-dataset :iris) 
                           :cols [\&quot;Sepal.Length\&quot; \&quot;Sepal.Width\&quot; \&quot;Petal.Length\&quot; \&quot;Petal.Width\&quot;])))

    (def som (som-batch-train data :cycles 10 :alpha 0.5 :beta 3))

    ;; plot the fitness for each cycle of training
    (view (xy-plot (range (count (:fit som))) (:fit som)))
    ;; view indices of data items in each cell
    (:sets som)
    ;; view the species in each cell
    (doseq [rws (vals (:sets som))] 
      (println (sel (get-dataset :iris) :cols \&quot;Species\&quot; :rows rws) \\newline)) 

    ;; plot the means of the data vectors in each cell/cluster
    (def cell-means (map #(map mean (trans (sel data :rows ((:sets som) %)))) (keys (:sets som))))
    (def x (range (ncol data)))
    (doto (xy-plot x (first cell-means))
          view
          (add-lines x (nth cell-means 1))
          (add-lines x (nth cell-means 2)))


  References:

    http://en.wikipedia.org/wiki/Self-organizing_map

&quot;
  ([data &amp; options]
   (let [opts (if options (apply assoc {} options) nil)
         alpha-init (if (:alpha opts) (:alpha opts) 0.5)
         beta-init (if (:beta opts) (:beta opts) 3)
         total-cycles (if (:cycles opts) (:cycles opts) 10)]
    (loop [r 1 som (som-initialize-linear data) fit []]
      (if (= r total-cycles)
        (assoc som :fit fit)
        (let [new-som (som-update-weights r total-cycles (som-update-cells data som)
                                          alpha-init beta-init)]
          (recur (inc r) new-som (conj fit (som-fitness data new-som)))))))))</pre></div></div></dd></dl></li></ol></div></div><div class="library"><a name="library-incanter.stats"/><div class="library-name"><span class="library-contents-toggle">[ <a id="library-contents-toggle-incanter.stats" href="javascript:toggle(&apos;library-contents-incanter.stats&apos;, &apos;library-contents-toggle-incanter.stats&apos;, &apos;-&apos;, &apos;+&apos;)">-</a> ] </span>incanter.stats</div><div class="library-contents" id="library-contents-incanter.stats"><div class="library-member-links"><a class="lib-member-link" href="#member-incanter.stats-cdf-beta">cdf-beta</a> <a class="lib-member-link" href="#member-incanter.stats-cdf-binomial">cdf-binomial</a> <a class="lib-member-link" href="#member-incanter.stats-cdf-chisq">cdf-chisq</a> <a class="lib-member-link" href="#member-incanter.stats-cdf-exp">cdf-exp</a> <a class="lib-member-link" href="#member-incanter.stats-cdf-f">cdf-f</a> <a class="lib-member-link" href="#member-incanter.stats-cdf-gamma">cdf-gamma</a> <a class="lib-member-link" href="#member-incanter.stats-cdf-neg-binomial">cdf-neg-binomial</a> <a class="lib-member-link" href="#member-incanter.stats-cdf-normal">cdf-normal</a> <a class="lib-member-link" href="#member-incanter.stats-cdf-poisson">cdf-poisson</a> <a class="lib-member-link" href="#member-incanter.stats-cdf-t">cdf-t</a> <a class="lib-member-link" href="#member-incanter.stats-cdf-uniform">cdf-uniform</a> <a class="lib-member-link" href="#member-incanter.stats-chisq-test">chisq-test</a> <a class="lib-member-link" href="#member-incanter.stats-correlation">correlation</a> <a class="lib-member-link" href="#member-incanter.stats-covariance">covariance</a> <a class="lib-member-link" href="#member-incanter.stats-cumulative-mean">cumulative-mean</a> <a class="lib-member-link" href="#member-incanter.stats-detabulate">detabulate</a> <a class="lib-member-link" href="#member-incanter.stats-indicator">indicator</a> <a class="lib-member-link" href="#member-incanter.stats-kurtosis">kurtosis</a> <a class="lib-member-link" href="#member-incanter.stats-linear-model">linear-model</a> <a class="lib-member-link" href="#member-incanter.stats-mean">mean</a> <a class="lib-member-link" href="#member-incanter.stats-median">median</a> <a class="lib-member-link" href="#member-incanter.stats-pdf-beta">pdf-beta</a> <a class="lib-member-link" href="#member-incanter.stats-pdf-binomial">pdf-binomial</a> <a class="lib-member-link" href="#member-incanter.stats-pdf-chisq">pdf-chisq</a> <a class="lib-member-link" href="#member-incanter.stats-pdf-exp">pdf-exp</a> <a class="lib-member-link" href="#member-incanter.stats-pdf-f">pdf-f</a> <a class="lib-member-link" href="#member-incanter.stats-pdf-gamma">pdf-gamma</a> <a class="lib-member-link" href="#member-incanter.stats-pdf-neg-binomial">pdf-neg-binomial</a> <a class="lib-member-link" href="#member-incanter.stats-pdf-normal">pdf-normal</a> <a class="lib-member-link" href="#member-incanter.stats-pdf-poisson">pdf-poisson</a> <a class="lib-member-link" href="#member-incanter.stats-pdf-t">pdf-t</a> <a class="lib-member-link" href="#member-incanter.stats-pdf-uniform">pdf-uniform</a> <a class="lib-member-link" href="#member-incanter.stats-permute">permute</a> <a class="lib-member-link" href="#member-incanter.stats-principal-components">principal-components</a> <a class="lib-member-link" href="#member-incanter.stats-quantile">quantile</a> <a class="lib-member-link" href="#member-incanter.stats-quantile-normal">quantile-normal</a> <a class="lib-member-link" href="#member-incanter.stats-quantile-t">quantile-t</a> <a class="lib-member-link" href="#member-incanter.stats-sample">sample</a> <a class="lib-member-link" href="#member-incanter.stats-sample-beta">sample-beta</a> <a class="lib-member-link" href="#member-incanter.stats-sample-binomial">sample-binomial</a> <a class="lib-member-link" href="#member-incanter.stats-sample-chisq">sample-chisq</a> <a class="lib-member-link" href="#member-incanter.stats-sample-exp">sample-exp</a> <a class="lib-member-link" href="#member-incanter.stats-sample-gamma">sample-gamma</a> <a class="lib-member-link" href="#member-incanter.stats-sample-multivariate-normal">sample-multivariate-normal</a> <a class="lib-member-link" href="#member-incanter.stats-sample-neg-binomial">sample-neg-binomial</a> <a class="lib-member-link" href="#member-incanter.stats-sample-normal">sample-normal</a> <a class="lib-member-link" href="#member-incanter.stats-sample-permutations">sample-permutations</a> <a class="lib-member-link" href="#member-incanter.stats-sample-poisson">sample-poisson</a> <a class="lib-member-link" href="#member-incanter.stats-sample-t">sample-t</a> <a class="lib-member-link" href="#member-incanter.stats-sample-uniform">sample-uniform</a> <a class="lib-member-link" href="#member-incanter.stats-sample-wishart">sample-wishart</a> <a class="lib-member-link" href="#member-incanter.stats-sd">sd</a> <a class="lib-member-link" href="#member-incanter.stats-skewness">skewness</a> <a class="lib-member-link" href="#member-incanter.stats-sweep">sweep</a> <a class="lib-member-link" href="#member-incanter.stats-t-test">t-test</a> <a class="lib-member-link" href="#member-incanter.stats-tabulate">tabulate</a> <a class="lib-member-link" href="#member-incanter.stats-variance">variance</a></div><ol class="library-members"><li class="library-member"><a name="member-incanter.stats-cdf-beta"/><dl class="library-member-table"><dt class="library-member-name">cdf-beta</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Beta cdf of the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. This is equivalent to R&apos;s pbeta function. </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :alpha (default 1) </div><div class="library-member-doc-line">    :beta (default 1)</div><div class="library-member-doc-line">    :lower-tail (default true)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-beta and sample-beta</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Beta.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Beta_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Cumulative_distribution_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (cdf-beta 0.5 :alpha 1 :beta 2)</div><div class="library-member-doc-line">      (cdf-beta 0.5 :alpha 1 :beta 2 :lower-tail false)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-cdf-beta&apos;)" id="linkto-membersource-incanter.stats-cdf-beta">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-cdf-beta"><pre>(defn cdf-beta
&quot; Returns the Beta cdf of the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          alpha (if (:alpha opts) (:alpha opts) 1)
          beta (if (:beta opts) (:beta opts) 1)
          lower-tail? (if (false? (:lower-tail opts)) false true)
          cdf-fx (if lower-tail?
                  (fn [x1] (Probability/beta alpha beta x1))
                  (fn [x1] (- 1 (Probability/betaComplemented alpha beta x1))))]
      (if (coll? x)
        (map cdf-fx x)
        (cdf-fx x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-cdf-binomial"/><dl class="library-member-table"><dt class="library-member-name">cdf-binomial</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Bionomial cdf of the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. Same as R&apos;s pbinom</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :size (default 1) </div><div class="library-member-doc-line">    :prob (default 1/2)</div><div class="library-member-doc-line">    :lower-tail (default true)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-binomial and sample-binomial</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Binomial.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Binomial_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Cumulative_distribution_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (cdf-binomial 10 :prob 1/4 :size 20)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-cdf-binomial&apos;)" id="linkto-membersource-incanter.stats-cdf-binomial">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-cdf-binomial"><pre>(defn cdf-binomial
&quot; Returns the Bionomial cdf of the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          n (if (number? (:size opts)) (:size opts) 1)
          p (if (number? (:prob opts)) (:prob opts) 1/2)
          lower-tail? (if (false? (:lower-tail opts)) false true)
          cdf-fx (if lower-tail?
                  (fn [x1] (Probability/binomial x1 n p))
                  (fn [x1] (Probability/binomialComplemented x1 n p)))]
      (if (coll? x)
        (map cdf-fx x)
        (cdf-fx x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-cdf-chisq"/><dl class="library-member-table"><dt class="library-member-name">cdf-chisq</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Chi Square cdf of the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. Same as R&apos;s pchisq function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :df (default 1) </div><div class="library-member-doc-line">    :lower-tail (default true) </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-chisq and sample-chisq</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/ChiSquare.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Chi_square_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Cumulative_distribution_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (cdf-chisq 5.0 :df 2)</div><div class="library-member-doc-line">      (cdf-chisq 5.0 :df 2 :lower-tail false)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-cdf-chisq&apos;)" id="linkto-membersource-incanter.stats-cdf-chisq">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-cdf-chisq"><pre>(defn cdf-chisq
&quot; Returns the Chi Square cdf of the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          df (if (number? (:df opts)) (:df opts) 1)
          lower-tail? (if (false? (:lower-tail opts)) false true)
          cdf-fx (if lower-tail?
                  (fn [x1] (Probability/chiSquare df x1))
                  (fn [x1] (Probability/chiSquareComplemented df x1)))]
      (if (coll? x)
        (map cdf-fx x)
        (cdf-fx x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-cdf-exp"/><dl class="library-member-table"><dt class="library-member-name">cdf-exp</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Exponential cdf of the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. Same as R&apos;s pexp</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :rate (default 1) </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-exp and sample-exp</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Exponential.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Exponential_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Cumulative_distribution_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (cdf-exp 2.0 :rate 1/2)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-cdf-exp&apos;)" id="linkto-membersource-incanter.stats-cdf-exp">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-cdf-exp"><pre>(defn cdf-exp
&quot; Returns the Exponential cdf of the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          rate (if (number? (:rate opts)) (:rate opts) 1)
          dist (Exponential. rate (DoubleMersenneTwister.))]
      (if (coll? x)
        (map #(.cdf dist %) x)
        (.cdf dist x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-cdf-f"/><dl class="library-member-table"><dt class="library-member-name">cdf-f</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the F-distribution cdf of the given value, x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. This is equivalent to R&apos;s pf function. </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :df1 (default 1) </div><div class="library-member-doc-line">    :df2 (default 1)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-f and quantile-f</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/F_distribution</div><div class="library-member-doc-line">      http://mathworld.wolfram.com/F-Distribution.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Cumulative_distribution_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (cdf-f 1.0 :df1 5 :df2 2)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-cdf-f&apos;)" id="linkto-membersource-incanter.stats-cdf-f">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-cdf-f"><pre>(defn cdf-f 
&quot; Returns the F-distribution cdf of the given value, x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          lower-tail? (if (false? (:lower-tail opts)) false true)
          df1 (if (:df1 opts) (:df1 opts) 1)
          df2 (if (:df2 opts) (:df2 opts) 1)
          cdf-fx (if lower-tail?
                   (fn [x1] (regularized-beta 
                              (/ (* df1 x1) (+ df2 (* df1 x1)))
                              (/ df1 2)
                              (/ df2 2)))
                   (fn [x1] (- 1 (regularized-beta 
                                   (/ (* df1 x1) (+ df2 (* df1 x1)))
                                   (/ df1 2)
                                   (/ df2 2)))))
         ]
      (if (coll? x)
        (map cdf-fx x)
        (cdf-fx x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-cdf-gamma"/><dl class="library-member-table"><dt class="library-member-name">cdf-gamma</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Gamma cdf for the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. This is equivalent to R&apos;s pgamma function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :shape (default 1) </div><div class="library-member-doc-line">    :rate (default 1)</div><div class="library-member-doc-line">    :lower-tail (default true)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-gamma and sample-gamma</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Gamma.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Gamma_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Cumulative_distribution_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (cdf-gamma 10 :shape 1 :rate 2)</div><div class="library-member-doc-line">      (cdf-gamma 3 :shape 1 :lower-tail false)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-cdf-gamma&apos;)" id="linkto-membersource-incanter.stats-cdf-gamma">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-cdf-gamma"><pre>(defn cdf-gamma
&quot; Returns the Gamma cdf for the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          shape (if (number? (:shape opts)) (:shape opts) 1)
          rate (if (number? (:rate opts)) (:rate opts) 1)
          lower-tail? (if (false? (:lower-tail opts)) false true) 
          cdf-fx (if lower-tail?
                  (fn [x1] (Probability/gamma rate shape x1))
                  (fn [x1] (Probability/gammaComplemented rate shape x1)))]
      (if (coll? x)
        (map cdf-fx x)
        (cdf-fx x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-cdf-neg-binomial"/><dl class="library-member-table"><dt class="library-member-name">cdf-neg-binomial</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Negative Binomial cdf of the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. Same as R&apos;s dnbinom</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :size (default 10) </div><div class="library-member-doc-line">    :prob (default 1/2)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      cdf-neg-binomial and sample-neg-binomial</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/NegativeBinomial.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Negative_binomial_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Cumulative_distribution_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (cdf-neg-binomial 10 :prob 1/2 :size 20)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-cdf-neg-binomial&apos;)" id="linkto-membersource-incanter.stats-cdf-neg-binomial">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-cdf-neg-binomial"><pre>(defn cdf-neg-binomial
&quot; Returns the Negative Binomial cdf of the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          size (if (number? (:size opts)) (:size opts) 10)
          prob (if (number? (:prob opts)) (:prob opts) 1/2)
          lower-tail? (if (false? (:lower-tail opts)) false true)
          cdf-fx (if lower-tail?
                  (fn [x1] (Probability/negativeBinomial x1 size prob))
                  (fn [x1] (Probability/negativeBinomialComplemented x1 size prob)))]
      (if (coll? x)
        (map cdf-fx x)
        (cdf-fx x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-cdf-normal"/><dl class="library-member-table"><dt class="library-member-name">cdf-normal</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Normal cdf of the given value, x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. This is equivalent to R&apos;s pnorm function. </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :mean (default 0) </div><div class="library-member-doc-line">    :sd (default 1)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-normal, quantile-normal, sample-normal</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Normal.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Normal_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Cumulative_distribution_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (cdf-normal 1.96 :mean -2 :sd (sqrt 0.5))</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-cdf-normal&apos;)" id="linkto-membersource-incanter.stats-cdf-normal">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-cdf-normal"><pre>(defn cdf-normal
&quot; Returns the Normal cdf of the given value, x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          mean (if (:mean opts) (:mean opts) 0)
          sd (if (:sd opts) (:sd opts) 1)
          dist (Normal. mean sd (DoubleMersenneTwister.))] 
      (if (coll? x)
        (map #(.cdf dist %) x)
        (.cdf dist x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-cdf-poisson"/><dl class="library-member-table"><dt class="library-member-name">cdf-poisson</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Poisson cdf of the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. Same as R&apos;s ppois</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :lambda (default 1) </div><div class="library-member-doc-line">    :lower-tail (default true)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      cdf-poisson and sample-poisson</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Poisson.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Poisson_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Cumulative_distribution_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (cdf-poisson 5 :lambda 10)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-cdf-poisson&apos;)" id="linkto-membersource-incanter.stats-cdf-poisson">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-cdf-poisson"><pre>(defn cdf-poisson
&quot; Returns the Poisson cdf of the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          lambda (if (number? (:lambda opts)) (:lambda opts) 1)
          lower-tail? (if (false? (:lower-tail opts)) false true)
          cdf-fx (if lower-tail?
                  (fn [x1] (Probability/poisson x1 lambda))
                  (fn [x1] (Probability/poissonComplemented x1 lambda)))]
      (if (coll? x)
        (map cdf-fx x)
        (cdf-fx x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-cdf-t"/><dl class="library-member-table"><dt class="library-member-name">cdf-t</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Student&apos;s t cdf for the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. Same as R&apos;s pt function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :df (default 1) </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-t, quantile-t, and sample-t</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/StudentT.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Student-t_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Cumulative_distribution_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (cdf-t 1.2 :df 10)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-cdf-t&apos;)" id="linkto-membersource-incanter.stats-cdf-t">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-cdf-t"><pre>(defn cdf-t
&quot; Returns the Student&apos;s t cdf for the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          df (if (number? (:df opts)) (:df opts) 1)
          lower-tail? (if (false? (:lower-tail opts)) false true)
          cdf-fx (if lower-tail?
                  (fn [x1] (Probability/studentT df x1))
                  (fn [x1] (- 1 (Probability/studentT df x1))))]
      (if (coll? x)
        (map cdf-fx x)
        (cdf-fx x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-cdf-uniform"/><dl class="library-member-table"><dt class="library-member-name">cdf-uniform</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Uniform cdf of the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. This is equivalent to R&apos;s punif function. </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :min (default 0) </div><div class="library-member-doc-line">    :max (default 1)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-uniform and sample-uniform</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/DoubleUniform.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Uniform_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Cumulative_distribution_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (cdf-uniform 5)</div><div class="library-member-doc-line">      (cdf-uniform 5 :min 1 :max 10)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-cdf-uniform&apos;)" id="linkto-membersource-incanter.stats-cdf-uniform">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-cdf-uniform"><pre>(defn cdf-uniform 
&quot; Returns the Uniform cdf of the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          min (double (if (:min opts) (:min opts) 0.0))
          max (double (if (:max opts) (:max opts) 1.0))
          dist (DoubleUniform. min max (DoubleMersenneTwister.))]
      (if (coll? x)
        (map #(.cdf dist %) x)
        (.cdf dist x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-chisq-test"/><dl class="library-member-table"><dt class="library-member-name">chisq-test</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([&amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> </div><div class="library-member-doc-line">  Performs chi-squared contingency table tests and goodness-of-fit tests.</div><div class="library-member-doc-line">  </div><div class="library-member-doc-line">  If the optional argument :y is not provided then a goodness-of-fit test</div><div class="library-member-doc-line">  is performed. In this case, the hypothesis tested is whether the </div><div class="library-member-doc-line">  population probabilities equal those in :probs, or are all equal if </div><div class="library-member-doc-line">  :probs is not given.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  If :y is provided, it must be a sequence of integers that is the</div><div class="library-member-doc-line">  same length as x. A contingency table is computed from x and :y. </div><div class="library-member-doc-line">  Then, Pearson&apos;s chi-squared test of the null hypothesis that the joint</div><div class="library-member-doc-line">  distribution of the cell counts in a 2-dimensional contingency</div><div class="library-member-doc-line">  table is the product of the row and column marginals is performed.</div><div class="library-member-doc-line">  By default the Yates&apos; continuity correction for 2x2 contingency</div><div class="library-member-doc-line">  tables is performed, this can be disabled by setting the :correct </div><div class="library-member-doc-line">  option to false.</div><div class="library-member-doc-line">  </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :x -- a sequence of numbers.</div><div class="library-member-doc-line">    :y -- a sequence of numbers</div><div class="library-member-doc-line">    :table -- a contigency table. If one dimensional, the test is a goodness-of-fit</div><div class="library-member-doc-line">    :probs (when (nil? y) -- (repeat n-levels (/ n-levels)))</div><div class="library-member-doc-line">    :freq (default nil) -- if given, these are rescaled to probabilities</div><div class="library-member-doc-line">    :correct (default true) -- use Yates&apos; correction for continuity for 2x2 contingency tables</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns:</div><div class="library-member-doc-line">    :X-sq -- the Pearson X-squared test statistics</div><div class="library-member-doc-line">    :p-value -- the p-value for the test statistic</div><div class="library-member-doc-line">    :df -- the degress of freedom</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (use &apos;(incanter core stats))</div><div class="library-member-doc-line">    (chisq-test :x [1 2 3 2 3 2 4 3 5]) ;; X-sq 2.6667</div><div class="library-member-doc-line">    ;; create a one-dimensional table of this data</div><div class="library-member-doc-line">    (def table (matrix [1 3 3 1 1]))</div><div class="library-member-doc-line">    (chisq-test :table table) ;; X-sq 2.6667</div><div class="library-member-doc-line">    (chisq-test :table (trans table)) ;; throws exception</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (chisq-test :x [1 0 0 0  1 1 1 0 0 1 0 0 1 1 1 1]) ;; 0.25</div><div class="library-member-doc-line">   </div><div class="library-member-doc-line">    (use &apos;(incanter core stats datasets))</div><div class="library-member-doc-line">    (def math-prog (to-matrix (get-dataset :math-prog)))</div><div class="library-member-doc-line">    (def x (sel math-prog :cols 1))</div><div class="library-member-doc-line">    (def y (sel math-prog :cols 2))</div><div class="library-member-doc-line">    (chisq-test :x x :y y) ;; X-sq = 1.24145, df=1, p-value = 0.26519</div><div class="library-member-doc-line">    (chisq-test :x x :y y :correct false) ;; X-sq = 2.01094, df=1, p-value = 0.15617</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def table (matrix [[31 12] [9 8]]))</div><div class="library-member-doc-line">    (chisq-test :table table) ;; X-sq = 1.24145, df=1, p-value = 0.26519</div><div class="library-member-doc-line">    (chisq-test :table table :correct false) ;; X-sq = 2.01094, df=1, p-value = 0.15617</div><div class="library-member-doc-line">    ;; use the detabulate function to create data rows corresponding to the table</div><div class="library-member-doc-line">    (def detab (detabulate :table table))</div><div class="library-member-doc-line">    (chisq-test :x (sel detab :cols 0) :y (sel detab :cols 1))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; look at the hair-eye-color data</div><div class="library-member-doc-line">    ;; turn the count data for males into a contigency table</div><div class="library-member-doc-line">    (def male (matrix (sel (get-dataset :hair-eye-color) :cols 3 :rows (range 16)) 4))</div><div class="library-member-doc-line">    (chisq-test :table male) ;; X-sq = 41.280, df = 9, p-value = 4.44E-6</div><div class="library-member-doc-line">    ;; turn the count data for females into a contigency table</div><div class="library-member-doc-line">    (def female (matrix (sel (get-dataset :hair-eye-color) :cols 3 :rows (range 16 32)) 4))</div><div class="library-member-doc-line">    (chisq-test :table female) ;; X-sq = 106.664, df = 9, p-value = 7.014E-19,</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; supply probabilities to goodness-of-fit test</div><div class="library-member-doc-line">    (def table [89 37 30 28 2])</div><div class="library-member-doc-line">    (def probs [0.40 0.20 0.20 0.19 0.01])</div><div class="library-member-doc-line">    (chisq-test :table table :probs probs) ;; X-sq = 5.7947, df = 4, p-value = 0.215</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; use frequencies instead of probabilities </div><div class="library-member-doc-line">    (def freq [40 20 20 15 5])</div><div class="library-member-doc-line">    (chisq-test :table table :freq freq) ;; X-sq = 9.9901, df = 4, p-value = 0.04059</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://www.itl.nist.gov/div898/handbook/eda/section3/eda35f.htm</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Pearson&apos;s_chi-square_test</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Yates&apos;_chi-square_test</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-chisq-test&apos;)" id="linkto-membersource-incanter.stats-chisq-test">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-chisq-test"><pre>(defn chisq-test
&quot; ...&quot;
  ([&amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          correct (if (false? (:correct opts)) false true)
          x (when (:x opts) (:x opts))
          y (when (:y opts) (:y opts))
          table? (if (:table opts) true false)
          xtab (when (or x y)
                 (if y 
                   (tabulate (bind-columns x y)) 
                   (tabulate x)))
          table (cond 
                  table? 
                   (:table opts) 
                  (and x y)
                    (:table xtab))
          two-samp? (if (or (and x y) 
                            (and table? 
                                 (and (&gt; (nrow table) 1) (&gt; (ncol table) 1)))) 
                      true false)
          r-levels (if table?
                     (range (nrow table)) 
                     (first (:levels xtab)))
          c-levels (if table? 
                     (range (ncol table)) 
                     (second (:levels xtab)))
          r-margins (if table?
                      (if two-samp?
                        (apply hash-map (interleave r-levels (map sum (trans table))))
                        (if (&gt; (nrow table) 1) 
                          (to-list table) 
                          (throw (Exception. &quot;One dimensional tables must have only a single column&quot;))))
                      (second (:margins xtab)))
          c-margins (if table? 
                      (if two-samp?
                        (apply hash-map (interleave c-levels (map sum table)))
                        0)
                      (first (:margins xtab)))
                  
          counts (if two-samp? (vectorize table) table)
          N (if table? 
              (sum counts) 
              (:N xtab))
          n (when (not two-samp?) (count r-levels))
          df (if two-samp? (* (dec (nrow table)) (dec (ncol table))) (dec n))
          probs (when (not two-samp?)
                  (cond 
                    (:probs opts) 
                      (:probs opts) 
                    (:freq opts)
                      (div (:freq opts) (sum (:freq opts)))
                    :else
                      (repeat n (/ n))))
          E (if two-samp?
              (for [r r-levels c c-levels]
                (/ (* (c-margins c) (r-margins r)) N))
              (mult N probs))
          X-sq (if (and correct (and (= (count r-levels) 2) (= (count c-levels) 2)))
                 (reduce + (map (fn [o e] (/ (pow (- (abs (- o e)) 0.5) 2) e)) counts E))
                 (reduce + (map (fn [o e] (/ (pow (- o e) 2) e)) counts E)))
         ]
      {:X-sq X-sq
       :df df
       :two-samp? two-samp?
       :p-value (cdf-chisq X-sq :df df :lower-tail false)
       :probs probs
       :N N
       :table table
       :col-levels c-levels
       :row-levels r-levels
       :col-margins c-margins
       :row-margins r-margins
       :E E})))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-correlation"/><dl class="library-member-table"><dt class="library-member-name">correlation</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x y] [mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns the sample correlation of x and y, or the correlation </div><div class="library-member-doc-line">  matrix of the given matrix. </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/DoubleDescriptive.html</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Correlation</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-correlation&apos;)" id="linkto-membersource-incanter.stats-correlation">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-correlation"><pre>(defn correlation
&quot;...&quot;
  ([x y]
    (let [
          xx (to-list x)
          yy (to-list y)
        ]
      (DoubleDescriptive/correlation 
        (DoubleArrayList. (double-array xx)) (sd x)
        (DoubleArrayList. (double-array yy)) (sd y))))
  ([mat]
   (div (covariance mat) 
        (sqrt (mmult (diag (covariance mat)) (trans (diag (covariance mat))))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-covariance"/><dl class="library-member-table"><dt class="library-member-name">covariance</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x y] [mat])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns the sample covariance of x and y. </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    ;; create some data that covaries</div><div class="library-member-doc-line">    (def x (sample-normal 100))</div><div class="library-member-doc-line">    (def err (sample-normal 100))</div><div class="library-member-doc-line">    (def y (plus (mult 5 x) err))</div><div class="library-member-doc-line">    ;; estimate the covariance of x and y</div><div class="library-member-doc-line">    (covariance x y)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/DoubleDescriptive.html</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Covariance</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-covariance&apos;)" id="linkto-membersource-incanter.stats-covariance">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-covariance"><pre>(defn covariance 
&quot;...&quot;
  ([x y]
    (let [
          xx (to-list x)
          yy (to-list y)
        ]
      (DoubleDescriptive/covariance 
        (DoubleArrayList. (double-array xx))
        (DoubleArrayList. (double-array yy)))))
  ([mat]
        (let [n (ncol mat)]
          (matrix 
            (for [i (range n) j (range n)] 
              (covariance (sel mat true i) (sel mat true j))) n))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-cumulative-mean"/><dl class="library-member-table"><dt class="library-member-name">cumulative-mean</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([coll])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a sequence of cumulative means for the given collection. For instance </div><div class="library-member-doc-line">    The first value equals the first value of the argument, the second value is</div><div class="library-member-doc-line">    the mean of the first two arguments, the third is the mean of the first three</div><div class="library-member-doc-line">    arguments, etc.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Examples:</div><div class="library-member-doc-line">      (cumulative-mean (sample-normal 100))</div><div class="library-member-doc-line">  </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-cumulative-mean&apos;)" id="linkto-membersource-incanter.stats-cumulative-mean">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-cumulative-mean"><pre>(defn cumulative-mean 
  &quot; Returns a sequence of cumulative means for the given collection. For instance ...&quot;
  ([coll] (map / (cumulative-sum coll) (range 1 (inc (count coll))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-detabulate"/><dl class="library-member-table"><dt class="library-member-name">detabulate</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([&amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Take a contingency table of counts and returns a matrix of observations.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core stats datasets))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def by-gender (group-by (get-dataset :hair-eye-color) 2))</div><div class="library-member-doc-line">    (def table (matrix (sel (first by-gender) :cols 3) 4))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (detabulate :table table)</div><div class="library-member-doc-line">    (tabulate (detabulate :table table))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; example 2</div><div class="library-member-doc-line">    (def data (matrix [[1 0] </div><div class="library-member-doc-line">                       [1 1] </div><div class="library-member-doc-line">                       [1 1] </div><div class="library-member-doc-line">                       [1 0] </div><div class="library-member-doc-line">                       [0 0] </div><div class="library-member-doc-line">                       [1 1] </div><div class="library-member-doc-line">                       [1 1] </div><div class="library-member-doc-line">                       [1 0] </div><div class="library-member-doc-line">                       [1 1]]))</div><div class="library-member-doc-line">    (tabulate data)</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    (tabulate (detabulate :table (:table (tabulate data))))</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-detabulate&apos;)" id="linkto-membersource-incanter.stats-detabulate">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-detabulate"><pre>(defn detabulate
&quot; Take a contingency table of counts and returns a matrix of observations....&quot;
  ([&amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          table (when (:table opts) (:table opts))
          row-labels (when table (if (:row-labels opts) (:row-labels opts) (range (nrow table))))
          col-labels (when table (if (:col-labels opts) (:col-labels opts) (range (ncol table))))
          data (apply bind-rows 
                      (apply concat
                             (for [r row-labels c col-labels]
                                  (repeat (sel table :rows r :cols c) [r c]))))]
       data)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-indicator"/><dl class="library-member-table"><dt class="library-member-name">indicator</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([pred coll])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns a sequence of ones and zeros, where ones</div><div class="library-member-doc-line">  are returned when the given predicate is true for</div><div class="library-member-doc-line">  corresponding element in the given collection, and</div><div class="library-member-doc-line">  zero otherwise.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (use &apos;incanter.stats)</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    (indicator #(neg? %) (sample-normal 10))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; return the sum of the positive values in a normal sample</div><div class="library-member-doc-line">    (def x (sample-normal 100))</div><div class="library-member-doc-line">    (sum (mult x (indicator #(pos? %) x)))</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-indicator&apos;)" id="linkto-membersource-incanter.stats-indicator">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-indicator"><pre>(defn indicator 
&quot;...&quot;
  ([pred coll] 
    (for [el coll] (if (pred el) 1 0))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-kurtosis"/><dl class="library-member-table"><dt class="library-member-name">kurtosis</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns the kurtosis of the data, x. &quot;Kurtosis is a measure of the &quot;peakedness&quot; </div><div class="library-member-doc-line">  of the probability distribution of a real-valued random variable. Higher kurtosis </div><div class="library-member-doc-line">  means more of the variance is due to infrequent extreme deviations, as opposed to </div><div class="library-member-doc-line">  frequent modestly-sized deviations.&quot; (Wikipedia)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (kurtosis (sample-normal 100000)) ;; approximately 0</div><div class="library-member-doc-line">    (kurtosis (sample-gamma 100000)) ;; approximately 6</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/DoubleDescriptive.html</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Kurtosis</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-kurtosis&apos;)" id="linkto-membersource-incanter.stats-kurtosis">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-kurtosis"><pre>(defn kurtosis 
&quot;
  Returns the kurtosis of the data, x. \&quot;Kurtosis is a measure of the \&quot;peakedness\&quot; 
  of the probability distribution of a real-valued random variable. Higher kurtosis 
  means more of the variance is due to infrequent extreme deviations, as opposed to 
  frequent modestly-sized deviations.\&quot; (Wikipedia)

  Examples:

    (kurtosis (sample-normal 100000)) ;; approximately 0
    (kurtosis (sample-gamma 100000)) ;; approximately 6

  References:
    http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/DoubleDescriptive.html
    http://en.wikipedia.org/wiki/Kurtosis

&quot;
  ([x] (DoubleDescriptive/kurtosis (DoubleArrayList. (double-array x)) (mean x) (variance x))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-linear-model"/><dl class="library-member-table"><dt class="library-member-name">linear-model</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([y x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> </div><div class="library-member-doc-line">  Returns the results of performing a OLS linear regression of y on x.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Arguments:</div><div class="library-member-doc-line">    y is a vector (or sequence) of values for the dependent variable</div><div class="library-member-doc-line">    x is a vector or matrix of values for the independent variables</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :intercept (default true) indicates weather an intercept term should be included</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns:</div><div class="library-member-doc-line">    a map, of type ::linear-model, containing:</div><div class="library-member-doc-line">      :design-matrix -- a matrix containing the independent variables, and an intercept columns</div><div class="library-member-doc-line">      :coefs -- the regression coefficients</div><div class="library-member-doc-line">      :t-tests -- t-test values of coefficients</div><div class="library-member-doc-line">      :t-probs -- p-values for t-test values of coefficients</div><div class="library-member-doc-line">      :coefs-ci -- 95% percentile confidence interval</div><div class="library-member-doc-line">      :fitted -- the predicted values of y</div><div class="library-member-doc-line">      :residuals -- the residuals of each observation</div><div class="library-member-doc-line">      :std-errors -- the standard errors of the coeffients</div><div class="library-member-doc-line">      :sse -- the sum of squared errors, also called the residual sum of squares</div><div class="library-member-doc-line">      :ssr -- the regression sum of squares, also called the explained sum of squares</div><div class="library-member-doc-line">      :sst -- the total sum of squares (proportional to the sample variance)</div><div class="library-member-doc-line">      :r-square -- coefficient of determination</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (use &apos;(incanter core stats datasets charts))</div><div class="library-member-doc-line">    (def iris (to-matrix (get-dataset :iris) :dummies true))</div><div class="library-member-doc-line">    (def y (sel iris :cols 0))</div><div class="library-member-doc-line">    (def x (sel iris :cols (range 1 6)))</div><div class="library-member-doc-line">    (def iris-lm (linear-model y x)) ; with intercept term</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (keys iris-lm) ; see what fields are included</div><div class="library-member-doc-line">    (:coefs iris-lm)</div><div class="library-member-doc-line">    (:sse iris-lm)</div><div class="library-member-doc-line">    (quantile (:residuals iris-lm))</div><div class="library-member-doc-line">    (:r-square iris-lm)</div><div class="library-member-doc-line">    (:adj-r-square iris-lm)</div><div class="library-member-doc-line">    (:f-stat iris-lm)</div><div class="library-member-doc-line">    (:f-prob iris-lm)</div><div class="library-member-doc-line">    (:df iris-lm)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def x1 (range 0.0 3 0.1))</div><div class="library-member-doc-line">    (view (xy-plot x1 (cdf-f x1 :df1 4 :df2 144)))</div><div class="library-member-doc-line">  </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/OLS_Regression</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Coefficient_of_determination</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-linear-model&apos;)" id="linkto-membersource-incanter.stats-linear-model">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-linear-model"><pre>(defn linear-model
&quot; ...&quot;
  ([y x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          intercept? (if (false? (:intercept opts)) false true)
          _x (if intercept? (bind-columns (replicate (nrow x) 1) x) x)
          xtx (mmult (trans _x) _x)
          xtxi (if (number? xtx) (/ 1 xtx) (solve xtx))
          xty (mmult (trans _x) y)
          coefs (if (and (number? xtxi) (number? xty))
                  (* xtxi xty)
                  (to-list (if (or (number? xtxi) (number? xty)) 
                    (mult xtxi xty)
                    (mmult xtxi xty))))
          fitted (to-list (if (number? coefs)
                  (mult _x coefs)
                  (mmult _x coefs)))
          resid (to-list (minus y fitted))
          sse (sum-of-squares resid)
          ssr (sum-of-squares (minus fitted (mean fitted)))
          sst (+ sse ssr)
          r-square (/ ssr sst)
          n (nrow y)
          p (ncol _x)
          p-1 (if intercept? (- p 1) p)
          adj-r-square (- 1 (* (- 1 r-square) (/ (- n 1) (- n p 1))))
          mse (/ sse (- n p))
          msr (/ ssr p-1)
          f-stat (/ msr mse)
          df1 p-1
          df2 (- n p)
          f-prob (cdf-f f-stat :df1 df1 :df2 df2 :lower-tail false)
          coef-var (mult mse xtxi)
          std-errors (sqrt (diag coef-var))
          t-tests (div coefs std-errors)
          t-probs (mult 2 (cdf-t (abs t-tests) :df df2 :lower-tail false))
          t-95 (mult (quantile-t 0.975 :df df2) std-errors)
          coefs-ci (if (number? std-errors)
                       [(plus coefs t-95) 
                        (minus coefs t-95)]
                       (partition 2 
                         (interleave 
                           (minus coefs t-95) 
                           (plus coefs t-95))))
         ]
      (with-meta
        {:x _x
         :y y
         :fitted fitted
         :design-matrix _x
         :coefs coefs
         :t-tests t-tests
         :t-probs t-probs
         :coefs-ci coefs-ci
         :residuals resid
         :std-errors std-errors
         :sse sse
         :ssr ssr
         :sst sst
         :mse mse
         :msr msr
         :f-stat f-stat
         :f-prob f-prob
         :df [df1 df2]
         :coef-var coef-var
         :r-square r-square
         :adj-r-square adj-r-square
        } 
        {:type ::linear-model}))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-mean"/><dl class="library-member-table"><dt class="library-member-name">mean</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns the mean of the data, x. </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (mean (sample-normal 100))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/DoubleDescriptive.html</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Mean</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-mean&apos;)" id="linkto-membersource-incanter.stats-mean">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-mean"><pre>(defn mean
&quot;...&quot; 
([x]
  (let [xx (to-list x)]
    (DoubleDescriptive/mean (DoubleArrayList. (double-array xx))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-median"/><dl class="library-member-table"><dt class="library-member-name">median</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns the median of the data, x. </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (median (sample-normal 100))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/DoubleDescriptive.html</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Median</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-median&apos;)" id="linkto-membersource-incanter.stats-median">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-median"><pre>(defn median 
&quot;...&quot; 
  ([x]
    (let [xx (to-list x)]
      (DoubleDescriptive/median (DoubleArrayList. (double-array xx))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-pdf-beta"/><dl class="library-member-table"><dt class="library-member-name">pdf-beta</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Beta pdf of the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. This is equivalent to R&apos;s dbeta function. </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :alpha (default 1) </div><div class="library-member-doc-line">    :beta (default 1)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      cdf-beta and sample-beta</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Beta.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Beta_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Probability_density_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (pdf-beta 0.5 :alpha 1 :beta 2)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-pdf-beta&apos;)" id="linkto-membersource-incanter.stats-pdf-beta">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-pdf-beta"><pre>(defn pdf-beta
&quot; Returns the Beta pdf of the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          alpha (if (:alpha opts) (:alpha opts) 1)
          beta (if (:beta opts) (:beta opts) 1)
          dist (Beta. alpha beta (DoubleMersenneTwister.))]
      (if (coll? x)
        (map #(.pdf dist %) x)
        (.pdf dist x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-pdf-binomial"/><dl class="library-member-table"><dt class="library-member-name">pdf-binomial</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Bionomial pdf of the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. Same as R&apos;s dbinom</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :size (default 1) </div><div class="library-member-doc-line">    :prob (default 1/2)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      cdf-binomial and sample-binomial</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Binomial.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Binomial_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Probability_density_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (pdf-binomial 10 :prob 1/4 :size 20)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-pdf-binomial&apos;)" id="linkto-membersource-incanter.stats-pdf-binomial">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-pdf-binomial"><pre>(defn pdf-binomial
&quot; Returns the Bionomial pdf of the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          n (if (number? (:size opts)) (:size opts) 1)
          p (if (number? (:prob opts)) (:prob opts) 1/2)
          dist (Binomial. n p (DoubleMersenneTwister.))]
      (if (coll? x)
        (map #(.pdf dist %) x)
        (.pdf dist x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-pdf-chisq"/><dl class="library-member-table"><dt class="library-member-name">pdf-chisq</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Chi Square pdf of the given value of x.  It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. Same as R&apos;s dchisq function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :df (default 1) </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      cdf-chisq and sample-chisq</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/ChiSquare.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Chi_square_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Probability_density_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (pdf-chisq 5.0 :df 2)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-pdf-chisq&apos;)" id="linkto-membersource-incanter.stats-pdf-chisq">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-pdf-chisq"><pre>(defn pdf-chisq
&quot; Returns the Chi Square pdf of the given value of x.  It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          df (if (number? (:df opts)) (:df opts) 1)
          dist (ChiSquare. df (DoubleMersenneTwister.))]
      (if (coll? x)
        (map #(.pdf dist %) x)
        (.pdf dist x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-pdf-exp"/><dl class="library-member-table"><dt class="library-member-name">pdf-exp</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Exponential pdf of the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. Same as R&apos;s dexp</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :rate (default 1) </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      cdf-exp and sample-exp</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Exponential.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Exponential_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Probability_density_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (pdf-exp 2.0 :rate 1/2)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-pdf-exp&apos;)" id="linkto-membersource-incanter.stats-pdf-exp">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-pdf-exp"><pre>(defn pdf-exp
&quot; Returns the Exponential pdf of the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          rate (if (number? (:rate opts)) (:rate opts) 1)
          dist (Exponential. rate (DoubleMersenneTwister.))]
      (if (coll? x)
        (map #(.pdf dist %) x)
        (.pdf dist x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-pdf-f"/><dl class="library-member-table"><dt class="library-member-name">pdf-f</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the F pdf of the given value, x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. This is equivalent to R&apos;s df function. </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :df1 (default 1) </div><div class="library-member-doc-line">    :df2 (default 1)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      cdf-f and quantile-f</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/F_distribution</div><div class="library-member-doc-line">      http://mathworld.wolfram.com/F-Distribution.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Probability_density_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (pdf-f 1.0 :df1 5 :df2 2)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-pdf-f&apos;)" id="linkto-membersource-incanter.stats-pdf-f">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-pdf-f"><pre>(defn pdf-f
&quot; Returns the F pdf of the given value, x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          df1 (if (:df1 opts) (:df1 opts) 0)
          df2 (if (:df2 opts) (:df2 opts) 1)
          pdf-fx (fn [x]
                   (* (/ (gamma (/ (+ df1 df2) 2)) 
                         (* (gamma (/ df1 2)) (gamma (/ df2 2))))
                       (pow (/ df1 df2) (/ df1 2))
                       (pow x (- (/ df1 2) 1))
                       (pow (+ 1 (* (/ df1 df2) x))
                           (- 0 (/ (+ df1 df2) 2)))))
         ]
      (if (coll? x)
        (map pdf-fx x)
        (pdf-fx x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-pdf-gamma"/><dl class="library-member-table"><dt class="library-member-name">pdf-gamma</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Gamma pdf for the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. This is equivalent to R&apos;s dgamma function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :shape (default 1) </div><div class="library-member-doc-line">    :rate (default 1)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      cdf-gamma and sample-gamma</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Gamma.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Gamma_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Probability_density_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (pdf-gamma 10 :shape 1 :rate 2)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-pdf-gamma&apos;)" id="linkto-membersource-incanter.stats-pdf-gamma">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-pdf-gamma"><pre>(defn pdf-gamma
&quot; Returns the Gamma pdf for the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          shape (if (number? (:shape opts)) (:shape opts) 1)
          rate (if (number? (:rate opts)) (:rate opts) 1)
          dist (Gamma. shape rate (DoubleMersenneTwister.))]
      (if (coll? x)
        (map #(.pdf dist %) x)
        (.pdf dist x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-pdf-neg-binomial"/><dl class="library-member-table"><dt class="library-member-name">pdf-neg-binomial</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Negative Binomial pdf of the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. Same as R&apos;s dnbinom</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :size (default 10) </div><div class="library-member-doc-line">    :prob (default 1/2)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      cdf-neg-binomial and sample-neg-binomial</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/NegativeBinomial.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Negative_binomial_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Probability_density_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (pdf-neg-binomial 10 :prob 1/2 :size 20)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-pdf-neg-binomial&apos;)" id="linkto-membersource-incanter.stats-pdf-neg-binomial">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-pdf-neg-binomial"><pre>(defn pdf-neg-binomial
&quot; Returns the Negative Binomial pdf of the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          size (if (number? (:size opts)) (:size opts) 10)
          prob (if (number? (:prob opts)) (:prob opts) 1/2)
          dist (NegativeBinomial. size prob (DoubleMersenneTwister.))]
      (if (coll? x)
        (map #(.pdf dist %) x)
        (.pdf dist x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-pdf-normal"/><dl class="library-member-table"><dt class="library-member-name">pdf-normal</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Normal pdf of the given value, x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. This is equivalent to R&apos;s dnorm function. </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :mean (default 0) </div><div class="library-member-doc-line">    :sd (default 1)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      cdf-normal, quantile-normal, sample-normal</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Normal.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Normal_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Probability_density_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (pdf-normal 1.96 :mean -2 :sd (sqrt 0.5))</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-pdf-normal&apos;)" id="linkto-membersource-incanter.stats-pdf-normal">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-pdf-normal"><pre>(defn pdf-normal
&quot; Returns the Normal pdf of the given value, x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          mean (if (:mean opts) (:mean opts) 0)
          sd (if (:sd opts) (:sd opts) 1)
          dist (Normal. mean sd (DoubleMersenneTwister.))]
      (if (coll? x)
        (map #(.pdf dist %) x)
        (.pdf dist x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-pdf-poisson"/><dl class="library-member-table"><dt class="library-member-name">pdf-poisson</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Poisson pdf of the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. Same as R&apos;s dpois</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :lambda (default 1) </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      cdf-poisson and sample-poisson</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Poisson.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Poisson_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Probability_density_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (pdf-poisson 5 :lambda 10)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-pdf-poisson&apos;)" id="linkto-membersource-incanter.stats-pdf-poisson">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-pdf-poisson"><pre>(defn pdf-poisson
&quot; Returns the Poisson pdf of the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          lambda (if (number? (:lambda opts)) (:lambda opts) 1)
          dist (Poisson. lambda (DoubleMersenneTwister.))]
      (if (coll? x)
        (map #(.pdf dist %) x)
        (.pdf dist x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-pdf-t"/><dl class="library-member-table"><dt class="library-member-name">pdf-t</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Student&apos;s t pdf for the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. Same as R&apos;s dt function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :df (default 1) </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      cdf-t, quantile-t, and sample-t</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/StudentT.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Student-t_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Probability_density_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (pdf-t 1.2 :df 10)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-pdf-t&apos;)" id="linkto-membersource-incanter.stats-pdf-t">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-pdf-t"><pre>(defn pdf-t
&quot; Returns the Student&apos;s t pdf for the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          df (if (number? (:df opts)) (:df opts) 1)
          dist (StudentT. df (DoubleMersenneTwister.))]
      (if (coll? x)
        (map #(.pdf dist %) x)
        (.pdf dist x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-pdf-uniform"/><dl class="library-member-table"><dt class="library-member-name">pdf-uniform</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the Uniform pdf of the given value of x. It will return a sequence </div><div class="library-member-doc-line">  of values, if x is a sequence. This is equivalent to R&apos;s dunif function. </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :min (default 0) </div><div class="library-member-doc-line">    :max (default 1)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      cdf-uniform and sample-uniform</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/DoubleUniform.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Uniform_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Probability_density_function</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (pdf-uniform 5)</div><div class="library-member-doc-line">      (pdf-uniform 5 :min 1 :max 10)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-pdf-uniform&apos;)" id="linkto-membersource-incanter.stats-pdf-uniform">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-pdf-uniform"><pre>(defn pdf-uniform 
&quot; Returns the Uniform pdf of the given value of x. It will return a sequence ...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          min (double (if (:min opts) (:min opts) 0.0))
          max (double (if (:max opts) (:max opts) 1.0))
          dist (DoubleUniform. min max (DoubleMersenneTwister.))]
      (if (coll? x)
        (map #(.pdf dist %) x)
        (.pdf dist x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-permute"/><dl class="library-member-table"><dt class="library-member-name">permute</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x] [x y])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> If provided a single argument, returns a permuted version of the </div><div class="library-member-doc-line">  given collection. (perm x) is the same as (sample x).</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  If provided two arguments, returns two lists that are permutations </div><div class="library-member-doc-line">  across the given collections. In other words, each of the new collections</div><div class="library-member-doc-line">  will contain elements from both of the given collections. Useful for</div><div class="library-member-doc-line">  permutation tests or randomization tests.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (permute (range 10))</div><div class="library-member-doc-line">    (permute (range 10) (range 10 20))</div><div class="library-member-doc-line">    </div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-permute&apos;)" id="linkto-membersource-incanter.stats-permute">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-permute"><pre>(defn permute
&quot; If provided a single argument, returns a permuted version of the ...&quot;
  ([x]
    (sample x))

  ([x y]
   (let [n1 (count x)
         samp (sample (concat x y) :replacement false)
         new-x (take n1 samp)
         new-y (drop n1 samp)]
     (list new-x new-y))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-principal-components"/><dl class="library-member-table"><dt class="library-member-name">principal-components</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Performs a principal components analysis on the given data matrix.</div><div class="library-member-doc-line">  Equivalent to R&apos;s prcomp function.</div><div class="library-member-doc-line">  </div><div class="library-member-doc-line">  Returns:</div><div class="library-member-doc-line">    A map with the following fields:</div><div class="library-member-doc-line">    :std-dev -- the standard deviations of the principal compoenents</div><div class="library-member-doc-line">        (i.e. the square roots of the eigenvalues of the correlation</div><div class="library-member-doc-line">        matrix, though the calculation is actually done with the</div><div class="library-member-doc-line">        singular values of the data matrix.</div><div class="library-member-doc-line">    :rotation -- the matrix of variable loadings (i.e. a matrix</div><div class="library-member-doc-line">        whose columns contain the eigenvectors).</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">   </div><div class="library-member-doc-line">    (use &apos;(incanter core stats charts datasets))</div><div class="library-member-doc-line">    ;; load the iris dataset</div><div class="library-member-doc-line">    (def iris (to-matrix (get-dataset :iris)))</div><div class="library-member-doc-line">    ;; run the pca</div><div class="library-member-doc-line">    (def pca (principal-components (sel iris :cols (range 4))))</div><div class="library-member-doc-line">    ;; extract the first two principal components</div><div class="library-member-doc-line">    (def pc1 (sel (:rotation pca) :cols 0))</div><div class="library-member-doc-line">    (def pc2 (sel (:rotation pca) :cols 1))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; project the first four dimension of the iris data onto the first</div><div class="library-member-doc-line">    ;; two principal components</div><div class="library-member-doc-line">    (def x1 (mmult (sel iris :cols (range 4)) pc1)) </div><div class="library-member-doc-line">    (def x2 (mmult (sel iris :cols (range 4)) pc2)) </div><div class="library-member-doc-line">   </div><div class="library-member-doc-line">    ;; now plot the transformed data, coloring each species a different color</div><div class="library-member-doc-line">    (doto (scatter-plot (sel x1 :rows (range 50)) (sel x2 :rows (range 50))</div><div class="library-member-doc-line">                        :x-label &quot;PC1&quot; :y-label &quot;PC2&quot; :title &quot;Iris PCA&quot;)</div><div class="library-member-doc-line">          (add-points (sel x1 :rows (range 50 100)) (sel x2 :rows (range 50 100)))</div><div class="library-member-doc-line">          (add-points (sel x1 :rows (range 100 150)) (sel x2 :rows (range 100 150)))</div><div class="library-member-doc-line">          view)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; alternatively, the :group-by option can be used in scatter-plot</div><div class="library-member-doc-line">    (view (scatter-plot x1 x2 </div><div class="library-member-doc-line">                        :group-by (sel iris :cols 4)</div><div class="library-member-doc-line">                        :x-label &quot;PC1&quot; :y-label &quot;PC2&quot; :title &quot;Iris PCA&quot;))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Principal_component_analysis</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-principal-components&apos;)" id="linkto-membersource-incanter.stats-principal-components">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-principal-components"><pre>(defn principal-components 
&quot;
  Performs a principal components analysis on the given data matrix.
  Equivalent to R&apos;s prcomp function.
  
  Returns:
    A map with the following fields:
    :std-dev -- the standard deviations of the principal compoenents
        (i.e. the square roots of the eigenvalues of the correlation
        matrix, though the calculation is actually done with the
        singular values of the data matrix.
    :rotation -- the matrix of variable loadings (i.e. a matrix
        whose columns contain the eigenvectors).


  Examples:
   
    (use &apos;(incanter core stats charts datasets))
    ;; load the iris dataset
    (def iris (to-matrix (get-dataset :iris)))
    ;; run the pca
    (def pca (principal-components (sel iris :cols (range 4))))
    ;; extract the first two principal components
    (def pc1 (sel (:rotation pca) :cols 0))
    (def pc2 (sel (:rotation pca) :cols 1))

    ;; project the first four dimension of the iris data onto the first
    ;; two principal components
    (def x1 (mmult (sel iris :cols (range 4)) pc1)) 
    (def x2 (mmult (sel iris :cols (range 4)) pc2)) 
   
    ;; now plot the transformed data, coloring each species a different color
    (doto (scatter-plot (sel x1 :rows (range 50)) (sel x2 :rows (range 50))
                        :x-label \&quot;PC1\&quot; :y-label \&quot;PC2\&quot; :title \&quot;Iris PCA\&quot;)
          (add-points (sel x1 :rows (range 50 100)) (sel x2 :rows (range 50 100)))
          (add-points (sel x1 :rows (range 100 150)) (sel x2 :rows (range 100 150)))
          view)


    ;; alternatively, the :group-by option can be used in scatter-plot
    (view (scatter-plot x1 x2 
                        :group-by (sel iris :cols 4)
                        :x-label \&quot;PC1\&quot; :y-label \&quot;PC2\&quot; :title \&quot;Iris PCA\&quot;))


  References:
    http://en.wikipedia.org/wiki/Principal_component_analysis

&quot;
  ([x &amp; options]
   (let [svd (decomp-svd (correlation x))
         rotation (:V svd)
         std-dev (sqrt (:S svd))]
     {:std-dev std-dev
      :rotation rotation})))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-quantile"/><dl class="library-member-table"><dt class="library-member-name">quantile</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns the quantiles of the data, x. By default it returns the min, </div><div class="library-member-doc-line">  25th-percentile, 50th-percentile, 75th-percentile, and max value.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :probs (default [0.0 0.25 0.5 0.75 1.0])</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (quantile (sample-normal 100))</div><div class="library-member-doc-line">    (quantile (sample-normal 100) :probs [0.025 0.975])</div><div class="library-member-doc-line">    (quantile (sample-normal 100) :probs 0.975)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/DoubleDescriptive.html</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Quantile</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-quantile&apos;)" id="linkto-membersource-incanter.stats-quantile">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-quantile"><pre>(defn quantile 
&quot;...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          _x (if (matrix? x) (to-list x) x)
          data (DoubleArrayList. (double-array (sort _x)))
          probs (cond 
                  (number? (:probs opts))
                    (:probs opts)
                  (coll? (:probs opts))
                    (DoubleArrayList. (double-array (:probs opts)))
                  :default
                    (DoubleArrayList. (double-array [0.0 0.25 0.5 0.75 1.0])))]
        (if (number? probs)
          (DoubleDescriptive/quantile data probs)
          (seq (.elements (DoubleDescriptive/quantiles data probs)))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-quantile-normal"/><dl class="library-member-table"><dt class="library-member-name">quantile-normal</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([probability &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the inverse of the Normal CDF for the given probability. </div><div class="library-member-doc-line">  It will return a sequence of values, if given a sequence of </div><div class="library-member-doc-line">  probabilities. This is equivalent to R&apos;s qnorm function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :mean (default 0) </div><div class="library-member-doc-line">    :sd (default 1)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns: </div><div class="library-member-doc-line">    a value x, where (cdf-normal x) = probability</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-normal, cdf-normal, and sample-normal</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/Probability.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Normal_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Quantile</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (quantile-normal 0.975)</div><div class="library-member-doc-line">      (quantile-normal [0.025 0.975] :mean -2 :sd (sqrt 0.5))</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-quantile-normal&apos;)" id="linkto-membersource-incanter.stats-quantile-normal">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-quantile-normal"><pre>(defn quantile-normal 
&quot; Returns the inverse of the Normal CDF for the given probability. ...&quot;
  ([probability &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          mean (if (:mean opts) (:mean opts) 0)
          sd (if (:sd opts) (:sd opts) 1)
          x (if (coll? probability) 
              (map #(Probability/normalInverse %) probability)
              (Probability/normalInverse probability))]
      (plus mean (mult sd x)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-quantile-t"/><dl class="library-member-table"><dt class="library-member-name">quantile-t</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([probability &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns the inverse of the Student&apos;s t CDF for the given probability</div><div class="library-member-doc-line">  (i.e. the quantile).  It will return a sequence of values, if x is </div><div class="library-member-doc-line">  a sequence of probabilities. This is equivalent to R&apos;s qt function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :df (default 1) </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns: </div><div class="library-member-doc-line">    a value x, where (cdf-t x) = probability</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">     pdf-t, cdf-t, and sample-t </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/Probability.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Student-t_distribution</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Quantile</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (quantile-t 0.975)</div><div class="library-member-doc-line">      (quantile-t [0.025 0.975] :df 25)</div><div class="library-member-doc-line">      (def df [1 2 3 4 5 6 7 8 9 10 20 50 100 1000])</div><div class="library-member-doc-line">      (map #(quantile-t 0.025 :df %) df)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-quantile-t&apos;)" id="linkto-membersource-incanter.stats-quantile-t">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-quantile-t"><pre>(defn quantile-t 
&quot; Returns the inverse of the Student&apos;s t CDF for the given probability...&quot;
  ([probability &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          df (if (:df opts) (:df opts) 1)
          to-alpha (fn [prob] ;; need to convert the probability to an alpha value
                     (if (&lt; prob 1/2) 
                      (* 2 prob)
                      (* 2 (- 1 prob))))
          sign-fx (fn [x1 prob] (if (&lt; prob 1/2) (* -1 x1) x1))
          x (if (coll? probability) 
              (map #(sign-fx (Probability/studentTInverse (to-alpha %) df) %) probability)
              (sign-fx (Probability/studentTInverse (to-alpha probability) df) probability))]
        x)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-sample"/><dl class="library-member-table"><dt class="library-member-name">sample</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a sample of the given size from the given collection. If replacement </div><div class="library-member-doc-line">  is set to false it returns a set, otherwise it returns a list.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Arguments:</div><div class="library-member-doc-line">    x -- collection to be sampled from</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :size -- (default (count x) sample size</div><div class="library-member-doc-line">    :replacement (default true) -- sample with replacement</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (sample (range 10)) ; permutation of numbers zero through ten</div><div class="library-member-doc-line">    (sample [:red :green :blue] :size 10) ; choose 10 items that are either :red, :green, or :blue.</div><div class="library-member-doc-line">    (sample (seq &quot;abcdefghijklmnopqrstuvwxyz&quot;)  :size 4 :replacement false) ; choose 4 random letters.</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-sample&apos;)" id="linkto-membersource-incanter.stats-sample">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-sample"><pre>(defn sample 
&quot; Returns a sample of the given size from the given collection. If replacement 
  is set to false it returns a set, otherwise it returns a list.

  Arguments:
    x -- collection to be sampled from

  Options:
    :size -- (default (count x) sample size
    :replacement (default true) -- sample with replacement


  Examples:
    (sample (range 10)) ; permutation of numbers zero through ten
    (sample [:red :green :blue] :size 10) ; choose 10 items that are either :red, :green, or :blue.
    (sample (seq \&quot;abcdefghijklmnopqrstuvwxyz\&quot;)  :size 4 :replacement false) ; choose 4 random letters.

&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          size (if (:size opts) (:size opts) (count x))
          replacement? (if (false? (:replacement opts)) false true)
          max-idx (dec (count x))]
      (if replacement?
        (map #(nth x %) (sample-uniform size :min 0 :max max-idx :integers true))
        (if (&gt; size (count x))
          (throw (Exception. &quot;&apos;size&apos; can&apos;t be larger than (count x) without replacement!&quot;))
          (map #(nth x %)
               (loop [samp-indices [] indices-set #{}]
                 (if (= (count samp-indices) size)
                   samp-indices
                   (let [i (sample-uniform 1 :min 0 :max max-idx :integers true)]
                     (if (contains? indices-set i)
                       (recur samp-indices indices-set)
                       (recur (conj samp-indices i) (conj indices-set i))))))))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-sample-beta"/><dl class="library-member-table"><dt class="library-member-name">sample-beta</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([size &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a sample of the given size from a Beta distribution.</div><div class="library-member-doc-line">  This is equivalent to R&apos;s rbeta function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :alpha (default 1) </div><div class="library-member-doc-line">    :beta (default 1)</div><div class="library-member-doc-line">    These default values produce a Uniform distribution.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-beta and cdf-beta</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Beta.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Beta_distribution</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (sample-beta 1000 :alpha 1 :beta 2)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-sample-beta&apos;)" id="linkto-membersource-incanter.stats-sample-beta">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-sample-beta"><pre>(defn sample-beta
&quot; Returns a sample of the given size from a Beta distribution....&quot;
  ([size &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          alpha (if (:alpha opts) (:alpha opts) 1)
          beta (if (:beta opts) (:beta opts) 1)]
      (if (= size 1)
        (Beta/staticNextDouble alpha beta)
        (for [_ (range size)] (Beta/staticNextDouble alpha beta))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-sample-binomial"/><dl class="library-member-table"><dt class="library-member-name">sample-binomial</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([size &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a sample of the given size from a Binomial distribution.</div><div class="library-member-doc-line">  Same as R&apos;s rbinom</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :size (default 1) </div><div class="library-member-doc-line">    :prob (default 1/2)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      cdf-binomial and sample-binomial</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Binomial.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Binomial_distribution</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (sample-binomial 1000 :prob 1/4 :size 20)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-sample-binomial&apos;)" id="linkto-membersource-incanter.stats-sample-binomial">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-sample-binomial"><pre>(defn sample-binomial
&quot; Returns a sample of the given size from a Binomial distribution....&quot;
  ([size &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          n (if (number? (:size opts)) (:size opts) 1)
          p (if (number? (:prob opts)) (:prob opts) 1/2)]
      (if (= size 1)
        (Binomial/staticNextInt n p)
        (for [_ (range size)] (Binomial/staticNextInt n p))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-sample-chisq"/><dl class="library-member-table"><dt class="library-member-name">sample-chisq</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([size &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a sample of the given size from a Chi Square distribution</div><div class="library-member-doc-line">  Same as R&apos;s rchisq function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :df (default 1) </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-chisq and cdf-chisq</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/ChiSquare.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Chi_square_distribution</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (sample-chisq 1000 :df 2)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-sample-chisq&apos;)" id="linkto-membersource-incanter.stats-sample-chisq">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-sample-chisq"><pre>(defn sample-chisq
&quot; Returns a sample of the given size from a Chi Square distribution...&quot;
  ([size &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          df (if (number? (:df opts)) (:df opts) 1)]
      (if (= size 1)
        (ChiSquare/staticNextDouble df)
        (for [_ (range size)] (ChiSquare/staticNextDouble df))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-sample-exp"/><dl class="library-member-table"><dt class="library-member-name">sample-exp</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([size &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a sample of the given size from a Exponential distribution.</div><div class="library-member-doc-line">  Same as R&apos;s rexp</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :rate (default 1) </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-exp, and cdf-exp</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Exponential.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Exponential_distribution</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (sample-exp 1000 :rate 1/2)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-sample-exp&apos;)" id="linkto-membersource-incanter.stats-sample-exp">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-sample-exp"><pre>(defn sample-exp
&quot; Returns a sample of the given size from a Exponential distribution....&quot;
  ([size &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          rate (if (number? (:rate opts)) (:rate opts) 1)]
      (if (= size 1)
        (Exponential/staticNextDouble rate)
        (for [_ (range size)] (Exponential/staticNextDouble rate))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-sample-gamma"/><dl class="library-member-table"><dt class="library-member-name">sample-gamma</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([size &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a sample of the given size from a Gamma distribution.</div><div class="library-member-doc-line">  This is equivalent to R&apos;s rgamma function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :shape (default 1) </div><div class="library-member-doc-line">    :rate (default 1)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-gamma, cdf-gamma, and quantile-gamma</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Gamma.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Gamma_distribution</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (sample-gamma 1000 :shape 1 :rate 2)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-sample-gamma&apos;)" id="linkto-membersource-incanter.stats-sample-gamma">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-sample-gamma"><pre>(defn sample-gamma
&quot; Returns a sample of the given size from a Gamma distribution....&quot;
  ([size &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          shape (if (number? (:shape opts)) (:shape opts) 1)
          rate (if (number? (:rate opts)) (:rate opts) 1)]
      (if (= size 1)
        (Gamma/staticNextDouble shape rate)
        (for [_ (range size)] (Gamma/staticNextDouble shape rate))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-sample-multivariate-normal"/><dl class="library-member-table"><dt class="library-member-name">sample-multivariate-normal</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([size &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a sample of the given size from a Multivariate Normal </div><div class="library-member-doc-line">  distribution. This is equivalent to R&apos;s mvtnorm::rmvnorm function. </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Arguments:</div><div class="library-member-doc-line">    size -- the size of the sample to return</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :mean (default (repeat (ncol sigma) 0)) </div><div class="library-member-doc-line">    :sigma (default (identity-matrix (count mean)))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core stats charts))</div><div class="library-member-doc-line">    (def mvn-samp (sample-multivariate-normal 1000 :mean [7 5] :sigma (matrix [[2 1.5] [1.5 3]])))</div><div class="library-member-doc-line">    (covariance mvn-samp)</div><div class="library-member-doc-line">    (def means (map mean (trans mvn-samp)))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; plot scatter-plot of points</div><div class="library-member-doc-line">    (def mvn-plot (scatter-plot (sel mvn-samp :cols 0) (sel mvn-samp :cols 1)))</div><div class="library-member-doc-line">    (view mvn-plot)</div><div class="library-member-doc-line">    ;; add centroid to plot</div><div class="library-member-doc-line">    (add-points mvn-plot [(first means)] [(second means)])</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; add regression line to scatter plot</div><div class="library-member-doc-line">    (def x (sel mvn-samp :cols 0))</div><div class="library-member-doc-line">    (def y (sel mvn-samp :cols 1))</div><div class="library-member-doc-line">    (def lm (linear-model y x))</div><div class="library-member-doc-line">    (add-lines mvn-plot x (:fitted lm))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Multivariate_normal</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-sample-multivariate-normal&apos;)" id="linkto-membersource-incanter.stats-sample-multivariate-normal">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-sample-multivariate-normal"><pre>(defn sample-multivariate-normal 
&quot; Returns a sample of the given size from a Multivariate Normal ...&quot;
  ([size &amp; options]
   (let [opts (if options (apply assoc {} options) nil)
         mean (if (:mean opts) 
                (:mean opts) 
                (if (:sigma opts) 
                  (repeat (ncol (:sigma opts)) 0)
                  [0]))
         sigma (if (:sigma opts) 
                 (:sigma opts) 
                 (identity-matrix (count mean)))
         p (count mean)
         chol (decomp-cholesky sigma)
         norm-samp (mmult (matrix (sample-normal (* size p)) p) chol)
        ]
     (matrix (map #(plus % (trans mean)) norm-samp)))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-sample-neg-binomial"/><dl class="library-member-table"><dt class="library-member-name">sample-neg-binomial</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([size &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a sample of the given size from a Negative Binomial distribution.</div><div class="library-member-doc-line">  Same as R&apos;s rnbinom</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :size (default 10) </div><div class="library-member-doc-line">    :prob (default 1/2)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-neg-binomial and cdf-neg-binomial</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/NegativeBinomial.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Negative_binomial_distribution</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (sample-neg-binomial 1000 :prob 1/2 :size 20)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-sample-neg-binomial&apos;)" id="linkto-membersource-incanter.stats-sample-neg-binomial">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-sample-neg-binomial"><pre>(defn sample-neg-binomial
&quot; Returns a sample of the given size from a Negative Binomial distribution....&quot;
  ([size &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          size (if (number? (:size opts)) (:size opts) 10)
          prob (if (number? (:prob opts)) (:prob opts) 1/2)]
     (if (= size 1)
        (NegativeBinomial/staticNextInt size prob)
        (for [_ (range size)] (NegativeBinomial/staticNextInt size prob))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-sample-normal"/><dl class="library-member-table"><dt class="library-member-name">sample-normal</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([size &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a sample of the given size from a Normal distribution</div><div class="library-member-doc-line">  This is equivalent to R&apos;s rnorm function. </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :mean (default 0) </div><div class="library-member-doc-line">    :sd (default 1)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-normal, cdf-normal, quantile-normal</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Normal.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Normal_distribution</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (sample-normal 1000 :mean -2 :sd (sqrt 0.5))</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-sample-normal&apos;)" id="linkto-membersource-incanter.stats-sample-normal">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-sample-normal"><pre>(defn sample-normal
&quot; Returns a sample of the given size from a Normal distribution...&quot;
  ([size &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          mean (if (:mean opts) (:mean opts) 0)
          sd (if (:sd opts) (:sd opts) 1)]
      (if (= size 1)
        (Normal/staticNextDouble mean sd)
        (for [_ (range size)] (Normal/staticNextDouble mean sd))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-sample-permutations"/><dl class="library-member-table"><dt class="library-member-name">sample-permutations</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([n x] [n x y])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> If provided a two arguments (n x), it returns a list of n permutations</div><div class="library-member-doc-line">  of x. If provided three (n x y) arguments, returns a list with two with n permutations of</div><div class="library-member-doc-line">  each arguments, where each permutation is drawn from the pooled arguments.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Arguments:</div><div class="library-member-doc-line">    n -- number of randomized versions of the original two groups to return</div><div class="library-member-doc-line">    x -- group 1</div><div class="library-member-doc-line">    y -- (default nil) group 2</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core stats))</div><div class="library-member-doc-line">    (sample-permutations 10 (range 10))</div><div class="library-member-doc-line">    (sample-permutations 10 (range 10) (range 10 20))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; extended example with plant-growth data</div><div class="library-member-doc-line">    (use &apos;(incanter core stats datasets charts))</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    ;; load the plant-growth dataset</div><div class="library-member-doc-line">    (def data (to-matrix (get-dataset :plant-growth)))</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    ;; break the first column of the data into groups based on treatment (second column).</div><div class="library-member-doc-line">    (def groups (group-by data 1 :cols 0))</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    ;; define a function for the statistic of interest</div><div class="library-member-doc-line">    (defn means-diff [x y] (minus (mean x) (mean y)))</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    ;; calculate the difference in sample means between the two groups</div><div class="library-member-doc-line">    (def samp-mean-diff (means-diff (first groups) (second groups))) ;; 0.371</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    ;; create 500 permuted versions of the original two groups</div><div class="library-member-doc-line">    (def permuted-groups (sample-permutations 1000 (first groups) (second groups)))</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    ;; calculate the difference of means of the 500 samples</div><div class="library-member-doc-line">    (def permuted-means-diffs1 (map means-diff (first permuted-groups) (second permuted-groups)))</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    ;; use an indicator function that returns 1 when the randomized means diff is greater</div><div class="library-member-doc-line">    ;; than the original sample mean, and zero otherwise. Then take the mean of this sequence</div><div class="library-member-doc-line">    ;; of ones and zeros. That is the proportion of times you would see a value more extreme</div><div class="library-member-doc-line">    ;; than the sample mean (i.e. the p-value).</div><div class="library-member-doc-line">    (mean (indicator #(&gt; % samp-mean-diff) permuted-means-diffs1)) ;; 0.088</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    ;; calculate the 95% confidence interval of the null hypothesis. If the</div><div class="library-member-doc-line">    ;; sample difference in means is outside of this range, that is evidence </div><div class="library-member-doc-line">    ;; that the two means are statistically significantly different.</div><div class="library-member-doc-line">    (quantile permuted-means-diffs1 :probs [0.025 0.975]) ;; (-0.606 0.595)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; Plot a histogram of the permuted-means-diffs using the density option,</div><div class="library-member-doc-line">    ;; instead of the default frequency, and then add a normal pdf curve with </div><div class="library-member-doc-line">    ;; the mean and sd of permuted-means-diffs data for a visual comparison.</div><div class="library-member-doc-line">    (doto (histogram permuted-means-diffs1 :density true)</div><div class="library-member-doc-line">          (add-lines (range -1 1 0.01) (pdf-normal (range -1 1 0.01) </div><div class="library-member-doc-line">                                                   :mean (mean permuted-means-diffs1) </div><div class="library-member-doc-line">                                                   :sd (sd permuted-means-diffs1)))</div><div class="library-member-doc-line">          view)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; compare the means of treatment 2 and control</div><div class="library-member-doc-line">    (def permuted-groups (sample-permutations 1000 (first groups) (last groups)))</div><div class="library-member-doc-line">    (def permuted-means-diffs2 (map means-diff (first permuted-groups) (second permuted-groups)))</div><div class="library-member-doc-line">    (def samp-mean-diff (means-diff (first groups) (last groups))) ;; -0.4939</div><div class="library-member-doc-line">    (mean (indicator #(&lt; % samp-mean-diff) permuted-means-diffs2)) ;; 0.022</div><div class="library-member-doc-line">    (quantile permuted-means-diffs2 :probs [0.025 0.975]) ;; (-0.478 0.466)</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    ;; compare the means of treatment 1 and treatment 2</div><div class="library-member-doc-line">    (def permuted-groups (sample-permutations 1000 (second groups) (last groups)))</div><div class="library-member-doc-line">    (def permuted-means-diffs3 (map means-diff (first permuted-groups) (second permuted-groups)))</div><div class="library-member-doc-line">    (def samp-mean-diff (means-diff (second groups) (last groups))) ;; -0.865</div><div class="library-member-doc-line">    (mean (indicator #(&lt; % samp-mean-diff) permuted-means-diffs3)) ;;  0.002</div><div class="library-member-doc-line">    (quantile permuted-means-diffs3 :probs [0.025 0.975]) ;; (-0.676 0.646)</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">    (doto (box-plot permuted-means-diffs1)</div><div class="library-member-doc-line">          (add-box-plot permuted-means-diffs2)</div><div class="library-member-doc-line">          (add-box-plot permuted-means-diffs3)</div><div class="library-member-doc-line">          view)</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Further Reading:</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Resampling_(statistics)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-sample-permutations&apos;)" id="linkto-membersource-incanter.stats-sample-permutations">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-sample-permutations"><pre>(defn sample-permutations 
&quot; If provided a two arguments (n x), it returns a list of n permutations...&quot;
  ([n x]
    (loop [samp &apos;() i 0]
      (if (= i n)
          samp
          (recur 
            (conj samp (sample x)) (inc i)))))

  ([n x y]
   (let [pool (concat x y)
         m1 (count x)]
     (loop [samp-x &apos;() samp-y &apos;() i 0]
       (if (= i n)
         (list samp-x samp-y)
         (let [perm-samp (sample pool)
               new-x (take m1 perm-samp)
               new-y (drop m1 perm-samp)]
           (recur (conj samp-x new-x) (conj samp-y new-y) (inc i))))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-sample-poisson"/><dl class="library-member-table"><dt class="library-member-name">sample-poisson</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([size &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a sample of the given size from a Poisson distribution.</div><div class="library-member-doc-line">  Same as R&apos;s rpois</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :lambda (default 1) </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-poisson and cdf-poisson</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/Poisson.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Poisson_distribution</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (sample-poisson 1000 :lambda 10)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-sample-poisson&apos;)" id="linkto-membersource-incanter.stats-sample-poisson">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-sample-poisson"><pre>(defn sample-poisson
&quot; Returns a sample of the given size from a Poisson distribution....&quot;
  ([size &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          lambda (if (number? (:lambda opts)) (:lambda opts) 1)]
     (if (= size 1)
        (Poisson/staticNextInt lambda)
        (for [_ (range size)] (Poisson/staticNextInt lambda))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-sample-t"/><dl class="library-member-table"><dt class="library-member-name">sample-t</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([size &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a sample of the given size from a Student&apos;s t distribution.</div><div class="library-member-doc-line">  Same as R&apos;s rt function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :df (default 1) </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-t, cdf-t, and quantile-t</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/StudentT.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Student-t_distribution</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (cdf-t 1000 :df 10)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-sample-t&apos;)" id="linkto-membersource-incanter.stats-sample-t">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-sample-t"><pre>(defn sample-t
&quot; Returns a sample of the given size from a Student&apos;s t distribution....&quot;
  ([size &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          df (if (number? (:df opts)) (:df opts) 1)]
      (if (= size 1)
        (StudentT/staticNextDouble df)
        (for [_ (range size)] (StudentT/staticNextDouble df))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-sample-uniform"/><dl class="library-member-table"><dt class="library-member-name">sample-uniform</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([size &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Returns a sample of the given size from a Uniform distribution.</div><div class="library-member-doc-line">  This is equivalent to R&apos;s runif function. </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options: </div><div class="library-member-doc-line">    :min (default 0) </div><div class="library-member-doc-line">    :max (default 1)</div><div class="library-member-doc-line">    :integers (default false)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  See also: </div><div class="library-member-doc-line">      pdf-uniform and cdf-uniform</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References: </div><div class="library-member-doc-line">      http://incanter.org/docs/parallelcolt/api/cern/jet/random/tdouble/DoubleUniform.html</div><div class="library-member-doc-line">      http://en.wikipedia.org/wiki/Uniform_distribution</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Example: </div><div class="library-member-doc-line">      (sample-uniform 1000)</div><div class="library-member-doc-line">      (sample-uniform 1000 :min 1 :max 10)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-sample-uniform&apos;)" id="linkto-membersource-incanter.stats-sample-uniform">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-sample-uniform"><pre>(defn sample-uniform 
&quot; Returns a sample of the given size from a Uniform distribution....&quot;
  ([size &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          min-val (double (if (:min opts) (:min opts) 0.0))
          max-val (double (if (:max opts) (:max opts) 1.0))
          ints? (if (true? (:integers opts)) true false)
          dist (DoubleUniform. min-val max-val (DoubleMersenneTwister.))]
      (if (= size 1)
        (if ints? 
          (DoubleUniform/staticNextIntFromTo min-val max-val)
          (DoubleUniform/staticNextDoubleFromTo min-val max-val))
        (if ints? 
          (for [_ (range size)] (DoubleUniform/staticNextIntFromTo min-val max-val))
          (for [_ (range size)] (DoubleUniform/staticNextDoubleFromTo min-val max-val)))))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-sample-wishart"/><dl class="library-member-table"><dt class="library-member-name">sample-wishart</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([&amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns a p-by-p symmetric distribution drawn from a Wishart distribution</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :p (default 2) -- number of dimensions of resulting matrix</div><div class="library-member-doc-line">    :df (default p) -- degree of freedoms (aka n), df &lt;= p</div><div class="library-member-doc-line">    :scale (default (identity-matrix p)) -- positive definite matrix (aka V)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (use &apos;incanter.stats)</div><div class="library-member-doc-line">    (sample-wishart :df 10  :p 4)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    ;; calculate the mean of 1000 wishart matrices, should equal (mult df scale)</div><div class="library-member-doc-line">    (div (reduce plus (for [_ (range 1000)] (sample-wishart :p 4))) 1000)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Wishart_distribution#</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-sample-wishart&apos;)" id="linkto-membersource-incanter.stats-sample-wishart">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-sample-wishart"><pre>(defn sample-wishart
&quot;...&quot;
  ([&amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          p (if (:p opts) (:p opts) 2)
          df (if (:df opts) (:df opts) p)
          scale (if (:scale opts) (:scale opts) (identity-matrix p))
          diagonal (for [i (range 1 (inc p))] 
                     (pow (sample-chisq 1 :df (inc (- df i))) 1/2))
          mat (diag diagonal)
          indices (for [i (range p) j (range p) :when (&lt; j i)] [i j])
          _ (doseq [indx indices] (.set mat (first indx) (second indx) (sample-normal 1)))
          chol (decomp-cholesky scale)
          x (mmult chol mat (trans mat) (trans chol))]
        x)))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-sd"/><dl class="library-member-table"><dt class="library-member-name">sd</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns the sample standard deviation of the data, x. Equivalent to </div><div class="library-member-doc-line">  R&apos;s sd function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (sd (sample-normal 100))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/DoubleDescriptive.html</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Standard_deviation</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-sd&apos;)" id="linkto-membersource-incanter.stats-sd">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-sd"><pre>(defn sd 
&quot;...&quot; 
  ([x]
    ;; population sd, not the sample sd
    ;(DoubleDescriptive/sampleStandardDeviation (length x) (variance x))))
    ;; return the sample standard deviation
    (sqrt (variance x))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-skewness"/><dl class="library-member-table"><dt class="library-member-name">skewness</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns the skewness of the data, x. &quot;Skewness is a measure of the asymmetry </div><div class="library-member-doc-line">  of the probability distribution of a real-valued random variable.&quot; (Wikipedia)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (skewness (sample-normal 100000)) ;; approximately 0</div><div class="library-member-doc-line">    (skewness (sample-gamma 100000)) ;; approximately 2</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/DoubleDescriptive.html</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Skewness</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-skewness&apos;)" id="linkto-membersource-incanter.stats-skewness">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-skewness"><pre>(defn skewness 
&quot;
  Returns the skewness of the data, x. \&quot;Skewness is a measure of the asymmetry 
  of the probability distribution of a real-valued random variable.\&quot; (Wikipedia)

  Examples:

    (skewness (sample-normal 100000)) ;; approximately 0
    (skewness (sample-gamma 100000)) ;; approximately 2

  References:
    http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/DoubleDescriptive.html
    http://en.wikipedia.org/wiki/Skewness

&quot;
  ([x] (DoubleDescriptive/skew (DoubleArrayList. (double-array x)) (mean x) (sd x))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-sweep"/><dl class="library-member-table"><dt class="library-member-name">sweep</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Return an array obtained from an input array by sweeping out a</div><div class="library-member-doc-line">  summary statistic. Based to R&apos;s sweep function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Arguments:</div><div class="library-member-doc-line">      x is an sequence</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Options:</div><div class="library-member-doc-line">          :stat (default mean) the statistic to sweep out</div><div class="library-member-doc-line">          :fun (defaul minus) the function used to sweep the stat out</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    Example:</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line">      (use &apos;(incanter core stats))</div><div class="library-member-doc-line">  </div><div class="library-member-doc-line">      (def x (sample-normal 30 :mean 10 :sd 5))</div><div class="library-member-doc-line">      (sweep x) ;; center the data around mean</div><div class="library-member-doc-line">      (sweep x :stat sd :fun div) ;; divide data by its sd</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-sweep&apos;)" id="linkto-membersource-incanter.stats-sweep">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-sweep"><pre>(defn sweep
&quot; Return an array obtained from an input array by sweeping out a...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil) 
          stat-fn (if (:stat opts) (:stat opts) mean)
          fun (if (:fun opts) (:fun opts) minus)
          stat (stat-fn x)]
      (fun x stat))))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-t-test"/><dl class="library-member-table"><dt class="library-member-name">t-test</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Argument:</div><div class="library-member-doc-line">    x : sample to test</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Options:</div><div class="library-member-doc-line">    :y (default nil)</div><div class="library-member-doc-line">    :mu (default (mean y) or 0) population mean</div><div class="library-member-doc-line">    :alternative (default :two-sided) other choices :less :greater</div><div class="library-member-doc-line">    :var-equal TODO (default false) variance equal</div><div class="library-member-doc-line">    :paired TODO (default false) paired test</div><div class="library-member-doc-line">    :conf-level (default 0.95) for returned confidence interval</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">  </div><div class="library-member-doc-line">    (t-test (range 1 11) :mu 0) </div><div class="library-member-doc-line">    (t-test (range 1 11) :mu 0 :alternative :less)</div><div class="library-member-doc-line">    (t-test (range 1 11) :mu 0 :alternative :greater)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (t-test (range 1 11) :y (range 7 21))</div><div class="library-member-doc-line">    (t-test (range 1 11) :y (range 7 21) :alternative :less)</div><div class="library-member-doc-line">    (t-test (range 1 11) :y (range 7 21) :alternative :greater)</div><div class="library-member-doc-line">    (t-test (range 1 11) :y (conj (range 7 21) 200))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/T_test</div><div class="library-member-doc-line">    http://www.socialresearchmethods.net/kb/stat_t.php</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-t-test&apos;)" id="linkto-membersource-incanter.stats-t-test">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-t-test"><pre>(defn t-test
&quot;...&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          y (if (:y opts) (:y opts) nil)   
          one-sample? (nil? y)
          mu (if (:mu opts) (:mu opts) 
               (if y (mean y) 0))
          paired? (if (true? (:paired opts)) true false)
          var-equal? (if (true? (:var-equal opts)) true false)
          conf-level (if (:conf-level opts) (:conf-level opts) 0.95)
          alternative (if (:alternative opts) (:alternative opts) :two-sided)
          x-mean (mean x)
          x-var (variance x)
          n1 (count x)
          y-mean (if one-sample? nil (mean y))
          y-var (if one-sample? nil (variance y))
          n2 (if one-sample? nil (count y))
          t-stat (if one-sample?
                   (/ (- x-mean mu) (/ (sqrt x-var) (sqrt n1)))
                   ;; calculate Welch&apos;s t test
                   (/ (- x-mean y-mean) (sqrt (+ (/ x-var n1) (/ y-var n2)))))
          df (if one-sample?
               (dec n1)
               ;; calculate Welch-Satterthwaite equation
               (/ (pow (+ (/ x-var n1) (/ y-var n2)) 2)
                  (+ (/ (pow (/ x-var n1) 2) (dec n1))
                     (/ (pow (/ y-var n2) 2) (dec n2)))))
          lower-tail? (cond
                        (= alternative :two-sided)
                          (if (neg? t-stat) true false)
                        (= alternative :lower)
                          (if (neg? t-stat) false true)
                        (= alternative :greater)
                          (if one-sample?
                            (if (neg? t-stat) true false)
                            (if (neg? t-stat) false true)))
          one-sided-p (cdf-t t-stat :df df :lower-tail lower-tail?)
          qt (if (= alternative :two-sided)
               (quantile-t (/ (- 1 conf-level) 2) :df df)
               (quantile-t (- 1 conf-level) :df df))]
      {:t-stat t-stat
       :df df
       :x-mean x-mean
       :x-var x-var
       :n1 n1
       :y-mean y-mean
       :y-var y-var
       :n2 n2
       :p-value (if (= alternative :two-sided) (* 2 one-sided-p) one-sided-p)
       :conf-int (if one-sample?
                   ;; one-sample confidence interval
                   [(if (= alternative :less)
                      Double/NEGATIVE_INFINITY
                      (+ x-mean (/ (* qt (sqrt x-var)) (sqrt n1))))
                    (if (= alternative :greater) 
                      Double/POSITIVE_INFINITY
                      (- x-mean (/ (* qt (sqrt x-var)) (sqrt n1))))]
                   ;; two-sample confidence interval
                   [(if (= alternative :less)
                      Double/NEGATIVE_INFINITY 
                      (+ (- x-mean y-mean) (* qt (sqrt (+ (/ x-var n1) (/ y-var n2))))))
                    (if (= alternative :greater) 
                      Double/POSITIVE_INFINITY
                      (- (- x-mean y-mean) (* qt (sqrt (+ (/ x-var n1) (/ y-var n2))))))])
      })))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-tabulate"/><dl class="library-member-table"><dt class="library-member-name">tabulate</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x &amp; options])</span></div><div class="library-member-docs"><div class="library-member-doc-line"> Cross-tabulates the values of the given numeric matrix.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns a hash-map with the following fields:</div><div class="library-member-doc-line">    :table -- the table of counts for each combination of values,</div><div class="library-member-doc-line">              this table is only returned if x has two-columns</div><div class="library-member-doc-line">    :levels -- a sequence of sequences, where each sequence list</div><div class="library-member-doc-line">               the levels (possible values) of the corresponding</div><div class="library-member-doc-line">               column of x.</div><div class="library-member-doc-line">    :margins -- a sequence of sequences, where each sequence </div><div class="library-member-doc-line">                represents the marginal total for each level </div><div class="library-member-doc-line">                of the corresponding column of x.</div><div class="library-member-doc-line">    :counts -- a hash-map, where vectors of unique combinations</div><div class="library-member-doc-line">               of the cross-tabulated levels are the keys and the</div><div class="library-member-doc-line">               values are the total count of each combination.</div><div class="library-member-doc-line">    :N  -- the grand-total for the contingency table</div><div class="library-member-doc-line">    </div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core stats))</div><div class="library-member-doc-line">    (tabulate [1 2 3 2 3 2 4 3 5])</div><div class="library-member-doc-line">    (tabulate (sample-poisson 100 :lambda 5))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (use &apos;(incanter core stats datasets))</div><div class="library-member-doc-line">    (def math-prog (to-matrix (get-dataset :math-prog)))</div><div class="library-member-doc-line">    (tabulate (sel math-prog :cols [1 2]))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def data (matrix [[1 0 1] </div><div class="library-member-doc-line">                       [1 1 1] </div><div class="library-member-doc-line">                       [1 1 1] </div><div class="library-member-doc-line">                       [1 0 1] </div><div class="library-member-doc-line">                       [0 0 0] </div><div class="library-member-doc-line">                       [1 1 1] </div><div class="library-member-doc-line">                       [1 1 1] </div><div class="library-member-doc-line">                       [1 0 1] </div><div class="library-member-doc-line">                       [1 1 0]]))</div><div class="library-member-doc-line">    (tabulate data)</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">    (def data (matrix [[1 0] </div><div class="library-member-doc-line">                       [1 1] </div><div class="library-member-doc-line">                       [1 1] </div><div class="library-member-doc-line">                       [1 0] </div><div class="library-member-doc-line">                       [0 0] </div><div class="library-member-doc-line">                       [1 1] </div><div class="library-member-doc-line">                       [1 1] </div><div class="library-member-doc-line">                       [1 0] </div><div class="library-member-doc-line">                       [1 1]]))</div><div class="library-member-doc-line">    (tabulate data)</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-tabulate&apos;)" id="linkto-membersource-incanter.stats-tabulate">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-tabulate"><pre>(defn tabulate
&quot; Cross-tabulates the values of the given numeric matrix....&quot;
  ([x &amp; options]
    (let [opts (if options (apply assoc {} options) nil)
          _x (if (matrix? x) x (matrix x))
          p (ncol _x)
          n (nrow _x)
          levels (for [i (range p)] (sort (seq (into #{} (sel _x :cols i)))))
          margins (for [j (range p)]
                  (loop [marg {} i (int 0)]
                    (if (= i n)
                      marg
                      (let [lvl (sel _x :rows i :cols j)]
                        (recur (let [cnt (get marg lvl)]
                                (if cnt 
                                  (assoc marg lvl (inc cnt))
                                  (assoc marg lvl 1)))
                              (inc i))))))
          counts (loop [tab {} i (int 0)]
                    (if (= i n)
                      tab
                      (recur (let [row (if (&gt; p 1)
                                         (to-list (nth _x i))
                                         (nth _x i))
                                   cnt (get tab row)]
                              (if (nil? cnt)
                                (assoc tab row 1)
                                (assoc tab row (inc cnt))))
                            (inc i))))
          n-levels (map #(count (keys %)) margins)]

      {:counts counts
       :margins margins
       :table (when (= p 2)
                (matrix (for [r (first levels) 
                              c (second levels)]  
                          (let [c (get counts (to-list (trans [r c])))] 
                            (if c c 0))) 
                        (second n-levels)))
       :n-vars p
       :N (reduce + (vals (first margins)))
       :n-levels n-levels
       :levels levels})))</pre></div></div></dd></dl></li><li class="library-member"><a name="member-incanter.stats-variance"/><dl class="library-member-table"><dt class="library-member-name">variance</dt><dd><div class="library-member-info"><span class="library-member-type">fn</span> <span class="library-member-arglists">([x])</span></div><div class="library-member-docs"><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Returns the sample variance of the data, x. Equivalent to R&apos;s var function.</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  Examples:</div><div class="library-member-doc-line">    (variance (sample-normal 100))</div><div class="library-member-doc-line"><span class="library-member-doc-whitespace"> </span></div><div class="library-member-doc-line">  References:</div><div class="library-member-doc-line">    http://incanter.org/docs/parallelcolt/api/cern/jet/stat/tdouble/DoubleDescriptive.html</div><div class="library-member-doc-line">    http://en.wikipedia.org/wiki/Sample_variance#Population_variance_and_sample_variance</div></div><div class="library-member-source-section"><div class="library-member-source-toggle">[ <a href="javascript:toggleSource(&apos;membersource-incanter.stats-variance&apos;)" id="linkto-membersource-incanter.stats-variance">Show Source</a> ]</div><div class="library-member-source" id="membersource-incanter.stats-variance"><pre>(defn variance 
&quot;...&quot;
  ([x] (DoubleDescriptive/sampleVariance (length x) (sum x) (sum-of-squares x))))</pre></div></div></dd></dl></li></ol></div></div></body></html>